/**
 * skylark-threejs-ex - A version of threejs extentions library that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-threejs-ex/
 * @license MIT
 */
define(["skylark-threejs"],function(e){"use strict";var t=function(){};return t.prototype={constructor:t,parse:function(t){var r,n,o,i,a,f="",u=0,c=0,s=0,m=new e.Vector3,y=new e.Vector3,g=new e.Vector2,l=[];return t.traverse(function(t){t instanceof e.Mesh&&function(t){var o=0,p=0,x=0,v=t.geometry,d=new e.Matrix3;if(v instanceof e.Geometry&&(v=(new e.BufferGeometry).setFromObject(t)),v instanceof e.BufferGeometry){var w=v.getAttribute("position"),z=v.getAttribute("normal"),M=v.getAttribute("uv"),b=v.getIndex();if(f+="o "+t.name+"\n",t.material&&t.material.name&&(f+="usemtl "+t.material.name+"\n"),void 0!==w)for(r=0,i=w.count;r<i;r++,o++)m.x=w.getX(r),m.y=w.getY(r),m.z=w.getZ(r),m.applyMatrix4(t.matrixWorld),f+="v "+m.x+" "+m.y+" "+m.z+"\n";if(void 0!==M)for(r=0,i=M.count;r<i;r++,x++)g.x=M.getX(r),g.y=M.getY(r),f+="vt "+g.x+" "+g.y+"\n";if(void 0!==z)for(d.getNormalMatrix(t.matrixWorld),r=0,i=z.count;r<i;r++,p++)y.x=z.getX(r),y.y=z.getY(r),y.z=z.getZ(r),y.applyMatrix3(d).normalize(),f+="vn "+y.x+" "+y.y+" "+y.z+"\n";if(null!==b)for(r=0,i=b.count;r<i;r+=3){for(a=0;a<3;a++)n=b.getX(r+a)+1,l[a]=u+n+(z||M?"/"+(M?c+n:"")+(z?"/"+(s+n):""):"");f+="f "+l.join(" ")+"\n"}else for(r=0,i=w.count;r<i;r+=3){for(a=0;a<3;a++)n=r+a+1,l[a]=u+n+(z||M?"/"+(M?c+n:"")+(z?"/"+(s+n):""):"");f+="f "+l.join(" ")+"\n"}}else console.warn("THREE.OBJExporter.parseMesh(): geometry type unsupported",v);u+=o,c+=x,s+=p}(t),t instanceof e.Line&&function(t){var a=0,c=t.geometry,s=t.type;if(c instanceof e.Geometry&&(c=(new e.BufferGeometry).setFromObject(t)),c instanceof e.BufferGeometry){var y=c.getAttribute("position");if(f+="o "+t.name+"\n",void 0!==y)for(r=0,i=y.count;r<i;r++,a++)m.x=y.getX(r),m.y=y.getY(r),m.z=y.getZ(r),m.applyMatrix4(t.matrixWorld),f+="v "+m.x+" "+m.y+" "+m.z+"\n";if("Line"===s){for(f+="l ",n=1,i=y.count;n<=i;n++)f+=u+n+" ";f+="\n"}if("LineSegments"===s)for(o=1+(n=1),i=y.count;n<i;o=(n+=2)+1)f+="l "+(u+n)+" "+(u+o)+"\n"}else console.warn("THREE.OBJExporter.parseLine(): geometry type unsupported",c);u+=a}(t)}),f}},t});
//# sourceMappingURL=../sourcemaps/exporters/OBJExporter.js.map
