/**
 * skylark-threejs-ex - A version of threejs extentions library that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-threejs-ex/
 * @license MIT
 */
define(["skylark-threejs"],function(e){return e.OBJExporter=function(){},e.OBJExporter.prototype={constructor:e.OBJExporter,parse:function(t){var r,o,n,i,a,f="",u=0,c=0,s=0,m=new e.Vector3,p=new e.Vector3,y=new e.Vector2,g=[];return t.traverse(function(t){t instanceof e.Mesh&&function(t){var n=0,l=0,x=0,v=t.geometry,d=new e.Matrix3;if(v instanceof e.Geometry&&(v=(new e.BufferGeometry).setFromObject(t)),v instanceof e.BufferGeometry){var B=v.getAttribute("position"),E=v.getAttribute("normal"),w=v.getAttribute("uv"),O=v.getIndex();if(f+="o "+t.name+"\n",t.material&&t.material.name&&(f+="usemtl "+t.material.name+"\n"),void 0!==B)for(r=0,i=B.count;r<i;r++,n++)m.x=B.getX(r),m.y=B.getY(r),m.z=B.getZ(r),m.applyMatrix4(t.matrixWorld),f+="v "+m.x+" "+m.y+" "+m.z+"\n";if(void 0!==w)for(r=0,i=w.count;r<i;r++,x++)y.x=w.getX(r),y.y=w.getY(r),f+="vt "+y.x+" "+y.y+"\n";if(void 0!==E)for(d.getNormalMatrix(t.matrixWorld),r=0,i=E.count;r<i;r++,l++)p.x=E.getX(r),p.y=E.getY(r),p.z=E.getZ(r),p.applyMatrix3(d).normalize(),f+="vn "+p.x+" "+p.y+" "+p.z+"\n";if(null!==O)for(r=0,i=O.count;r<i;r+=3){for(a=0;a<3;a++)o=O.getX(r+a)+1,g[a]=u+o+(E||w?"/"+(w?c+o:"")+(E?"/"+(s+o):""):"");f+="f "+g.join(" ")+"\n"}else for(r=0,i=B.count;r<i;r+=3){for(a=0;a<3;a++)o=r+a+1,g[a]=u+o+(E||w?"/"+(w?c+o:"")+(E?"/"+(s+o):""):"");f+="f "+g.join(" ")+"\n"}}else console.warn("THREE.OBJExporter.parseMesh(): geometry type unsupported",v);u+=n,c+=x,s+=l}(t),t instanceof e.Line&&function(t){var a=0,c=t.geometry,s=t.type;if(c instanceof e.Geometry&&(c=(new e.BufferGeometry).setFromObject(t)),c instanceof e.BufferGeometry){var p=c.getAttribute("position");if(f+="o "+t.name+"\n",void 0!==p)for(r=0,i=p.count;r<i;r++,a++)m.x=p.getX(r),m.y=p.getY(r),m.z=p.getZ(r),m.applyMatrix4(t.matrixWorld),f+="v "+m.x+" "+m.y+" "+m.z+"\n";if("Line"===s){for(f+="l ",o=1,i=p.count;o<=i;o++)f+=u+o+" ";f+="\n"}if("LineSegments"===s)for(n=1+(o=1),i=p.count;o<i;n=(o+=2)+1)f+="l "+(u+o)+" "+(u+n)+"\n"}else console.warn("THREE.OBJExporter.parseLine(): geometry type unsupported",c);u+=a}(t)}),f}},e.OBJExporter});
//# sourceMappingURL=../sourcemaps/exporters/OBJExporter.js.map
