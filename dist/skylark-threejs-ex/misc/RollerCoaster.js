/**
 * skylark-threejs-ex - A version of threejs extentions library that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-threejs-ex/
 * @license MIT
 */
define(["skylark-threejs"],function(e){return e.RollerCoasterGeometry=function(t,r){e.BufferGeometry.call(this);var o=[],n=[],a=[],p=[1,1,1],s=[1,1,0],y=new e.Vector3(0,1,0),u=new e.Vector3,c=new e.Vector3,i=new e.Quaternion,h=new e.Quaternion;h.setFromAxisAngle(y,Math.PI/2);var l=new e.Vector3,w=new e.Vector3;w.copy(t.getPointAt(0));for(var d=[new e.Vector3(-.225,0,0),new e.Vector3(0,-.05,0),new e.Vector3(0,-.175,0),new e.Vector3(0,-.05,0),new e.Vector3(.225,0,0),new e.Vector3(0,-.175,0)],f=2*Math.PI,V=5,m=[],z=0;z<V;z++){var A=z/V*f;m.push(new e.Vector3(.06*Math.sin(A),.06*Math.cos(A),0))}V=6;var x=[];for(z=0;z<V;z++){A=z/V*f;x.push(new e.Vector3(.025*Math.sin(A),.025*Math.cos(A),0))}var Q=new e.Vector3,M=new e.Vector3;function v(e,t){M.set(0,0,-1).applyQuaternion(i);for(var r=0;r<e.length;r++)Q.copy(e[r]),Q.applyQuaternion(i),Q.add(l),o.push(Q.x,Q.y,Q.z),n.push(M.x,M.y,M.z),a.push(t[0],t[1],t[2]);M.set(0,0,1).applyQuaternion(i);for(r=e.length-1;r>=0;r--)Q.copy(e[r]),Q.applyQuaternion(i),Q.add(l),o.push(Q.x,Q.y,Q.z),n.push(M.x,M.y,M.z),a.push(t[0],t[1],t[2])}var b=new e.Vector3,G=new e.Vector3,B=new e.Vector3,g=new e.Vector3,F=new e.Vector3,P=new e.Vector3,I=new e.Vector3,R=new e.Vector3;function j(e,t,r){for(var p=0,s=e.length;p<s;p++){var y=e[p],u=e[(p+1)%s];b.copy(y).add(t),b.applyQuaternion(i),b.add(l),G.copy(u).add(t),G.applyQuaternion(i),G.add(l),B.copy(u).add(t),B.applyQuaternion(h),B.add(w),g.copy(y).add(t),g.applyQuaternion(h),g.add(w),o.push(b.x,b.y,b.z),o.push(G.x,G.y,G.z),o.push(g.x,g.y,g.z),o.push(G.x,G.y,G.z),o.push(B.x,B.y,B.z),o.push(g.x,g.y,g.z),F.copy(y),F.applyQuaternion(i),F.normalize(),P.copy(u),P.applyQuaternion(i),P.normalize(),I.copy(u),I.applyQuaternion(h),I.normalize(),R.copy(y),R.applyQuaternion(h),R.normalize(),n.push(F.x,F.y,F.z),n.push(P.x,P.y,P.z),n.push(R.x,R.y,R.z),n.push(P.x,P.y,P.z),n.push(I.x,I.y,I.z),n.push(R.x,R.y,R.z),a.push(r[0],r[1],r[2]),a.push(r[0],r[1],r[2]),a.push(r[0],r[1],r[2]),a.push(r[0],r[1],r[2]),a.push(r[0],r[1],r[2]),a.push(r[0],r[1],r[2])}}var C=new e.Vector3;for(z=1;z<=r;z++){l.copy(t.getPointAt(z/r)),y.set(0,1,0),u.subVectors(l,w).normalize(),c.crossVectors(y,u).normalize(),y.crossVectors(u,c);A=Math.atan2(u.x,u.z);i.setFromAxisAngle(y,A),z%2==0&&v(d,s),j(m,C.set(0,-.125,0),s),j(x,C.set(.2,0,0),p),j(x,C.set(-.2,0,0),p),w.copy(l),h.copy(i)}this.setAttribute("position",new e.BufferAttribute(new Float32Array(o),3)),this.setAttribute("normal",new e.BufferAttribute(new Float32Array(n),3)),this.setAttribute("color",new e.BufferAttribute(new Float32Array(a),3))},e.RollerCoasterGeometry.prototype=Object.create(e.BufferGeometry.prototype),e.RollerCoasterLiftersGeometry=function(t,r){e.BufferGeometry.call(this);var o=[],n=[],a=new e.Quaternion,p=new e.Vector3(0,1,0),s=new e.Vector3,y=new e.Vector3,u=[new e.Vector3(0,.05,-.05),new e.Vector3(0,.05,.05),new e.Vector3(0,-.05,0)],c=[new e.Vector3(-.05,0,.05),new e.Vector3(-.05,0,-.05),new e.Vector3(.05,0,0)],i=[new e.Vector3(.05,0,-.05),new e.Vector3(.05,0,.05),new e.Vector3(-.05,0,0)],h=new e.Vector3,l=new e.Vector3,w=new e.Vector3,d=new e.Vector3,f=new e.Vector3,V=new e.Vector3,m=new e.Vector3,z=new e.Vector3;function A(e,t,r){for(var p=0,s=e.length;p<s;p++){var y=e[p],u=e[(p+1)%s];h.copy(y),h.applyQuaternion(a),h.add(t),l.copy(u),l.applyQuaternion(a),l.add(t),w.copy(u),w.applyQuaternion(a),w.add(r),d.copy(y),d.applyQuaternion(a),d.add(r),o.push(h.x,h.y,h.z),o.push(l.x,l.y,l.z),o.push(d.x,d.y,d.z),o.push(l.x,l.y,l.z),o.push(w.x,w.y,w.z),o.push(d.x,d.y,d.z),f.copy(y),f.applyQuaternion(a),f.normalize(),V.copy(u),V.applyQuaternion(a),V.normalize(),m.copy(u),m.applyQuaternion(a),m.normalize(),z.copy(y),z.applyQuaternion(a),z.normalize(),n.push(f.x,f.y,f.z),n.push(V.x,V.y,V.z),n.push(z.x,z.y,z.z),n.push(V.x,V.y,V.z),n.push(m.x,m.y,m.z),n.push(z.x,z.y,z.z)}}for(var x=new e.Vector3,Q=new e.Vector3,M=1;M<=r;M++){s.copy(t.getPointAt(M/r)),y.copy(t.getTangentAt(M/r));var v=Math.atan2(y.x,y.z);a.setFromAxisAngle(p,v),s.y>10?(x.set(-.75,-.35,0),x.applyQuaternion(a),x.add(s),Q.set(.75,-.35,0),Q.applyQuaternion(a),Q.add(s),A(u,x,Q),x.set(-.7,-.3,0),x.applyQuaternion(a),x.add(s),Q.set(-.7,-s.y,0),Q.applyQuaternion(a),Q.add(s),A(c,x,Q),x.set(.7,-.3,0),x.applyQuaternion(a),x.add(s),Q.set(.7,-s.y,0),Q.applyQuaternion(a),Q.add(s),A(i,x,Q)):(x.set(0,-.2,0),x.applyQuaternion(a),x.add(s),Q.set(0,-s.y,0),Q.applyQuaternion(a),Q.add(s),A(i,x,Q))}this.setAttribute("position",new e.BufferAttribute(new Float32Array(o),3)),this.setAttribute("normal",new e.BufferAttribute(new Float32Array(n),3))},e.RollerCoasterLiftersGeometry.prototype=Object.create(e.BufferGeometry.prototype),e.RollerCoasterShadowGeometry=function(t,r){e.BufferGeometry.call(this);var o=[],n=new e.Vector3(0,1,0),a=new e.Vector3,p=new e.Quaternion,s=new e.Quaternion;s.setFromAxisAngle(n,Math.PI/2);var y=new e.Vector3,u=new e.Vector3;u.copy(t.getPointAt(0)),u.y=0;for(var c=new e.Vector3,i=new e.Vector3,h=new e.Vector3,l=new e.Vector3,w=1;w<=r;w++){y.copy(t.getPointAt(w/r)),y.y=0,a.subVectors(y,u);var d=Math.atan2(a.x,a.z);p.setFromAxisAngle(n,d),c.set(-.3,0,0),c.applyQuaternion(p),c.add(y),i.set(.3,0,0),i.applyQuaternion(p),i.add(y),h.set(.3,0,0),h.applyQuaternion(s),h.add(u),l.set(-.3,0,0),l.applyQuaternion(s),l.add(u),o.push(c.x,c.y,c.z),o.push(i.x,i.y,i.z),o.push(l.x,l.y,l.z),o.push(i.x,i.y,i.z),o.push(h.x,h.y,h.z),o.push(l.x,l.y,l.z),u.copy(y),s.copy(p)}this.setAttribute("position",new e.BufferAttribute(new Float32Array(o),3))},e.RollerCoasterShadowGeometry.prototype=Object.create(e.BufferGeometry.prototype),e.SkyGeometry=function(){e.BufferGeometry.call(this);for(var t=[],r=0;r<100;r++){var o=800*Math.random()-400,n=50*Math.random()+50,a=800*Math.random()-400,p=40*Math.random()+20;t.push(o-p,n,a-p),t.push(o+p,n,a-p),t.push(o-p,n,a+p),t.push(o+p,n,a-p),t.push(o+p,n,a+p),t.push(o-p,n,a+p)}this.setAttribute("position",new e.BufferAttribute(new Float32Array(t),3))},e.SkyGeometry.prototype=Object.create(e.BufferGeometry.prototype),e.TreesGeometry=function(t){e.BufferGeometry.call(this);var r=[],o=[],n=new e.Raycaster;n.ray.direction.set(0,-1,0);for(var a=0;a<2e3;a++){var p=500*Math.random()-250,s=500*Math.random()-250;n.ray.origin.set(p,50,s);var y=n.intersectObject(t);if(0!==y.length){var u=y[0].point.y,c=5*Math.random()+.5,i=Math.random()*Math.PI*2;r.push(p+Math.sin(i),u,s+Math.cos(i)),r.push(p,u+c,s),r.push(p+Math.sin(i+Math.PI),u,s+Math.cos(i+Math.PI)),i+=Math.PI/2,r.push(p+Math.sin(i),u,s+Math.cos(i)),r.push(p,u+c,s),r.push(p+Math.sin(i+Math.PI),u,s+Math.cos(i+Math.PI));for(var h=.1*Math.random(),l=0;l<6;l++)o.push(.2+h,.4+h,0)}}this.setAttribute("position",new e.BufferAttribute(new Float32Array(r),3)),this.setAttribute("color",new e.BufferAttribute(new Float32Array(o),3))},e.TreesGeometry.prototype=Object.create(e.BufferGeometry.prototype),e.RollerCoasterGeometry});
//# sourceMappingURL=../sourcemaps/misc/RollerCoaster.js.map
