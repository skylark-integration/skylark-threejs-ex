/**
 * skylark-threejs-ex - A version of threejs extentions library that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-threejs-ex/
 * @license MIT
 */
define(["skylark-threejs","../threex"],function(e,t){"use strict";var r=function(t){e.Object3D.call(this),this.element=t,this.element.style.position="absolute",this.addEventListener("removed",function(){this.traverse(function(e){e.element instanceof Element&&null!==e.element.parentNode&&e.element.parentNode.removeChild(e.element)})})};(r.prototype=Object.create(e.Object3D.prototype)).constructor=r;var n=function(){var t,n,o,i,a=this,s=new e.Vector3,l=new e.Matrix4,c=new e.Matrix4,d={objects:new WeakMap},u=document.createElement("div");u.style.overflow="hidden",this.domElement=u,this.getSize=function(){return{width:t,height:n}},this.setSize=function(e,r){o=(t=e)/2,i=(n=r)/2,u.style.width=e+"px",u.style.height=r+"px"};var m,f,h=function(e,t,n){if(e instanceof r){e.onBeforeRender(a,t,n),s.setFromMatrixPosition(e.matrixWorld),s.applyMatrix4(c);var l=e.element,m="translate(-50%,-50%) translate("+(s.x*o+o)+"px,"+(-s.y*i+i)+"px)";l.style.WebkitTransform=m,l.style.MozTransform=m,l.style.oTransform=m,l.style.transform=m,l.style.display=e.visible&&s.z>=-1&&s.z<=1?"":"none";var f={distanceToCameraSquared:p(n,e)};d.objects.set(e,f),l.parentNode!==u&&u.appendChild(l),e.onAfterRender(a,t,n)}for(var x=0,v=e.children.length;x<v;x++)h(e.children[x],t,n)},p=(m=new e.Vector3,f=new e.Vector3,function(e,t){return m.setFromMatrixPosition(e.matrixWorld),f.setFromMatrixPosition(t.matrixWorld),m.distanceToSquared(f)}),x=function(e){for(var t=function(e){var t=[];return e.traverse(function(e){e instanceof r&&t.push(e)}),t}(e).sort(function(e,t){return d.objects.get(e).distanceToCameraSquared-d.objects.get(t).distanceToCameraSquared}),n=t.length,o=0,i=t.length;o<i;o++)t[o].element.style.zIndex=n-o};this.render=function(e,t){!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),l.copy(t.matrixWorldInverse),c.multiplyMatrices(t.projectionMatrix,l),h(e,e,t),x(e)}};return n.CSS2DObject=r,t.renderers.CSS2DRenderer=n});
//# sourceMappingURL=../sourcemaps/renderers/CSS2DRenderer.js.map
