/**
 * skylark-threejs-ex - A version of threejs extentions library that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-threejs-ex/
 * @license MIT
 */
define(["skylark-threejs"],function(e){"use strict";var t=function(t){e.Object3D.call(this),this.element=t,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.addEventListener("removed",function(){this.traverse(function(e){e.element instanceof Element&&null!==e.element.parentNode&&e.element.parentNode.removeChild(e.element)})})};t.prototype=Object.create(e.Object3D.prototype),t.prototype.constructor=t;var r=function(e){t.call(this,e)};r.prototype=Object.create(t.prototype),r.prototype.constructor=r;var n=function(){var n,a,o,s,i=this,l=new e.Matrix4,c={camera:{fov:0,style:""},objects:new WeakMap},p=document.createElement("div");p.style.overflow="hidden",this.domElement=p;var d=document.createElement("div");d.style.WebkitTransformStyle="preserve-3d",d.style.transformStyle="preserve-3d",d.style.pointerEvents="none",p.appendChild(d);var m=/Trident/i.test(navigator.userAgent);function u(e){return Math.abs(e)<1e-10?0:e}function v(e){var t=e.elements;return"matrix3d("+u(t[0])+","+u(-t[1])+","+u(t[2])+","+u(t[3])+","+u(t[4])+","+u(-t[5])+","+u(t[6])+","+u(t[7])+","+u(t[8])+","+u(-t[9])+","+u(t[10])+","+u(t[11])+","+u(t[12])+","+u(-t[13])+","+u(t[14])+","+u(t[15])+")"}function f(e,t){var r=e.elements,n="matrix3d("+u(r[0])+","+u(r[1])+","+u(r[2])+","+u(r[3])+","+u(-r[4])+","+u(-r[5])+","+u(-r[6])+","+u(-r[7])+","+u(r[8])+","+u(r[9])+","+u(r[10])+","+u(r[11])+","+u(r[12])+","+u(r[13])+","+u(r[14])+","+u(r[15])+")";return m?"translate(-50%,-50%)translate("+o+"px,"+s+"px)"+t+n:"translate(-50%,-50%)"+n}this.getSize=function(){return{width:n,height:a}},this.setSize=function(e,t){o=(n=e)/2,s=(a=t)/2,p.style.width=e+"px",p.style.height=t+"px",d.style.width=e+"px",d.style.height=t+"px"};var h,y,x=(h=new e.Vector3,y=new e.Vector3,function(e,t){return h.setFromMatrixPosition(e.matrixWorld),y.setFromMatrixPosition(t.matrixWorld),h.distanceToSquared(y)});function b(e){for(var r=function(e){var r=[];return e.traverse(function(e){e instanceof t&&r.push(e)}),r}(e).sort(function(e,t){return c.objects.get(e).distanceToCameraSquared-c.objects.get(t).distanceToCameraSquared}),n=r.length,a=0,o=r.length;a<o;a++)r[a].element.style.zIndex=n-a}this.render=function(e,n){var a=n.projectionMatrix.elements[5]*s;if(c.camera.fov!==a&&(n.isPerspectiveCamera?(p.style.WebkitPerspective=a+"px",p.style.perspective=a+"px"):(p.style.WebkitPerspective="",p.style.perspective=""),c.camera.fov=a),!0===e.autoUpdate&&e.updateMatrixWorld(),null===n.parent&&n.updateMatrixWorld(),n.isOrthographicCamera)var h=-(n.right+n.left)/2,y=(n.top+n.bottom)/2;var g=n.isOrthographicCamera?"scale("+a+")translate("+u(h)+"px,"+u(y)+"px)"+v(n.matrixWorldInverse):"translateZ("+a+"px)"+v(n.matrixWorldInverse),W=g+"translate("+o+"px,"+s+"px)";c.camera.style===W||m||(d.style.WebkitTransform=W,d.style.transform=W,c.camera.style=W),function e(n,a,o,s){if(n instanceof t){var p;n.onBeforeRender(i,a,o),n instanceof r?(l.copy(o.matrixWorldInverse),l.transpose(),l.copyPosition(n.matrixWorld),l.scale(n.scale),l.elements[3]=0,l.elements[7]=0,l.elements[11]=0,l.elements[15]=1,p=f(l,s)):p=f(n.matrixWorld,s);var u=n.element,v=c.objects.get(n);if(void 0===v||v.style!==p){u.style.WebkitTransform=p,u.style.transform=p;var h={style:p};m&&(h.distanceToCameraSquared=x(o,n)),c.objects.set(n,h)}u.parentNode!==d&&d.appendChild(u),n.onAfterRender(i,a,o)}for(var y=0,b=n.children.length;y<b;y++)e(n.children[y],a,o,s)}(e,e,n,g),m&&b(e)}};return n.CSS3DObject=t,n.CSS3DSprite=r,n});
//# sourceMappingURL=../sourcemaps/renderers/CSS3DRenderer.js.map
