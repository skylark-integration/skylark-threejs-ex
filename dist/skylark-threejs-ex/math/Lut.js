/**
 * skylark-threejs-ex - A version of threejs extentions library that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-threejs-ex/
 * @license MIT
 */
define(["skylark-threejs","../threex"],function(t,i){"use strict";var a=function(t,i){return this.lut=[],this.setColorMap(t,i),this};a.prototype={constructor:a,lut:[],map:[],n:256,minV:0,maxV:1,set:function(t){return t instanceof a&&this.copy(t),this},setMin:function(t){return this.minV=t,this},setMax:function(t){return this.maxV=t,this},setColorMap:function(i,a){this.map=n[i]||n.rainbow,this.n=a||32;var s=1/this.n;this.lut.length=0;for(var h=0;h<=1;h+=s)for(var r=0;r<this.map.length-1;r++)if(h>=this.map[r][0]&&h<this.map[r+1][0]){var e=this.map[r][0],o=this.map[r+1][0],u=new t.Color(this.map[r][1]),m=new t.Color(this.map[r+1][1]),p=u.lerp(m,(h-e)/(o-e));this.lut.push(p)}return this},copy:function(t){return this.lut=t.lut,this.map=t.map,this.n=t.n,this.minV=t.minV,this.maxV=t.maxV,this},getColor:function(t){t<=this.minV?t=this.minV:t>=this.maxV&&(t=this.maxV),t=(t-this.minV)/(this.maxV-this.minV);var i=Math.round(t*this.n);return i==this.n&&(i-=1),this.lut[i]},addColorMap:function(t,i){n[t]=i},createCanvas:function(){var t=document.createElement("canvas");return t.width=1,t.height=this.n,this.updateCanvas(t),t},updateCanvas:function(i){for(var a=i.getContext("2d",{alpha:!1}),n=a.getImageData(0,0,1,this.n),s=n.data,h=0,r=1/this.n,e=1;e>=0;e-=r)for(var o=this.map.length-1;o>=0;o--)if(e<this.map[o][0]&&e>=this.map[o-1][0]){var u=this.map[o-1][0],m=this.map[o][0],p=new t.Color(this.map[o-1][1]),l=new t.Color(this.map[o][1]),c=p.lerp(l,(e-u)/(m-u));s[4*h]=Math.round(255*c.r),s[4*h+1]=Math.round(255*c.g),s[4*h+2]=Math.round(255*c.b),s[4*h+3]=255,h+=1}return a.putImageData(n,0,0),i}};var n={rainbow:[[0,255],[.2,65535],[.5,65280],[.8,16776960],[1,16711680]],cooltowarm:[[0,3952322],[.2,10206463],[.5,14474460],[.8,16163717],[1,11797542]],blackbody:[[0,0],[.2,7864320],[.5,15086080],[.8,16776960],[1,16777215]],grayscale:[[0,0],[.2,4210752],[.5,8355712],[.8,12566463],[1,16777215]]};return i.math.Lut=a});
//# sourceMappingURL=../sourcemaps/math/Lut.js.map
