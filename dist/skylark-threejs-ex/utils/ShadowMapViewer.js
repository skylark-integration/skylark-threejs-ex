/**
 * skylark-threejs-ex - A version of threejs extentions library that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-threejs-ex/
 * @license MIT
 */
define(["skylark-threejs","../threex","../shaders/UnpackDepthRGBAShader"],function(e,i,t){"use strict";var n=function(i){var n,h=this,r=void 0!==i.name&&""!==i.name,s=10,a=10,o=256,d=256,w=new e.OrthographicCamera(window.innerWidth/-2,window.innerWidth/2,window.innerHeight/2,window.innerHeight/-2,1,10);w.position.set(0,0,2);var l,p,u=new e.Scene,f=t,c=e.UniformsUtils.clone(f.uniforms),g=new e.ShaderMaterial({uniforms:c,vertexShader:f.vertexShader,fragmentShader:f.fragmentShader}),m=new e.PlaneBufferGeometry(o,d),x=new e.Mesh(m,g);if(u.add(x),r){var v=(l=document.createElement("canvas")).getContext("2d");v.font="Bold 20px Arial";var y=v.measureText(i.name).width;l.width=y,l.height=25,v.font="Bold 20px Arial",v.fillStyle="rgba( 255, 0, 0, 1 )",v.fillText(i.name,0,20);var S=new e.Texture(l);S.magFilter=e.LinearFilter,S.minFilter=e.LinearFilter,S.needsUpdate=!0;var z=new e.MeshBasicMaterial({map:S,side:e.DoubleSide});z.transparent=!0;var M=new e.PlaneBufferGeometry(l.width,l.height);p=new e.Mesh(M,z),u.add(p)}this.enabled=!0,this.size={width:o,height:d,set:function(e,i){this.width=e,this.height=i,x.scale.set(this.width/o,this.height/d,1),h.position.set(h.position.x,h.position.y)}},this.position={x:s,y:a,set:function(e,i){this.x=e,this.y=i;var t=h.size.width,n=h.size.height;x.position.set(-window.innerWidth/2+t/2+this.x,window.innerHeight/2-n/2-this.y,0),r&&p.position.set(x.position.x,x.position.y-h.size.height/2+l.height/2,0)}},this.render=function(e){this.enabled&&(c.tDiffuse.value=i.shadow.map.texture,n=e.autoClear,e.autoClear=!1,e.clearDepth(),e.render(u,w),e.autoClear=n)},this.updateForWindowResize=function(){this.enabled&&(w.left=window.innerWidth/-2,w.right=window.innerWidth/2,w.top=window.innerHeight/2,w.bottom=window.innerHeight/-2,w.updateProjectionMatrix(),this.update())},this.update=function(){this.position.set(this.position.x,this.position.y),this.size.set(this.size.width,this.size.height)},this.update()};return n.prototype.constructor=n,i.utils.ShadowMapViewer=n});
//# sourceMappingURL=../sourcemaps/utils/ShadowMapViewer.js.map
