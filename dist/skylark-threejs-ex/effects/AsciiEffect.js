/**
 * skylark-threejs-ex - A version of threejs extentions library that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-threejs-ex/
 * @license MIT
 */
define(["../threex"],function(e){"use strict";return e.effects.AsciiEffect=function(e,t,r){t=void 0===t?" .:-=+*#%@":t,r||(r={});var a,n,o=r.resolution?r.resolution:.15,l=r.scale?r.scale:1,c=!!r.color&&r.color,i=!!r.alpha&&r.alpha,s=!!r.block&&r.block,d=!!r.invert&&r.invert,g=document.createElement("div");g.style.cursor="default";var p,u,h,f=document.createElement("table");g.appendChild(f),this.setSize=function(t,r){a=t,n=r,e.setSize(t,r),function(){p=Math.round(a*C),u=Math.round(n*C),y.width=p,y.height=u,(h=e.domElement).style.backgroundColor&&(f.rows[0].cells[0].style.backgroundColor=h.style.backgroundColor,f.rows[0].cells[0].style.color=h.style.color),f.cellSpacing=0,f.cellPadding=0;var t=f.style;t.display="inline",t.width=Math.round(p/C*l)+"px",t.height=Math.round(u/C*l)+"px",t.whiteSpace="pre",t.margin="0px",t.padding="0px",t.letterSpacing=S+"px",t.fontFamily=b,t.fontSize=E+"px",t.lineHeight=M+"px",t.textAlign="left",t.textDecoration="none"}()},this.render=function(t,r){e.render(t,r),function(e,t){k.clearRect(0,0,p,u),k.drawImage(x,0,0,p,u);for(var r=k.getImageData(0,0,p,u).data,a="",n=0;n<u;n+=2){for(var o=0;o<p;o++){var l,g,h=4*(n*p+o),f=r[h],m=r[h+1],v=r[h+2],b=r[h+3];g=(.3*f+.59*m+.11*v)/255,0==b&&(g=1),l=Math.floor((1-g)*(w.length-1)),d&&(l=w.length-l-1);var y=w[l];void 0!==y&&" "!=y||(y="&nbsp;"),a+=c?"<span style='color:rgb("+f+","+m+","+v+");"+(s?"background-color:rgb("+f+","+m+","+v+");":"")+(i?"opacity:"+b/255+";":"")+"'>"+y+"</span>":y}a+="<br/>"}t.innerHTML="<tr><td>"+a+"</td></tr>"}(0,f)},this.domElement=g;var m=" .,:;i1tfLCG08@".split(""),v=" CGO08@".split(""),b="courier new, monospace",x=e.domElement,y=document.createElement("canvas");if(y.getContext){var k=y.getContext("2d");if(k.getImageData){var w=c?v:m;t&&(w=t);var C=.5;C=.25,o&&(C=o);var E=2/C*l,M=2/C*l,S=0;switch(l){case 1:S=-1;break;case 2:case 3:S=-2.1;break;case 4:S=-3.1;break;case 5:S=-4.15}}}}});
//# sourceMappingURL=../sourcemaps/effects/AsciiEffect.js.map
