{"version":3,"sources":["offscreen/scene.js"],"names":["define","THREE","camera","scene","renderer","group","animate","rotation","y","Date","now","render","self","requestAnimationFrame","seed","random","x","Math","sin","floor","canvas","width","height","pixelRatio","path","PerspectiveCamera","position","z","Scene","fog","Fog","background","Color","Group","add","loader","ImageBitmapLoader","setPath","setOptions","imageOrientation","load","imageBitmap","texture","CanvasTexture","geometry","IcosahedronBufferGeometry","materials","MeshMatcapMaterial","color","matcap","i","material","length","mesh","Mesh","scale","setScalar","WebGLRenderer","antialias","setPixelRatio","setSize"],"mappings":";;;;;;;AAAAA,QAAQ,mBAAoB,SAAUC,GAClC,aACA,IAAIC,EAAQC,EAAOC,EAAUC,EAkD7B,SAASC,IACLD,EAAME,SAASC,GAAKC,KAAKC,MAAQ,IACjCN,EAASO,OAAOR,EAAOD,GACnBU,KAAKC,uBACLD,KAAKC,sBAAsBP,GAInC,IAAIQ,EAAO,EACX,SAASC,IACL,IAAIC,EAAuB,IAAnBC,KAAKC,IAAIJ,KACjB,OAAOE,EAAIC,KAAKE,MAAMH,GAE1B,OA9DA,SAAcI,EAAQC,EAAOC,EAAQC,EAAYC,IAC7CtB,EAAS,IAAID,EAAMwB,kBAAkB,GAAIJ,EAAQC,EAAQ,EAAG,MACrDI,SAASC,EAAI,KACpBxB,EAAQ,IAAIF,EAAM2B,OACZC,IAAM,IAAI5B,EAAM6B,IAAI,QAAS,IAAK,KACxC3B,EAAM4B,WAAa,IAAI9B,EAAM+B,MAAM,SACnC3B,EAAQ,IAAIJ,EAAMgC,MAClB9B,EAAM+B,IAAI7B,GACV,IAAI8B,GAAS,IAAIlC,EAAMmC,mBAAoBC,QAAQb,GACnDW,EAAOG,YAAaC,iBAAkB,UACtCJ,EAAOK,KAAK,8CAA+C,SAAUC,GAqBjE,IApBA,IAAIC,EAAU,IAAIzC,EAAM0C,cAAcF,GAClCG,EAAW,IAAI3C,EAAM4C,0BAA0B,EAAG,GAClDC,GACA,IAAI7C,EAAM8C,oBACNC,MAAO,SACPC,OAAQP,IAEZ,IAAIzC,EAAM8C,oBACNC,MAAO,QACPC,OAAQP,IAEZ,IAAIzC,EAAM8C,oBACNC,MAAO,SACPC,OAAQP,IAEZ,IAAIzC,EAAM8C,oBACNC,MAAO,SACPC,OAAQP,KAGPQ,EAAI,EAAGA,EAAI,IAAKA,IAAK,CAC1B,IAAIC,EAAWL,EAAUI,EAAIJ,EAAUM,QACnCC,EAAO,IAAIpD,EAAMqD,KAAKV,EAAUO,GACpCE,EAAK3B,SAASV,EAAe,IAAXD,IAAiB,IACnCsC,EAAK3B,SAASlB,EAAe,IAAXO,IAAiB,IACnCsC,EAAK3B,SAASC,EAAe,IAAXZ,IAAiB,IACnCsC,EAAKE,MAAMC,UAAUzC,IAAW,GAChCV,EAAM6B,IAAImB,IAEdjD,EAAW,IAAIH,EAAMwD,eACjBC,WAAW,EACXtC,OAAQA,KAEHuC,cAAcpC,GACvBnB,EAASwD,QAAQvC,EAAOC,GAAQ,GAChChB","file":"../../offscreen/scene.js","sourcesContent":["define([\"skylark-threejs\"], function (THREE) {\n    'use strict';\n    var camera, scene, renderer, group;\n    function init(canvas, width, height, pixelRatio, path) {\n        camera = new THREE.PerspectiveCamera(40, width / height, 1, 1000);\n        camera.position.z = 200;\n        scene = new THREE.Scene();\n        scene.fog = new THREE.Fog(4473958, 100, 400);\n        scene.background = new THREE.Color(4473958);\n        group = new THREE.Group();\n        scene.add(group);\n        var loader = new THREE.ImageBitmapLoader().setPath(path);\n        loader.setOptions({ imageOrientation: 'flipY' });\n        loader.load('textures/matcaps/matcap-porcelain-white.jpg', function (imageBitmap) {\n            var texture = new THREE.CanvasTexture(imageBitmap);\n            var geometry = new THREE.IcosahedronBufferGeometry(5, 3);\n            var materials = [\n                new THREE.MeshMatcapMaterial({\n                    color: 11150559,\n                    matcap: texture\n                }),\n                new THREE.MeshMatcapMaterial({\n                    color: 6315408,\n                    matcap: texture\n                }),\n                new THREE.MeshMatcapMaterial({\n                    color: 14699071,\n                    matcap: texture\n                }),\n                new THREE.MeshMatcapMaterial({\n                    color: 14877782,\n                    matcap: texture\n                })\n            ];\n            for (var i = 0; i < 100; i++) {\n                var material = materials[i % materials.length];\n                var mesh = new THREE.Mesh(geometry, material);\n                mesh.position.x = random() * 200 - 100;\n                mesh.position.y = random() * 200 - 100;\n                mesh.position.z = random() * 200 - 100;\n                mesh.scale.setScalar(random() + 1);\n                group.add(mesh);\n            }\n            renderer = new THREE.WebGLRenderer({\n                antialias: true,\n                canvas: canvas\n            });\n            renderer.setPixelRatio(pixelRatio);\n            renderer.setSize(width, height, false);\n            animate();\n        });\n    }\n    function animate() {\n        group.rotation.y = -Date.now() / 4000;\n        renderer.render(scene, camera);\n        if (self.requestAnimationFrame) {\n            self.requestAnimationFrame(animate);\n        } else {\n        }\n    }\n    var seed = 1;\n    function random() {\n        var x = Math.sin(seed++) * 10000;\n        return x - Math.floor(x);\n    }\n    return init;\n});"]}