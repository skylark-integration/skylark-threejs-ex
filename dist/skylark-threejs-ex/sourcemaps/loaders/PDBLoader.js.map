{"version":3,"sources":["loaders/PDBLoader.js"],"names":["define","THREE","threex","PDBLoader","manager","Loader","call","this","prototype","Object","assign","create","constructor","load","url","onLoad","onProgress","onError","scope","loader","FileLoader","setPath","path","text","parse","trim","replace","capitalize","charAt","toUpperCase","substr","toLowerCase","parseBond","start","length","s","e","eatom","parseInt","lines","i","h","satom","Math","min","max","undefined","bhash","bonds","push","x","y","z","index","CPK","he","li","be","b","c","n","o","f","ne","na","mg","al","si","p","cl","ar","k","ca","sc","ti","v","cr","mn","fe","co","ni","cu","zn","ga","ge","as","se","br","kr","rb","sr","zr","nb","mo","tc","ru","rh","pd","ag","cd","in","sn","sb","te","xe","cs","ba","la","ce","pr","nd","pm","sm","eu","gd","tb","dy","ho","er","tm","yb","lu","hf","ta","w","re","os","ir","pt","au","hg","tl","pb","bi","po","at","rn","fr","ra","ac","th","pa","u","np","pu","am","cm","bk","cf","es","fm","md","no","lr","rf","db","sg","bh","hs","mt","ds","rg","cn","uut","uuq","uup","uuh","uus","uuo","atoms","histogram","split","l","parseFloat","build","geometryAtoms","BufferGeometry","geometryBonds","json","verticesAtoms","colorsAtoms","verticesBonds","atom","r","g","bond","end","setAttribute","Float32BufferAttribute","buildGeometry","loaders"],"mappings":";;;;;;;AAAAA,QACI,kBACA,aACD,SACCC,EACAC,GAEA,aACA,IAAIC,EAAY,SAAUC,GACtBH,EAAMI,OAAOC,KAAKC,KAAMH,IAusB5B,OArsBAD,EAAUK,UAAYC,OAAOC,OAAOD,OAAOE,OAAOV,EAAMI,OAAOG,YAC3DI,YAAaT,EACbU,KAAM,SAAUC,EAAKC,EAAQC,EAAYC,GACrC,IAAIC,EAAQX,KACRY,EAAS,IAAIlB,EAAMmB,WAAWF,EAAMd,SACxCe,EAAOE,QAAQH,EAAMI,MACrBH,EAAON,KAAKC,EAAK,SAAUS,GACvBR,EAAOG,EAAMM,MAAMD,KACpBP,EAAYC,IAEnBO,MAAO,SAAUD,GACb,SAASE,EAAKF,GACV,OAAOA,EAAKG,QAAQ,SAAU,IAAIA,QAAQ,SAAU,IAExD,SAASC,EAAWJ,GAChB,OAAOA,EAAKK,OAAO,GAAGC,cAAgBN,EAAKO,OAAO,GAAGC,cAKzD,SAASC,EAAUC,EAAOC,GACtB,IAJUC,EAAGC,EAITC,EAAQC,SAASC,EAAMC,GAAGV,OAAOG,EAAOC,IAC5C,GAAIG,EAAO,CACP,IAAII,GANEN,EAMOO,EANJN,EAMWC,EALjB,IAAMM,KAAKC,IAAIT,EAAGC,GAAK,IAAMO,KAAKE,IAAIV,EAAGC,SAM3BU,IAAbC,EAAMN,KACNO,EAAMC,MACFP,EAAQ,EACRL,EAAQ,EACR,IAEJU,EAAMN,GAAKO,EAAMd,OAAS,IAqoBtC,IAtlBA,IAolBIgB,EAAGC,EAAGC,EAAGC,EAAOjB,EAplBhBkB,GACAb,GACI,IACA,IACA,KAEJc,IACI,IACA,IACA,KAEJC,IACI,IACA,IACA,KAEJC,IACI,IACA,IACA,GAEJC,GACI,IACA,IACA,KAEJC,GACI,IACA,IACA,KAEJC,GACI,GACA,GACA,KAEJC,GACI,IACA,GACA,IAEJC,GACI,IACA,IACA,IAEJC,IACI,IACA,IACA,KAEJC,IACI,IACA,GACA,KAEJC,IACI,IACA,IACA,GAEJC,IACI,IACA,IACA,KAEJC,IACI,IACA,IACA,KAEJC,GACI,IACA,IACA,GAEJjC,GACI,IACA,IACA,IAEJkC,IACI,GACA,IACA,IAEJC,IACI,IACA,IACA,KAEJC,GACI,IACA,GACA,KAEJC,IACI,GACA,IACA,GAEJC,IACI,IACA,IACA,KAEJC,IACI,IACA,IACA,KAEJC,GACI,IACA,IACA,KAEJC,IACI,IACA,IACA,KAEJC,IACI,IACA,IACA,KAEJC,IACI,IACA,IACA,IAEJC,IACI,IACA,IACA,KAEJC,IACI,GACA,IACA,IAEJC,IACI,IACA,IACA,IAEJC,IACI,IACA,IACA,KAEJC,IACI,IACA,IACA,KAEJC,IACI,IACA,IACA,KAEJC,IACI,IACA,IACA,KAEJC,IACI,IACA,IACA,GAEJC,IACI,IACA,GACA,IAEJC,IACI,GACA,IACA,KAEJC,IACI,IACA,GACA,KAEJC,IACI,EACA,IACA,GAEJvC,GACI,IACA,IACA,KAEJwC,IACI,IACA,IACA,KAEJC,IACI,IACA,IACA,KAEJC,IACI,GACA,IACA,KAEJC,IACI,GACA,IACA,KAEJC,IACI,GACA,IACA,KAEJC,IACI,GACA,IACA,KAEJC,IACI,EACA,IACA,KAEJC,IACI,IACA,IACA,KAEJC,IACI,IACA,IACA,KAEJC,IACI,IACA,IACA,KAEJC,IACI,IACA,IACA,KAEJC,IACI,IACA,GACA,KAEJC,IACI,IACA,IACA,GAEJ/D,GACI,IACA,EACA,KAEJgE,IACI,GACA,IACA,KAEJC,IACI,GACA,GACA,KAEJC,IACI,EACA,IACA,GAEJC,IACI,IACA,IACA,KAEJC,IACI,IACA,IACA,KAEJC,IACI,IACA,IACA,KAEJC,IACI,IACA,IACA,KAEJC,IACI,IACA,IACA,KAEJC,IACI,IACA,IACA,KAEJC,IACI,GACA,IACA,KAEJC,IACI,GACA,IACA,KAEJC,IACI,GACA,IACA,KAEJC,IACI,GACA,IACA,KAEJC,IACI,EACA,IACA,KAEJC,IACI,EACA,IACA,KAEJC,IACI,EACA,IACA,IAEJC,IACI,EACA,IACA,IAEJC,IACI,EACA,IACA,IAEJC,IACI,GACA,IACA,KAEJC,IACI,GACA,IACA,KAEJC,GACI,GACA,IACA,KAEJC,IACI,GACA,IACA,KAEJC,IACI,GACA,IACA,KAEJC,IACI,GACA,GACA,KAEJC,IACI,IACA,IACA,KAEJC,IACI,IACA,IACA,IAEJC,IACI,IACA,IACA,KAEJC,IACI,IACA,GACA,IAEJC,IACI,GACA,GACA,IAEJC,IACI,IACA,GACA,KAEJC,IACI,IACA,GACA,GAEJC,IACI,IACA,GACA,IAEJC,IACI,GACA,IACA,KAEJC,IACI,GACA,EACA,KAEJC,IACI,EACA,IACA,GAEJC,IACI,IACA,IACA,KAEJC,IACI,EACA,IACA,KAEJC,IACI,EACA,IACA,KAEJC,GACI,EACA,IACA,KAEJC,IACI,EACA,IACA,KAEJC,IACI,EACA,IACA,KAEJC,IACI,GACA,GACA,KAEJC,IACI,IACA,GACA,KAEJC,IACI,IACA,GACA,KAEJC,IACI,IACA,GACA,KAEJC,IACI,IACA,GACA,KAEJC,IACI,IACA,GACA,KAEJC,IACI,IACA,GACA,KAEJC,IACI,IACA,GACA,KAEJC,IACI,IACA,EACA,KAEJC,IACI,IACA,EACA,IAEJC,IACI,IACA,EACA,IAEJC,IACI,IACA,EACA,IAEJC,IACI,IACA,EACA,IAEJC,IACI,IACA,EACA,IAEJC,IACI,IACA,EACA,IAEJC,IACI,IACA,EACA,IAEJC,IACI,IACA,EACA,IAEJC,IACI,IACA,EACA,IAEJC,KACI,IACA,EACA,IAEJC,KACI,IACA,EACA,IAEJC,KACI,IACA,EACA,IAEJC,KACI,IACA,EACA,IAEJC,KACI,IACA,EACA,IAEJC,KACI,IACA,EACA,KAGJC,KACAzH,KACA0H,KACA3H,KAEAR,EAAQhB,EAAKoJ,MAAM,MACdnI,EAAI,EAAGoI,EAAIrI,EAAML,OAAQM,EAAIoI,EAAGpI,IACrC,GAA8B,SAA1BD,EAAMC,GAAGV,OAAO,EAAG,IAA2C,WAA1BS,EAAMC,GAAGV,OAAO,EAAG,GACvDoB,EAAI2H,WAAWtI,EAAMC,GAAGV,OAAO,GAAI,IACnCqB,EAAI0H,WAAWtI,EAAMC,GAAGV,OAAO,GAAI,IACnCsB,EAAIyH,WAAWtI,EAAMC,GAAGV,OAAO,GAAI,IACnCuB,EAAQf,SAASC,EAAMC,GAAGV,OAAO,EAAG,IAAM,EAEhC,MADVM,EAAIX,EAAKc,EAAMC,GAAGV,OAAO,GAAI,IAAIC,iBAE7BK,EAAIX,EAAKc,EAAMC,GAAGV,OAAO,GAAI,IAAIC,eAErC0I,EAAMpH,IACFH,EACAC,EACAC,EACAE,EAAIlB,GACJT,EAAWS,SAEMU,IAAjB4H,EAAUtI,GACVsI,EAAUtI,GAAK,EAEfsI,EAAUtI,IAAM,OAEjB,GAA8B,WAA1BG,EAAMC,GAAGV,OAAO,EAAG,GAAiB,CAC3C,IAAIY,EAAQJ,SAASC,EAAMC,GAAGV,OAAO,EAAG,IACxCE,EAAU,GAAI,GACdA,EAAU,GAAI,GACdA,EAAU,GAAI,GACdA,EAAU,GAAI,GAGtB,OA9pBA,WACI,IAUIQ,EAAGoI,EAVHE,GACAC,cAAe,IAAI9K,EAAM+K,eACzBC,cAAe,IAAIhL,EAAM+K,eACzBE,MACIT,MAAOA,EACPzH,MAAOA,IAGX+H,EAAgBD,EAAMC,cACtBE,EAAgBH,EAAMG,cAEtBE,KACAC,KACAC,KACJ,IAAK7I,EAAI,EAAGoI,EAAIH,EAAMvI,OAAQM,EAAIoI,EAAGpI,IAAK,CACtC,IAAI8I,EAAOb,EAAMjI,GACbU,EAAIoI,EAAK,GACTnI,EAAImI,EAAK,GACTlI,EAAIkI,EAAK,GACbH,EAAclI,KAAKC,EAAGC,EAAGC,GACzB,IAAImI,EAAID,EAAK,GAAG,GAAK,IACjBE,EAAIF,EAAK,GAAG,GAAK,IACjB5H,EAAI4H,EAAK,GAAG,GAAK,IACrBF,EAAYnI,KAAKsI,EAAGC,EAAG9H,GAE3B,IAAKlB,EAAI,EAAGoI,EAAI5H,EAAMd,OAAQM,EAAIoI,EAAGpI,IAAK,CACtC,IAAIiJ,EAAOzI,EAAMR,GACbP,EAAQwJ,EAAK,GACbC,EAAMD,EAAK,GACfJ,EAAcpI,KAAKkI,EAAsB,EAARlJ,EAAY,IAC7CoJ,EAAcpI,KAAKkI,EAAsB,EAARlJ,EAAY,IAC7CoJ,EAAcpI,KAAKkI,EAAsB,EAARlJ,EAAY,IAC7CoJ,EAAcpI,KAAKkI,EAAoB,EAANO,EAAU,IAC3CL,EAAcpI,KAAKkI,EAAoB,EAANO,EAAU,IAC3CL,EAAcpI,KAAKkI,EAAoB,EAANO,EAAU,IAK/C,OAHAX,EAAcY,aAAa,WAAY,IAAI1L,EAAM2L,uBAAuBT,EAAe,IACvFJ,EAAcY,aAAa,QAAS,IAAI1L,EAAM2L,uBAAuBR,EAAa,IAClFH,EAAcU,aAAa,WAAY,IAAI1L,EAAM2L,uBAAuBP,EAAe,IAChFP,EAsnBJe,MAIR3L,EAAO4L,QAAQ3L,UAAYA","file":"../../loaders/PDBLoader.js","sourcesContent":["define([\n    \"skylark-threejs\",\n    \"../threex\"\n], function (\n    THREE,\n    threex\n) {\n    'use strict';\n    var PDBLoader = function (manager) {\n        THREE.Loader.call(this, manager);\n    };\n    PDBLoader.prototype = Object.assign(Object.create(THREE.Loader.prototype), {\n        constructor: PDBLoader,\n        load: function (url, onLoad, onProgress, onError) {\n            var scope = this;\n            var loader = new THREE.FileLoader(scope.manager);\n            loader.setPath(scope.path);\n            loader.load(url, function (text) {\n                onLoad(scope.parse(text));\n            }, onProgress, onError);\n        },\n        parse: function (text) {\n            function trim(text) {\n                return text.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n            }\n            function capitalize(text) {\n                return text.charAt(0).toUpperCase() + text.substr(1).toLowerCase();\n            }\n            function hash(s, e) {\n                return 's' + Math.min(s, e) + 'e' + Math.max(s, e);\n            }\n            function parseBond(start, length) {\n                var eatom = parseInt(lines[i].substr(start, length));\n                if (eatom) {\n                    var h = hash(satom, eatom);\n                    if (bhash[h] === undefined) {\n                        bonds.push([\n                            satom - 1,\n                            eatom - 1,\n                            1\n                        ]);\n                        bhash[h] = bonds.length - 1;\n                    } else {\n                    }\n                }\n            }\n            function buildGeometry() {\n                var build = {\n                    geometryAtoms: new THREE.BufferGeometry(),\n                    geometryBonds: new THREE.BufferGeometry(),\n                    json: {\n                        atoms: atoms,\n                        bonds: bonds\n                    }\n                };\n                var geometryAtoms = build.geometryAtoms;\n                var geometryBonds = build.geometryBonds;\n                var i, l;\n                var verticesAtoms = [];\n                var colorsAtoms = [];\n                var verticesBonds = [];\n                for (i = 0, l = atoms.length; i < l; i++) {\n                    var atom = atoms[i];\n                    var x = atom[0];\n                    var y = atom[1];\n                    var z = atom[2];\n                    verticesAtoms.push(x, y, z);\n                    var r = atom[3][0] / 255;\n                    var g = atom[3][1] / 255;\n                    var b = atom[3][2] / 255;\n                    colorsAtoms.push(r, g, b);\n                }\n                for (i = 0, l = bonds.length; i < l; i++) {\n                    var bond = bonds[i];\n                    var start = bond[0];\n                    var end = bond[1];\n                    verticesBonds.push(verticesAtoms[start * 3 + 0]);\n                    verticesBonds.push(verticesAtoms[start * 3 + 1]);\n                    verticesBonds.push(verticesAtoms[start * 3 + 2]);\n                    verticesBonds.push(verticesAtoms[end * 3 + 0]);\n                    verticesBonds.push(verticesAtoms[end * 3 + 1]);\n                    verticesBonds.push(verticesAtoms[end * 3 + 2]);\n                }\n                geometryAtoms.setAttribute('position', new THREE.Float32BufferAttribute(verticesAtoms, 3));\n                geometryAtoms.setAttribute('color', new THREE.Float32BufferAttribute(colorsAtoms, 3));\n                geometryBonds.setAttribute('position', new THREE.Float32BufferAttribute(verticesBonds, 3));\n                return build;\n            }\n            var CPK = {\n                h: [\n                    255,\n                    255,\n                    255\n                ],\n                he: [\n                    217,\n                    255,\n                    255\n                ],\n                li: [\n                    204,\n                    128,\n                    255\n                ],\n                be: [\n                    194,\n                    255,\n                    0\n                ],\n                b: [\n                    255,\n                    181,\n                    181\n                ],\n                c: [\n                    144,\n                    144,\n                    144\n                ],\n                n: [\n                    48,\n                    80,\n                    248\n                ],\n                o: [\n                    255,\n                    13,\n                    13\n                ],\n                f: [\n                    144,\n                    224,\n                    80\n                ],\n                ne: [\n                    179,\n                    227,\n                    245\n                ],\n                na: [\n                    171,\n                    92,\n                    242\n                ],\n                mg: [\n                    138,\n                    255,\n                    0\n                ],\n                al: [\n                    191,\n                    166,\n                    166\n                ],\n                si: [\n                    240,\n                    200,\n                    160\n                ],\n                p: [\n                    255,\n                    128,\n                    0\n                ],\n                s: [\n                    255,\n                    255,\n                    48\n                ],\n                cl: [\n                    31,\n                    240,\n                    31\n                ],\n                ar: [\n                    128,\n                    209,\n                    227\n                ],\n                k: [\n                    143,\n                    64,\n                    212\n                ],\n                ca: [\n                    61,\n                    255,\n                    0\n                ],\n                sc: [\n                    230,\n                    230,\n                    230\n                ],\n                ti: [\n                    191,\n                    194,\n                    199\n                ],\n                v: [\n                    166,\n                    166,\n                    171\n                ],\n                cr: [\n                    138,\n                    153,\n                    199\n                ],\n                mn: [\n                    156,\n                    122,\n                    199\n                ],\n                fe: [\n                    224,\n                    102,\n                    51\n                ],\n                co: [\n                    240,\n                    144,\n                    160\n                ],\n                ni: [\n                    80,\n                    208,\n                    80\n                ],\n                cu: [\n                    200,\n                    128,\n                    51\n                ],\n                zn: [\n                    125,\n                    128,\n                    176\n                ],\n                ga: [\n                    194,\n                    143,\n                    143\n                ],\n                ge: [\n                    102,\n                    143,\n                    143\n                ],\n                as: [\n                    189,\n                    128,\n                    227\n                ],\n                se: [\n                    255,\n                    161,\n                    0\n                ],\n                br: [\n                    166,\n                    41,\n                    41\n                ],\n                kr: [\n                    92,\n                    184,\n                    209\n                ],\n                rb: [\n                    112,\n                    46,\n                    176\n                ],\n                sr: [\n                    0,\n                    255,\n                    0\n                ],\n                y: [\n                    148,\n                    255,\n                    255\n                ],\n                zr: [\n                    148,\n                    224,\n                    224\n                ],\n                nb: [\n                    115,\n                    194,\n                    201\n                ],\n                mo: [\n                    84,\n                    181,\n                    181\n                ],\n                tc: [\n                    59,\n                    158,\n                    158\n                ],\n                ru: [\n                    36,\n                    143,\n                    143\n                ],\n                rh: [\n                    10,\n                    125,\n                    140\n                ],\n                pd: [\n                    0,\n                    105,\n                    133\n                ],\n                ag: [\n                    192,\n                    192,\n                    192\n                ],\n                cd: [\n                    255,\n                    217,\n                    143\n                ],\n                in: [\n                    166,\n                    117,\n                    115\n                ],\n                sn: [\n                    102,\n                    128,\n                    128\n                ],\n                sb: [\n                    158,\n                    99,\n                    181\n                ],\n                te: [\n                    212,\n                    122,\n                    0\n                ],\n                i: [\n                    148,\n                    0,\n                    148\n                ],\n                xe: [\n                    66,\n                    158,\n                    176\n                ],\n                cs: [\n                    87,\n                    23,\n                    143\n                ],\n                ba: [\n                    0,\n                    201,\n                    0\n                ],\n                la: [\n                    112,\n                    212,\n                    255\n                ],\n                ce: [\n                    255,\n                    255,\n                    199\n                ],\n                pr: [\n                    217,\n                    255,\n                    199\n                ],\n                nd: [\n                    199,\n                    255,\n                    199\n                ],\n                pm: [\n                    163,\n                    255,\n                    199\n                ],\n                sm: [\n                    143,\n                    255,\n                    199\n                ],\n                eu: [\n                    97,\n                    255,\n                    199\n                ],\n                gd: [\n                    69,\n                    255,\n                    199\n                ],\n                tb: [\n                    48,\n                    255,\n                    199\n                ],\n                dy: [\n                    31,\n                    255,\n                    199\n                ],\n                ho: [\n                    0,\n                    255,\n                    156\n                ],\n                er: [\n                    0,\n                    230,\n                    117\n                ],\n                tm: [\n                    0,\n                    212,\n                    82\n                ],\n                yb: [\n                    0,\n                    191,\n                    56\n                ],\n                lu: [\n                    0,\n                    171,\n                    36\n                ],\n                hf: [\n                    77,\n                    194,\n                    255\n                ],\n                ta: [\n                    77,\n                    166,\n                    255\n                ],\n                w: [\n                    33,\n                    148,\n                    214\n                ],\n                re: [\n                    38,\n                    125,\n                    171\n                ],\n                os: [\n                    38,\n                    102,\n                    150\n                ],\n                ir: [\n                    23,\n                    84,\n                    135\n                ],\n                pt: [\n                    208,\n                    208,\n                    224\n                ],\n                au: [\n                    255,\n                    209,\n                    35\n                ],\n                hg: [\n                    184,\n                    184,\n                    208\n                ],\n                tl: [\n                    166,\n                    84,\n                    77\n                ],\n                pb: [\n                    87,\n                    89,\n                    97\n                ],\n                bi: [\n                    158,\n                    79,\n                    181\n                ],\n                po: [\n                    171,\n                    92,\n                    0\n                ],\n                at: [\n                    117,\n                    79,\n                    69\n                ],\n                rn: [\n                    66,\n                    130,\n                    150\n                ],\n                fr: [\n                    66,\n                    0,\n                    102\n                ],\n                ra: [\n                    0,\n                    125,\n                    0\n                ],\n                ac: [\n                    112,\n                    171,\n                    250\n                ],\n                th: [\n                    0,\n                    186,\n                    255\n                ],\n                pa: [\n                    0,\n                    161,\n                    255\n                ],\n                u: [\n                    0,\n                    143,\n                    255\n                ],\n                np: [\n                    0,\n                    128,\n                    255\n                ],\n                pu: [\n                    0,\n                    107,\n                    255\n                ],\n                am: [\n                    84,\n                    92,\n                    242\n                ],\n                cm: [\n                    120,\n                    92,\n                    227\n                ],\n                bk: [\n                    138,\n                    79,\n                    227\n                ],\n                cf: [\n                    161,\n                    54,\n                    212\n                ],\n                es: [\n                    179,\n                    31,\n                    212\n                ],\n                fm: [\n                    179,\n                    31,\n                    186\n                ],\n                md: [\n                    179,\n                    13,\n                    166\n                ],\n                no: [\n                    189,\n                    13,\n                    135\n                ],\n                lr: [\n                    199,\n                    0,\n                    102\n                ],\n                rf: [\n                    204,\n                    0,\n                    89\n                ],\n                db: [\n                    209,\n                    0,\n                    79\n                ],\n                sg: [\n                    217,\n                    0,\n                    69\n                ],\n                bh: [\n                    224,\n                    0,\n                    56\n                ],\n                hs: [\n                    230,\n                    0,\n                    46\n                ],\n                mt: [\n                    235,\n                    0,\n                    38\n                ],\n                ds: [\n                    235,\n                    0,\n                    38\n                ],\n                rg: [\n                    235,\n                    0,\n                    38\n                ],\n                cn: [\n                    235,\n                    0,\n                    38\n                ],\n                uut: [\n                    235,\n                    0,\n                    38\n                ],\n                uuq: [\n                    235,\n                    0,\n                    38\n                ],\n                uup: [\n                    235,\n                    0,\n                    38\n                ],\n                uuh: [\n                    235,\n                    0,\n                    38\n                ],\n                uus: [\n                    235,\n                    0,\n                    38\n                ],\n                uuo: [\n                    235,\n                    0,\n                    38\n                ]\n            };\n            var atoms = [];\n            var bonds = [];\n            var histogram = {};\n            var bhash = {};\n            var x, y, z, index, e;\n            var lines = text.split('\\n');\n            for (var i = 0, l = lines.length; i < l; i++) {\n                if (lines[i].substr(0, 4) === 'ATOM' || lines[i].substr(0, 6) === 'HETATM') {\n                    x = parseFloat(lines[i].substr(30, 7));\n                    y = parseFloat(lines[i].substr(38, 7));\n                    z = parseFloat(lines[i].substr(46, 7));\n                    index = parseInt(lines[i].substr(6, 5)) - 1;\n                    e = trim(lines[i].substr(76, 2)).toLowerCase();\n                    if (e === '') {\n                        e = trim(lines[i].substr(12, 2)).toLowerCase();\n                    }\n                    atoms[index] = [\n                        x,\n                        y,\n                        z,\n                        CPK[e],\n                        capitalize(e)\n                    ];\n                    if (histogram[e] === undefined) {\n                        histogram[e] = 1;\n                    } else {\n                        histogram[e] += 1;\n                    }\n                } else if (lines[i].substr(0, 6) === 'CONECT') {\n                    var satom = parseInt(lines[i].substr(6, 5));\n                    parseBond(11, 5);\n                    parseBond(16, 5);\n                    parseBond(21, 5);\n                    parseBond(26, 5);\n                }\n            }\n            return buildGeometry();\n        }\n    });\n\n    return threex.loaders.PDBLoader = PDBLoader;\n});"]}