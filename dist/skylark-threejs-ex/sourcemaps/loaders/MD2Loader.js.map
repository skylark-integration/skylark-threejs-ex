{"version":3,"sources":["loaders/MD2Loader.js"],"names":["define","THREE","normalData","MD2Loader","manager","Loader","call","this","prototype","Object","assign","create","constructor","load","url","onLoad","onProgress","onError","scope","loader","FileLoader","setPath","path","setResponseType","buffer","parse","data","DataView","header","headerNames","i","length","getInt32","ident","version","offset_end","byteLength","geometry","BufferGeometry","uvsTemp","offset","offset_st","l","num_st","u","getInt16","v","push","skinwidth","skinheight","offset_tris","vertexIndices","uvIndices","num_tris","getUint16","translation","Vector3","scale","string","frames","offset_frames","num_frames","set","getFloat32","j","character","getUint8","frame","name","String","fromCharCode","apply","vertices","normals","num_vertices","x","y","z","n","positions","uvs","verticesTemp","normalsTemp","stride","nx","ny","nz","setAttribute","Float32BufferAttribute","morphPositions","morphNormals","attributeName","jl","positionAttribute","normalAttribute","morphAttributes","position","normal","morphTargetsRelative","animations","AnimationClip","CreateClipsFromMorphTargetSequences","console","error"],"mappings":";;;;;;;AAAAA,QACI,mBACD,SAAUC,GACT,aACA,IAeYC,EAfRC,EAAY,SAAUC,GACtBH,EAAMI,OAAOC,KAAKC,KAAMH,IAi9B5B,OA/8BAD,EAAUK,UAAYC,OAAOC,OAAOD,OAAOE,OAAOV,EAAMI,OAAOG,YAC3DI,YAAaT,EACbU,KAAM,SAAUC,EAAKC,EAAQC,EAAYC,GACrC,IAAIC,EAAQX,KACRY,EAAS,IAAIlB,EAAMmB,WAAWF,EAAMd,SACxCe,EAAOE,QAAQH,EAAMI,MACrBH,EAAOI,gBAAgB,eACvBJ,EAAON,KAAKC,EAAK,SAAUU,GACvBT,EAAOG,EAAMO,MAAMD,KACpBR,EAAYC,IAEnBQ,OACQvB,KAEK,QACD,EACA,WAGC,QACD,QACA,WAGC,QACD,EACA,WAGC,QACD,GACA,WAGC,OACD,QACA,UAGA,EACA,EACA,IAGA,EACA,QACA,WAGC,QACD,QACA,UAGA,QACA,QACA,UAGA,EACA,QACA,UAGA,QACA,GACA,UAGA,QACA,EACA,UAGA,QACA,EACA,UAGA,QACA,QACA,UAGA,OACA,QACA,WAGC,QACD,QACA,WAGC,QACD,QACA,MAGC,QACD,QACA,WAGC,QACD,QACA,KAGC,QACD,QACA,WAGC,QACD,QACA,WAGC,QACD,QACA,WAGC,GACD,QACA,WAGC,QACD,QACA,WAGC,QACD,QACA,WAGC,QACD,SACC,WAGA,GACD,SACC,WAGA,QACD,QACA,IAGA,EACA,SACC,WAGA,QACD,SACC,UAGD,EACA,SACC,WAGA,QACD,SACC,SAGD,EACA,EACA,IAGA,EACA,QACA,WAGC,QACD,QACA,SAGA,QACA,QACA,UAGA,QACA,QACA,SAGA,GACA,QACA,UAGA,QACA,SACC,UAGD,QACA,SACC,SAGD,GACA,SACC,UAGD,QACA,QACA,IAGA,QACA,QACA,UAGA,QACA,SACC,UAGD,QACA,QACA,IAGA,QACA,QACA,UAGA,QACA,QACA,UAGA,QACA,QACA,UAGA,QACA,QACA,KAGA,QACA,QACA,UAGA,QACA,QACA,UAGA,QACA,QACA,IAGA,EACA,EACA,IAGA,QACA,OACA,UAGA,SACC,QACD,IAGA,SACC,QACD,IAGA,SACC,QACD,UAGA,SACC,OACD,UAGA,SACC,QACD,KAGA,SACC,QACD,UAGA,QACA,EACA,UAGA,QACA,SACC,UAGD,QACA,SACC,KAGD,QACA,QACC,UAGD,QACA,GACC,UAGD,QACA,SACC,UAGD,SACC,SACA,UAGD,QACA,GACC,UAGD,SACC,SACA,KAGD,SACC,SACA,UAGD,SACC,QACA,UAGD,QACA,SACC,UAGD,QACA,IACC,UAGD,QACA,SACC,UAGD,QACA,SACC,UAGD,QACA,SACC,UAGD,QACA,SACC,WAGA,QACD,SACC,WAGA,QACD,IACC,UAGD,EACA,SACC,WAGA,QACD,GACC,WAGA,QACD,SACC,WAGA,QACD,GACC,WAGA,OACD,SACC,UAGD,EACA,GACC,IAGD,QACA,GACC,UAGD,OACA,SACC,WAGA,SACA,SACA,WAGA,SACA,IACA,WAGA,QACA,SACA,UAGD,GACC,SACA,WAGA,SACA,SACA,UAGD,SACC,SACA,UAGD,GACC,SACA,UAGD,SACC,IACA,UAGD,SACC,SACA,UAGD,QACC,SACA,UAGD,SACC,SACA,UAGD,IACC,SACA,UAGD,SACC,SACA,UAGD,SACC,SACA,UAGD,SACC,SACA,UAGD,SACC,SACA,UAGD,GACC,SACA,UAGD,GACC,EACD,IAGA,SACC,SACA,SAGD,GACC,QACD,UAGA,GACC,QACD,UAGA,SACC,QACD,UAGA,SACC,QACD,SAGA,IACC,QACD,UAGA,SACC,QACD,UAGA,SACC,QACD,KAGC,SACA,SACA,WAGA,IACA,SACA,WAGA,SACA,SACA,UAGA,SACA,QACD,KAGC,SACA,SACA,WAGA,SACA,QACD,WAGC,SACA,QACD,KAGC,IACA,QACD,WAGC,SACA,QACD,WAGC,SACA,QACD,UAGC,SACA,QACD,WAGC,SACA,QACD,MAGC,SACA,QACD,WAGC,SACA,QACD,WAGC,SACA,QACD,WAGC,SACA,QACD,WAGC,SACA,GACD,WAGC,SACA,QACD,WAGC,SACA,QACD,WAGC,QACA,QACD,UAGA,SACC,QACD,UAGA,QACC,QACD,UAGA,SACC,GACD,UAGA,SACC,QACD,UAGA,GACC,QACD,UAGA,SACC,QACD,UAGA,SACC,QACD,UAGA,SACC,QACD,WAGC,QACD,QACA,KAGC,QACD,OACA,WAGC,EACD,EACA,KAGC,QACD,EACA,WAGC,SACA,QACD,KAGC,SACA,OACD,WAGC,QACD,SACC,WAGA,QACD,QACC,WAGA,QACD,SACC,MAGA,SACA,SACA,WAGA,SACA,QACA,WAGA,SACA,SACA,MAGA,QACD,SACC,WAGA,SACA,SACA,WAGA,QACD,GACC,WAGA,QACD,SACC,WAGA,QACD,SACC,WAGA,QACD,SACC,WAGA,SACA,SACA,WAGA,SACA,SACA,WAGA,SACA,SACA,UAGF,SAAUsB,GAsBb,IArBA,IAAIE,EAAO,IAAIC,SAASH,GACpBI,KACAC,GACA,QACA,UACA,YACA,aACA,YACA,YACA,eACA,SACA,WACA,aACA,aACA,eACA,YACA,cACA,gBACA,gBACA,cAEKC,EAAI,EAAGA,EAAID,EAAYE,OAAQD,IACpCF,EAAOC,EAAYC,IAAMJ,EAAKM,SAAa,EAAJF,GAAO,GAElD,GAAqB,YAAjBF,EAAOK,OAA0C,IAAnBL,EAAOM,QAAzC,CAIA,GAAIN,EAAOO,aAAeT,EAAKU,WAA/B,CAOA,IAHA,IAAIC,EAAW,IAAIpC,EAAMqC,eACrBC,KACAC,EAASZ,EAAOa,UACJC,GAAPZ,EAAI,EAAOF,EAAOe,QAAQb,EAAIY,EAAGZ,IAAK,CAC3C,IAAIc,EAAIlB,EAAKmB,SAASL,EAAS,GAAG,GAC9BM,EAAIpB,EAAKmB,SAASL,EAAS,GAAG,GAClCD,EAAQQ,KAAKH,EAAIhB,EAAOoB,UAAW,EAAIF,EAAIlB,EAAOqB,YAClDT,GAAU,EAEdA,EAASZ,EAAOsB,YAChB,IAAIC,KACAC,KACJ,IAAStB,EAAI,EAAGY,EAAId,EAAOyB,SAAUvB,EAAIY,EAAGZ,IACxCqB,EAAcJ,KAAKrB,EAAK4B,UAAUd,EAAS,GAAG,GAAOd,EAAK4B,UAAUd,EAAS,GAAG,GAAOd,EAAK4B,UAAUd,EAAS,GAAG,IAClHY,EAAUL,KAAKrB,EAAK4B,UAAUd,EAAS,GAAG,GAAOd,EAAK4B,UAAUd,EAAS,GAAG,GAAOd,EAAK4B,UAAUd,EAAS,IAAI,IAC/GA,GAAU,GAEd,IAAIe,EAAc,IAAItD,EAAMuD,QACxBC,EAAQ,IAAIxD,EAAMuD,QAClBE,KACAC,KAEJ,IADAnB,EAASZ,EAAOgC,cACP9B,EAAI,EAAGY,EAAId,EAAOiC,WAAY/B,EAAIY,EAAGZ,IAAK,CAC/C2B,EAAMK,IAAIpC,EAAKqC,WAAWvB,EAAS,GAAG,GAAOd,EAAKqC,WAAWvB,EAAS,GAAG,GAAOd,EAAKqC,WAAWvB,EAAS,GAAG,IAC5Ge,EAAYO,IAAIpC,EAAKqC,WAAWvB,EAAS,IAAI,GAAOd,EAAKqC,WAAWvB,EAAS,IAAI,GAAOd,EAAKqC,WAAWvB,EAAS,IAAI,IACrHA,GAAU,GACV,IAAK,IAAIwB,EAAI,EAAGA,EAAI,GAAIA,IAAK,CACzB,IAAIC,EAAYvC,EAAKwC,SAAS1B,EAASwB,GAAG,GAC1C,GAAkB,IAAdC,EACA,MACJP,EAAOM,GAAKC,EAEhB,IAAIE,GACAC,KAAMC,OAAOC,aAAaC,MAAM,KAAMb,GACtCc,YACAC,YAGJ,IADAjC,GAAU,GACDwB,EAAI,EAAGA,EAAIpC,EAAO8C,aAAcV,IAAK,CAC1C,IAAIW,EAAIjD,EAAKwC,SAAS1B,KAAU,GAC5BoC,EAAIlD,EAAKwC,SAAS1B,KAAU,GAC5BqC,EAAInD,EAAKwC,SAAS1B,KAAU,GAC5BsC,EAAI5E,EAAWwB,EAAKwC,SAAS1B,KAAU,IAC3CmC,EAAIA,EAAIlB,EAAMkB,EAAIpB,EAAYoB,EAC9BC,EAAIA,EAAInB,EAAMmB,EAAIrB,EAAYqB,EAC9BC,EAAIA,EAAIpB,EAAMoB,EAAItB,EAAYsB,EAC9BV,EAAMK,SAASzB,KAAK4B,EAAGE,EAAGD,GAC1BT,EAAMM,QAAQ1B,KAAK+B,EAAE,GAAIA,EAAE,GAAIA,EAAE,IAErCnB,EAAOZ,KAAKoB,GAEhB,IAAIY,KACAN,KACAO,KACAC,EAAetB,EAAO,GAAGa,SACzBU,EAAcvB,EAAO,GAAGc,QAC5B,IAAS3C,EAAI,EAAGY,EAAIS,EAAcpB,OAAQD,EAAIY,EAAGZ,IAAK,CAG9C6C,EAAIM,EADJE,EAAuB,EADThC,EAAcrB,IAG5B8C,EAAIK,EAAaE,EAAS,GAC1BN,EAAII,EAAaE,EAAS,GAC9BJ,EAAUhC,KAAK4B,EAAGC,EAAGC,GACrB,IAAIO,EAAKF,EAAYC,GACjBE,EAAKH,EAAYC,EAAS,GAC1BG,EAAKJ,EAAYC,EAAS,GAC9BV,EAAQ1B,KAAKqC,EAAIC,EAAIC,GAGjB1C,EAAIL,EADR4C,EAAmB,EADL/B,EAAUtB,IAGpBgB,EAAIP,EAAQ4C,EAAS,GACzBH,EAAIjC,KAAKH,EAAGE,GAEhBT,EAASkD,aAAa,WAAY,IAAItF,EAAMuF,uBAAuBT,EAAW,IAC9E1C,EAASkD,aAAa,SAAU,IAAItF,EAAMuF,uBAAuBf,EAAS,IAC1EpC,EAASkD,aAAa,KAAM,IAAItF,EAAMuF,uBAAuBR,EAAK,IAClE,IAAIS,KACAC,KACJ,IAAS5D,EAAI,EAAGY,EAAIiB,EAAO5B,OAAQD,EAAIY,EAAGZ,IAAK,CAC3C,IACI6D,GADAxB,EAAQR,EAAO7B,IACOsC,KAC1B,GAAID,EAAMK,SAASzC,OAAS,EAAG,CACvBgD,KACKf,EAAI,EAAb,IADA,IACgB4B,EAAKzC,EAAcpB,OAAQiC,EAAI4B,EAAI5B,IAAK,CACpD,IACImB,EAAuB,EADThC,EAAca,GAE5BW,EAAIR,EAAMK,SAASW,GACnBP,EAAIT,EAAMK,SAASW,EAAS,GAC5BN,EAAIV,EAAMK,SAASW,EAAS,GAChCJ,EAAUhC,KAAK4B,EAAGC,EAAGC,GAEzB,IAAIgB,EAAoB,IAAI5F,EAAMuF,uBAAuBT,EAAW,GACpEc,EAAkBzB,KAAOuB,EACzBF,EAAe1C,KAAK8C,GAExB,GAAI1B,EAAMM,QAAQ1C,OAAS,EAAG,CAE1B,IADI0C,KACKT,EAAI,EAAG4B,EAAKzC,EAAcpB,OAAQiC,EAAI4B,EAAI5B,IAE3CmB,EAAuB,EADThC,EAAca,GAE5BoB,EAAKjB,EAAMM,QAAQU,GACnBE,EAAKlB,EAAMM,QAAQU,EAAS,GAC5BG,EAAKnB,EAAMM,QAAQU,EAAS,GAChCV,EAAQ1B,KAAKqC,EAAIC,EAAIC,GAEzB,IAAIQ,EAAkB,IAAI7F,EAAMuF,uBAAuBf,EAAS,GAChEqB,EAAgB1B,KAAOuB,EACvBD,EAAa3C,KAAK+C,IAO1B,OAJAzD,EAAS0D,gBAAgBC,SAAWP,EACpCpD,EAAS0D,gBAAgBE,OAASP,EAClCrD,EAAS6D,sBAAuB,EAChC7D,EAAS8D,WAAalG,EAAMmG,cAAcC,oCAAoC1C,EAAQ,IAC/EtB,EArHHiE,QAAQC,MAAM,2BAJdD,QAAQC,MAAM,4BA6HvBpG","file":"../../loaders/MD2Loader.js","sourcesContent":["define([\n    \"skylark-threejs\"\n], function (THREE) {\n    'use strict';\n    var MD2Loader = function (manager) {\n        THREE.Loader.call(this, manager);\n    };\n    MD2Loader.prototype = Object.assign(Object.create(THREE.Loader.prototype), {\n        constructor: MD2Loader,\n        load: function (url, onLoad, onProgress, onError) {\n            var scope = this;\n            var loader = new THREE.FileLoader(scope.manager);\n            loader.setPath(scope.path);\n            loader.setResponseType('arraybuffer');\n            loader.load(url, function (buffer) {\n                onLoad(scope.parse(buffer));\n            }, onProgress, onError);\n        },\n        parse: function () {\n            var normalData = [\n                [\n                    -0.525731,\n                    0,\n                    0.850651\n                ],\n                [\n                    -0.442863,\n                    0.238856,\n                    0.864188\n                ],\n                [\n                    -0.295242,\n                    0,\n                    0.955423\n                ],\n                [\n                    -0.309017,\n                    0.5,\n                    0.809017\n                ],\n                [\n                    -0.16246,\n                    0.262866,\n                    0.951056\n                ],\n                [\n                    0,\n                    0,\n                    1\n                ],\n                [\n                    0,\n                    0.850651,\n                    0.525731\n                ],\n                [\n                    -0.147621,\n                    0.716567,\n                    0.681718\n                ],\n                [\n                    0.147621,\n                    0.716567,\n                    0.681718\n                ],\n                [\n                    0,\n                    0.525731,\n                    0.850651\n                ],\n                [\n                    0.309017,\n                    0.5,\n                    0.809017\n                ],\n                [\n                    0.525731,\n                    0,\n                    0.850651\n                ],\n                [\n                    0.295242,\n                    0,\n                    0.955423\n                ],\n                [\n                    0.442863,\n                    0.238856,\n                    0.864188\n                ],\n                [\n                    0.16246,\n                    0.262866,\n                    0.951056\n                ],\n                [\n                    -0.681718,\n                    0.147621,\n                    0.716567\n                ],\n                [\n                    -0.809017,\n                    0.309017,\n                    0.5\n                ],\n                [\n                    -0.587785,\n                    0.425325,\n                    0.688191\n                ],\n                [\n                    -0.850651,\n                    0.525731,\n                    0\n                ],\n                [\n                    -0.864188,\n                    0.442863,\n                    0.238856\n                ],\n                [\n                    -0.716567,\n                    0.681718,\n                    0.147621\n                ],\n                [\n                    -0.688191,\n                    0.587785,\n                    0.425325\n                ],\n                [\n                    -0.5,\n                    0.809017,\n                    0.309017\n                ],\n                [\n                    -0.238856,\n                    0.864188,\n                    0.442863\n                ],\n                [\n                    -0.425325,\n                    0.688191,\n                    0.587785\n                ],\n                [\n                    -0.716567,\n                    0.681718,\n                    -0.147621\n                ],\n                [\n                    -0.5,\n                    0.809017,\n                    -0.309017\n                ],\n                [\n                    -0.525731,\n                    0.850651,\n                    0\n                ],\n                [\n                    0,\n                    0.850651,\n                    -0.525731\n                ],\n                [\n                    -0.238856,\n                    0.864188,\n                    -0.442863\n                ],\n                [\n                    0,\n                    0.955423,\n                    -0.295242\n                ],\n                [\n                    -0.262866,\n                    0.951056,\n                    -0.16246\n                ],\n                [\n                    0,\n                    1,\n                    0\n                ],\n                [\n                    0,\n                    0.955423,\n                    0.295242\n                ],\n                [\n                    -0.262866,\n                    0.951056,\n                    0.16246\n                ],\n                [\n                    0.238856,\n                    0.864188,\n                    0.442863\n                ],\n                [\n                    0.262866,\n                    0.951056,\n                    0.16246\n                ],\n                [\n                    0.5,\n                    0.809017,\n                    0.309017\n                ],\n                [\n                    0.238856,\n                    0.864188,\n                    -0.442863\n                ],\n                [\n                    0.262866,\n                    0.951056,\n                    -0.16246\n                ],\n                [\n                    0.5,\n                    0.809017,\n                    -0.309017\n                ],\n                [\n                    0.850651,\n                    0.525731,\n                    0\n                ],\n                [\n                    0.716567,\n                    0.681718,\n                    0.147621\n                ],\n                [\n                    0.716567,\n                    0.681718,\n                    -0.147621\n                ],\n                [\n                    0.525731,\n                    0.850651,\n                    0\n                ],\n                [\n                    0.425325,\n                    0.688191,\n                    0.587785\n                ],\n                [\n                    0.864188,\n                    0.442863,\n                    0.238856\n                ],\n                [\n                    0.688191,\n                    0.587785,\n                    0.425325\n                ],\n                [\n                    0.809017,\n                    0.309017,\n                    0.5\n                ],\n                [\n                    0.681718,\n                    0.147621,\n                    0.716567\n                ],\n                [\n                    0.587785,\n                    0.425325,\n                    0.688191\n                ],\n                [\n                    0.955423,\n                    0.295242,\n                    0\n                ],\n                [\n                    1,\n                    0,\n                    0\n                ],\n                [\n                    0.951056,\n                    0.16246,\n                    0.262866\n                ],\n                [\n                    0.850651,\n                    -0.525731,\n                    0\n                ],\n                [\n                    0.955423,\n                    -0.295242,\n                    0\n                ],\n                [\n                    0.864188,\n                    -0.442863,\n                    0.238856\n                ],\n                [\n                    0.951056,\n                    -0.16246,\n                    0.262866\n                ],\n                [\n                    0.809017,\n                    -0.309017,\n                    0.5\n                ],\n                [\n                    0.681718,\n                    -0.147621,\n                    0.716567\n                ],\n                [\n                    0.850651,\n                    0,\n                    0.525731\n                ],\n                [\n                    0.864188,\n                    0.442863,\n                    -0.238856\n                ],\n                [\n                    0.809017,\n                    0.309017,\n                    -0.5\n                ],\n                [\n                    0.951056,\n                    0.16246,\n                    -0.262866\n                ],\n                [\n                    0.525731,\n                    0,\n                    -0.850651\n                ],\n                [\n                    0.681718,\n                    0.147621,\n                    -0.716567\n                ],\n                [\n                    0.681718,\n                    -0.147621,\n                    -0.716567\n                ],\n                [\n                    0.850651,\n                    0,\n                    -0.525731\n                ],\n                [\n                    0.809017,\n                    -0.309017,\n                    -0.5\n                ],\n                [\n                    0.864188,\n                    -0.442863,\n                    -0.238856\n                ],\n                [\n                    0.951056,\n                    -0.16246,\n                    -0.262866\n                ],\n                [\n                    0.147621,\n                    0.716567,\n                    -0.681718\n                ],\n                [\n                    0.309017,\n                    0.5,\n                    -0.809017\n                ],\n                [\n                    0.425325,\n                    0.688191,\n                    -0.587785\n                ],\n                [\n                    0.442863,\n                    0.238856,\n                    -0.864188\n                ],\n                [\n                    0.587785,\n                    0.425325,\n                    -0.688191\n                ],\n                [\n                    0.688191,\n                    0.587785,\n                    -0.425325\n                ],\n                [\n                    -0.147621,\n                    0.716567,\n                    -0.681718\n                ],\n                [\n                    -0.309017,\n                    0.5,\n                    -0.809017\n                ],\n                [\n                    0,\n                    0.525731,\n                    -0.850651\n                ],\n                [\n                    -0.525731,\n                    0,\n                    -0.850651\n                ],\n                [\n                    -0.442863,\n                    0.238856,\n                    -0.864188\n                ],\n                [\n                    -0.295242,\n                    0,\n                    -0.955423\n                ],\n                [\n                    -0.16246,\n                    0.262866,\n                    -0.951056\n                ],\n                [\n                    0,\n                    0,\n                    -1\n                ],\n                [\n                    0.295242,\n                    0,\n                    -0.955423\n                ],\n                [\n                    0.16246,\n                    0.262866,\n                    -0.951056\n                ],\n                [\n                    -0.442863,\n                    -0.238856,\n                    -0.864188\n                ],\n                [\n                    -0.309017,\n                    -0.5,\n                    -0.809017\n                ],\n                [\n                    -0.16246,\n                    -0.262866,\n                    -0.951056\n                ],\n                [\n                    0,\n                    -0.850651,\n                    -0.525731\n                ],\n                [\n                    -0.147621,\n                    -0.716567,\n                    -0.681718\n                ],\n                [\n                    0.147621,\n                    -0.716567,\n                    -0.681718\n                ],\n                [\n                    0,\n                    -0.525731,\n                    -0.850651\n                ],\n                [\n                    0.309017,\n                    -0.5,\n                    -0.809017\n                ],\n                [\n                    0.442863,\n                    -0.238856,\n                    -0.864188\n                ],\n                [\n                    0.16246,\n                    -0.262866,\n                    -0.951056\n                ],\n                [\n                    0.238856,\n                    -0.864188,\n                    -0.442863\n                ],\n                [\n                    0.5,\n                    -0.809017,\n                    -0.309017\n                ],\n                [\n                    0.425325,\n                    -0.688191,\n                    -0.587785\n                ],\n                [\n                    0.716567,\n                    -0.681718,\n                    -0.147621\n                ],\n                [\n                    0.688191,\n                    -0.587785,\n                    -0.425325\n                ],\n                [\n                    0.587785,\n                    -0.425325,\n                    -0.688191\n                ],\n                [\n                    0,\n                    -0.955423,\n                    -0.295242\n                ],\n                [\n                    0,\n                    -1,\n                    0\n                ],\n                [\n                    0.262866,\n                    -0.951056,\n                    -0.16246\n                ],\n                [\n                    0,\n                    -0.850651,\n                    0.525731\n                ],\n                [\n                    0,\n                    -0.955423,\n                    0.295242\n                ],\n                [\n                    0.238856,\n                    -0.864188,\n                    0.442863\n                ],\n                [\n                    0.262866,\n                    -0.951056,\n                    0.16246\n                ],\n                [\n                    0.5,\n                    -0.809017,\n                    0.309017\n                ],\n                [\n                    0.716567,\n                    -0.681718,\n                    0.147621\n                ],\n                [\n                    0.525731,\n                    -0.850651,\n                    0\n                ],\n                [\n                    -0.238856,\n                    -0.864188,\n                    -0.442863\n                ],\n                [\n                    -0.5,\n                    -0.809017,\n                    -0.309017\n                ],\n                [\n                    -0.262866,\n                    -0.951056,\n                    -0.16246\n                ],\n                [\n                    -0.850651,\n                    -0.525731,\n                    0\n                ],\n                [\n                    -0.716567,\n                    -0.681718,\n                    -0.147621\n                ],\n                [\n                    -0.716567,\n                    -0.681718,\n                    0.147621\n                ],\n                [\n                    -0.525731,\n                    -0.850651,\n                    0\n                ],\n                [\n                    -0.5,\n                    -0.809017,\n                    0.309017\n                ],\n                [\n                    -0.238856,\n                    -0.864188,\n                    0.442863\n                ],\n                [\n                    -0.262866,\n                    -0.951056,\n                    0.16246\n                ],\n                [\n                    -0.864188,\n                    -0.442863,\n                    0.238856\n                ],\n                [\n                    -0.809017,\n                    -0.309017,\n                    0.5\n                ],\n                [\n                    -0.688191,\n                    -0.587785,\n                    0.425325\n                ],\n                [\n                    -0.681718,\n                    -0.147621,\n                    0.716567\n                ],\n                [\n                    -0.442863,\n                    -0.238856,\n                    0.864188\n                ],\n                [\n                    -0.587785,\n                    -0.425325,\n                    0.688191\n                ],\n                [\n                    -0.309017,\n                    -0.5,\n                    0.809017\n                ],\n                [\n                    -0.147621,\n                    -0.716567,\n                    0.681718\n                ],\n                [\n                    -0.425325,\n                    -0.688191,\n                    0.587785\n                ],\n                [\n                    -0.16246,\n                    -0.262866,\n                    0.951056\n                ],\n                [\n                    0.442863,\n                    -0.238856,\n                    0.864188\n                ],\n                [\n                    0.16246,\n                    -0.262866,\n                    0.951056\n                ],\n                [\n                    0.309017,\n                    -0.5,\n                    0.809017\n                ],\n                [\n                    0.147621,\n                    -0.716567,\n                    0.681718\n                ],\n                [\n                    0,\n                    -0.525731,\n                    0.850651\n                ],\n                [\n                    0.425325,\n                    -0.688191,\n                    0.587785\n                ],\n                [\n                    0.587785,\n                    -0.425325,\n                    0.688191\n                ],\n                [\n                    0.688191,\n                    -0.587785,\n                    0.425325\n                ],\n                [\n                    -0.955423,\n                    0.295242,\n                    0\n                ],\n                [\n                    -0.951056,\n                    0.16246,\n                    0.262866\n                ],\n                [\n                    -1,\n                    0,\n                    0\n                ],\n                [\n                    -0.850651,\n                    0,\n                    0.525731\n                ],\n                [\n                    -0.955423,\n                    -0.295242,\n                    0\n                ],\n                [\n                    -0.951056,\n                    -0.16246,\n                    0.262866\n                ],\n                [\n                    -0.864188,\n                    0.442863,\n                    -0.238856\n                ],\n                [\n                    -0.951056,\n                    0.16246,\n                    -0.262866\n                ],\n                [\n                    -0.809017,\n                    0.309017,\n                    -0.5\n                ],\n                [\n                    -0.864188,\n                    -0.442863,\n                    -0.238856\n                ],\n                [\n                    -0.951056,\n                    -0.16246,\n                    -0.262866\n                ],\n                [\n                    -0.809017,\n                    -0.309017,\n                    -0.5\n                ],\n                [\n                    -0.681718,\n                    0.147621,\n                    -0.716567\n                ],\n                [\n                    -0.681718,\n                    -0.147621,\n                    -0.716567\n                ],\n                [\n                    -0.850651,\n                    0,\n                    -0.525731\n                ],\n                [\n                    -0.688191,\n                    0.587785,\n                    -0.425325\n                ],\n                [\n                    -0.587785,\n                    0.425325,\n                    -0.688191\n                ],\n                [\n                    -0.425325,\n                    0.688191,\n                    -0.587785\n                ],\n                [\n                    -0.425325,\n                    -0.688191,\n                    -0.587785\n                ],\n                [\n                    -0.587785,\n                    -0.425325,\n                    -0.688191\n                ],\n                [\n                    -0.688191,\n                    -0.587785,\n                    -0.425325\n                ]\n            ];\n            return function (buffer) {\n                var data = new DataView(buffer);\n                var header = {};\n                var headerNames = [\n                    'ident',\n                    'version',\n                    'skinwidth',\n                    'skinheight',\n                    'framesize',\n                    'num_skins',\n                    'num_vertices',\n                    'num_st',\n                    'num_tris',\n                    'num_glcmds',\n                    'num_frames',\n                    'offset_skins',\n                    'offset_st',\n                    'offset_tris',\n                    'offset_frames',\n                    'offset_glcmds',\n                    'offset_end'\n                ];\n                for (var i = 0; i < headerNames.length; i++) {\n                    header[headerNames[i]] = data.getInt32(i * 4, true);\n                }\n                if (header.ident !== 844121161 || header.version !== 8) {\n                    console.error('Not a valid MD2 file');\n                    return;\n                }\n                if (header.offset_end !== data.byteLength) {\n                    console.error('Corrupted MD2 file');\n                    return;\n                }\n                var geometry = new THREE.BufferGeometry();\n                var uvsTemp = [];\n                var offset = header.offset_st;\n                for (var i = 0, l = header.num_st; i < l; i++) {\n                    var u = data.getInt16(offset + 0, true);\n                    var v = data.getInt16(offset + 2, true);\n                    uvsTemp.push(u / header.skinwidth, 1 - v / header.skinheight);\n                    offset += 4;\n                }\n                offset = header.offset_tris;\n                var vertexIndices = [];\n                var uvIndices = [];\n                for (var i = 0, l = header.num_tris; i < l; i++) {\n                    vertexIndices.push(data.getUint16(offset + 0, true), data.getUint16(offset + 2, true), data.getUint16(offset + 4, true));\n                    uvIndices.push(data.getUint16(offset + 6, true), data.getUint16(offset + 8, true), data.getUint16(offset + 10, true));\n                    offset += 12;\n                }\n                var translation = new THREE.Vector3();\n                var scale = new THREE.Vector3();\n                var string = [];\n                var frames = [];\n                offset = header.offset_frames;\n                for (var i = 0, l = header.num_frames; i < l; i++) {\n                    scale.set(data.getFloat32(offset + 0, true), data.getFloat32(offset + 4, true), data.getFloat32(offset + 8, true));\n                    translation.set(data.getFloat32(offset + 12, true), data.getFloat32(offset + 16, true), data.getFloat32(offset + 20, true));\n                    offset += 24;\n                    for (var j = 0; j < 16; j++) {\n                        var character = data.getUint8(offset + j, true);\n                        if (character === 0)\n                            break;\n                        string[j] = character;\n                    }\n                    var frame = {\n                        name: String.fromCharCode.apply(null, string),\n                        vertices: [],\n                        normals: []\n                    };\n                    offset += 16;\n                    for (var j = 0; j < header.num_vertices; j++) {\n                        var x = data.getUint8(offset++, true);\n                        var y = data.getUint8(offset++, true);\n                        var z = data.getUint8(offset++, true);\n                        var n = normalData[data.getUint8(offset++, true)];\n                        x = x * scale.x + translation.x;\n                        y = y * scale.y + translation.y;\n                        z = z * scale.z + translation.z;\n                        frame.vertices.push(x, z, y);\n                        frame.normals.push(n[0], n[2], n[1]);\n                    }\n                    frames.push(frame);\n                }\n                var positions = [];\n                var normals = [];\n                var uvs = [];\n                var verticesTemp = frames[0].vertices;\n                var normalsTemp = frames[0].normals;\n                for (var i = 0, l = vertexIndices.length; i < l; i++) {\n                    var vertexIndex = vertexIndices[i];\n                    var stride = vertexIndex * 3;\n                    var x = verticesTemp[stride];\n                    var y = verticesTemp[stride + 1];\n                    var z = verticesTemp[stride + 2];\n                    positions.push(x, y, z);\n                    var nx = normalsTemp[stride];\n                    var ny = normalsTemp[stride + 1];\n                    var nz = normalsTemp[stride + 2];\n                    normals.push(nx, ny, nz);\n                    var uvIndex = uvIndices[i];\n                    stride = uvIndex * 2;\n                    var u = uvsTemp[stride];\n                    var v = uvsTemp[stride + 1];\n                    uvs.push(u, v);\n                }\n                geometry.setAttribute('position', new THREE.Float32BufferAttribute(positions, 3));\n                geometry.setAttribute('normal', new THREE.Float32BufferAttribute(normals, 3));\n                geometry.setAttribute('uv', new THREE.Float32BufferAttribute(uvs, 2));\n                var morphPositions = [];\n                var morphNormals = [];\n                for (var i = 0, l = frames.length; i < l; i++) {\n                    var frame = frames[i];\n                    var attributeName = frame.name;\n                    if (frame.vertices.length > 0) {\n                        var positions = [];\n                        for (var j = 0, jl = vertexIndices.length; j < jl; j++) {\n                            var vertexIndex = vertexIndices[j];\n                            var stride = vertexIndex * 3;\n                            var x = frame.vertices[stride];\n                            var y = frame.vertices[stride + 1];\n                            var z = frame.vertices[stride + 2];\n                            positions.push(x, y, z);\n                        }\n                        var positionAttribute = new THREE.Float32BufferAttribute(positions, 3);\n                        positionAttribute.name = attributeName;\n                        morphPositions.push(positionAttribute);\n                    }\n                    if (frame.normals.length > 0) {\n                        var normals = [];\n                        for (var j = 0, jl = vertexIndices.length; j < jl; j++) {\n                            var vertexIndex = vertexIndices[j];\n                            var stride = vertexIndex * 3;\n                            var nx = frame.normals[stride];\n                            var ny = frame.normals[stride + 1];\n                            var nz = frame.normals[stride + 2];\n                            normals.push(nx, ny, nz);\n                        }\n                        var normalAttribute = new THREE.Float32BufferAttribute(normals, 3);\n                        normalAttribute.name = attributeName;\n                        morphNormals.push(normalAttribute);\n                    }\n                }\n                geometry.morphAttributes.position = morphPositions;\n                geometry.morphAttributes.normal = morphNormals;\n                geometry.morphTargetsRelative = false;\n                geometry.animations = THREE.AnimationClip.CreateClipsFromMorphTargetSequences(frames, 10);\n                return geometry;\n            };\n        }()\n    });\n    return MD2Loader;\n});"]}