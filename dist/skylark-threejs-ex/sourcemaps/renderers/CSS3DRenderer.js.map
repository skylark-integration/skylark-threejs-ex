{"version":3,"sources":["renderers/CSS3DRenderer.js"],"names":["define","THREE","CSS3DObject","element","Object3D","call","this","style","position","pointerEvents","addEventListener","traverse","object","Element","parentNode","removeChild","prototype","Object","create","constructor","CSS3DSprite","CSS3DRenderer","_width","_height","_widthHalf","_heightHalf","_this","matrix","Matrix4","cache","camera","fov","objects","WeakMap","domElement","document","createElement","overflow","cameraElement","WebkitTransformStyle","transformStyle","appendChild","isIE","test","navigator","userAgent","epsilon","value","Math","abs","getCameraCSSMatrix","elements","getObjectCSSMatrix","cameraCSSMatrix","matrix3d","getSize","width","height","setSize","a","b","getDistanceToSquared","Vector3","object1","object2","setFromMatrixPosition","matrixWorld","distanceToSquared","zOrder","scene","sorted","result","push","filterAndFlatten","sort","get","distanceToCameraSquared","zMax","length","i","l","zIndex","render","projectionMatrix","isPerspectiveCamera","WebkitPerspective","perspective","autoUpdate","updateMatrixWorld","parent","isOrthographicCamera","tx","right","left","ty","top","bottom","matrixWorldInverse","WebkitTransform","transform","renderObject","onBeforeRender","copy","transpose","copyPosition","scale","cachedObject","undefined","objectData","set","onAfterRender","children"],"mappings":"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","file":"../../renderers/CSS3DRenderer.js","sourcesContent":["define([\n\t\"skylark-threejs\"\n],function(THREE){\n\t/**\n\t * Based on http://www.emagix.net/academic/mscs-project/item/camera-sync-with-css3-and-webgl-threejs\n\t * @author mrdoob / http://mrdoob.com/\n\t * @author yomotsu / https://yomotsu.net/\n\t */\n\n\tTHREE.CSS3DObject = function ( element ) {\n\n\t\tTHREE.Object3D.call( this );\n\n\t\tthis.element = element;\n\t\tthis.element.style.position = 'absolute';\n\t\tthis.element.style.pointerEvents = 'auto';\n\n\t\tthis.addEventListener( 'removed', function () {\n\n\t\t\tthis.traverse( function ( object ) {\n\n\t\t\t\tif ( object.element instanceof Element && object.element.parentNode !== null ) {\n\n\t\t\t\t\tobject.element.parentNode.removeChild( object.element );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t} );\n\n\t};\n\n\tTHREE.CSS3DObject.prototype = Object.create( THREE.Object3D.prototype );\n\tTHREE.CSS3DObject.prototype.constructor = THREE.CSS3DObject;\n\n\tTHREE.CSS3DSprite = function ( element ) {\n\n\t\tTHREE.CSS3DObject.call( this, element );\n\n\t};\n\n\tTHREE.CSS3DSprite.prototype = Object.create( THREE.CSS3DObject.prototype );\n\tTHREE.CSS3DSprite.prototype.constructor = THREE.CSS3DSprite;\n\n\t//\n\n\tTHREE.CSS3DRenderer = function () {\n\n\t\tvar _this = this;\n\n\t\tvar _width, _height;\n\t\tvar _widthHalf, _heightHalf;\n\n\t\tvar matrix = new THREE.Matrix4();\n\n\t\tvar cache = {\n\t\t\tcamera: { fov: 0, style: '' },\n\t\t\tobjects: new WeakMap()\n\t\t};\n\n\t\tvar domElement = document.createElement( 'div' );\n\t\tdomElement.style.overflow = 'hidden';\n\n\t\tthis.domElement = domElement;\n\n\t\tvar cameraElement = document.createElement( 'div' );\n\n\t\tcameraElement.style.WebkitTransformStyle = 'preserve-3d';\n\t\tcameraElement.style.transformStyle = 'preserve-3d';\n\t\tcameraElement.style.pointerEvents = 'none';\n\n\t\tdomElement.appendChild( cameraElement );\n\n\t\tvar isIE = /Trident/i.test( navigator.userAgent );\n\n\t\tthis.getSize = function () {\n\n\t\t\treturn {\n\t\t\t\twidth: _width,\n\t\t\t\theight: _height\n\t\t\t};\n\n\t\t};\n\n\t\tthis.setSize = function ( width, height ) {\n\n\t\t\t_width = width;\n\t\t\t_height = height;\n\t\t\t_widthHalf = _width / 2;\n\t\t\t_heightHalf = _height / 2;\n\n\t\t\tdomElement.style.width = width + 'px';\n\t\t\tdomElement.style.height = height + 'px';\n\n\t\t\tcameraElement.style.width = width + 'px';\n\t\t\tcameraElement.style.height = height + 'px';\n\n\t\t};\n\n\t\tfunction epsilon( value ) {\n\n\t\t\treturn Math.abs( value ) < 1e-10 ? 0 : value;\n\n\t\t}\n\n\t\tfunction getCameraCSSMatrix( matrix ) {\n\n\t\t\tvar elements = matrix.elements;\n\n\t\t\treturn 'matrix3d(' +\n\t\t\t\tepsilon( elements[ 0 ] ) + ',' +\n\t\t\t\tepsilon( - elements[ 1 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 2 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 3 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 4 ] ) + ',' +\n\t\t\t\tepsilon( - elements[ 5 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 6 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 7 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 8 ] ) + ',' +\n\t\t\t\tepsilon( - elements[ 9 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 10 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 11 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 12 ] ) + ',' +\n\t\t\t\tepsilon( - elements[ 13 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 14 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 15 ] ) +\n\t\t\t')';\n\n\t\t}\n\n\t\tfunction getObjectCSSMatrix( matrix, cameraCSSMatrix ) {\n\n\t\t\tvar elements = matrix.elements;\n\t\t\tvar matrix3d = 'matrix3d(' +\n\t\t\t\tepsilon( elements[ 0 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 1 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 2 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 3 ] ) + ',' +\n\t\t\t\tepsilon( - elements[ 4 ] ) + ',' +\n\t\t\t\tepsilon( - elements[ 5 ] ) + ',' +\n\t\t\t\tepsilon( - elements[ 6 ] ) + ',' +\n\t\t\t\tepsilon( - elements[ 7 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 8 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 9 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 10 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 11 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 12 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 13 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 14 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 15 ] ) +\n\t\t\t')';\n\n\t\t\tif ( isIE ) {\n\n\t\t\t\treturn 'translate(-50%,-50%)' +\n\t\t\t\t\t'translate(' + _widthHalf + 'px,' + _heightHalf + 'px)' +\n\t\t\t\t\tcameraCSSMatrix +\n\t\t\t\t\tmatrix3d;\n\n\t\t\t}\n\n\t\t\treturn 'translate(-50%,-50%)' + matrix3d;\n\n\t\t}\n\n\t\tfunction renderObject( object, scene, camera, cameraCSSMatrix ) {\n\n\t\t\tif ( object instanceof THREE.CSS3DObject ) {\n\n\t\t\t\tobject.onBeforeRender( _this, scene, camera );\n\n\t\t\t\tvar style;\n\n\t\t\t\tif ( object instanceof THREE.CSS3DSprite ) {\n\n\t\t\t\t\t// http://swiftcoder.wordpress.com/2008/11/25/constructing-a-billboard-matrix/\n\n\t\t\t\t\tmatrix.copy( camera.matrixWorldInverse );\n\t\t\t\t\tmatrix.transpose();\n\t\t\t\t\tmatrix.copyPosition( object.matrixWorld );\n\t\t\t\t\tmatrix.scale( object.scale );\n\n\t\t\t\t\tmatrix.elements[ 3 ] = 0;\n\t\t\t\t\tmatrix.elements[ 7 ] = 0;\n\t\t\t\t\tmatrix.elements[ 11 ] = 0;\n\t\t\t\t\tmatrix.elements[ 15 ] = 1;\n\n\t\t\t\t\tstyle = getObjectCSSMatrix( matrix, cameraCSSMatrix );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tstyle = getObjectCSSMatrix( object.matrixWorld, cameraCSSMatrix );\n\n\t\t\t\t}\n\n\t\t\t\tvar element = object.element;\n\t\t\t\tvar cachedObject = cache.objects.get( object );\n\n\t\t\t\tif ( cachedObject === undefined || cachedObject.style !== style ) {\n\n\t\t\t\t\telement.style.WebkitTransform = style;\n\t\t\t\t\telement.style.transform = style;\n\n\t\t\t\t\tvar objectData = { style: style };\n\n\t\t\t\t\tif ( isIE ) {\n\n\t\t\t\t\t\tobjectData.distanceToCameraSquared = getDistanceToSquared( camera, object );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcache.objects.set( object, objectData );\n\n\t\t\t\t}\n\n\t\t\t\tif ( element.parentNode !== cameraElement ) {\n\n\t\t\t\t\tcameraElement.appendChild( element );\n\n\t\t\t\t}\n\n\t\t\t\tobject.onAfterRender( _this, scene, camera );\n\n\t\t\t}\n\n\t\t\tfor ( var i = 0, l = object.children.length; i < l; i ++ ) {\n\n\t\t\t\trenderObject( object.children[ i ], scene, camera, cameraCSSMatrix );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar getDistanceToSquared = function () {\n\n\t\t\tvar a = new THREE.Vector3();\n\t\t\tvar b = new THREE.Vector3();\n\n\t\t\treturn function ( object1, object2 ) {\n\n\t\t\t\ta.setFromMatrixPosition( object1.matrixWorld );\n\t\t\t\tb.setFromMatrixPosition( object2.matrixWorld );\n\n\t\t\t\treturn a.distanceToSquared( b );\n\n\t\t\t};\n\n\t\t}();\n\n\t\tfunction filterAndFlatten( scene ) {\n\n\t\t\tvar result = [];\n\n\t\t\tscene.traverse( function ( object ) {\n\n\t\t\t\tif ( object instanceof THREE.CSS3DObject ) result.push( object );\n\n\t\t\t} );\n\n\t\t\treturn result;\n\n\t\t}\n\n\t\tfunction zOrder( scene ) {\n\n\t\t\tvar sorted = filterAndFlatten( scene ).sort( function ( a, b ) {\n\n\t\t\t\tvar distanceA = cache.objects.get( a ).distanceToCameraSquared;\n\t\t\t\tvar distanceB = cache.objects.get( b ).distanceToCameraSquared;\n\n\t\t\t\treturn distanceA - distanceB;\n\n\t\t\t} );\n\n\t\t\tvar zMax = sorted.length;\n\n\t\t\tfor ( var i = 0, l = sorted.length; i < l; i ++ ) {\n\n\t\t\t\tsorted[ i ].element.style.zIndex = zMax - i;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.render = function ( scene, camera ) {\n\n\t\t\tvar fov = camera.projectionMatrix.elements[ 5 ] * _heightHalf;\n\n\t\t\tif ( cache.camera.fov !== fov ) {\n\n\t\t\t\tif ( camera.isPerspectiveCamera ) {\n\n\t\t\t\t\tdomElement.style.WebkitPerspective = fov + 'px';\n\t\t\t\t\tdomElement.style.perspective = fov + 'px';\n\n\t\t\t\t} else {\n\n\t\t\t\t\tdomElement.style.WebkitPerspective = '';\n\t\t\t\t\tdomElement.style.perspective = '';\n\n\t\t\t\t}\n\n\t\t\t\tcache.camera.fov = fov;\n\n\t\t\t}\n\n\t\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\n\t\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\n\n\t\t\tif ( camera.isOrthographicCamera ) {\n\n\t\t\t\tvar tx = - ( camera.right + camera.left ) / 2;\n\t\t\t\tvar ty = ( camera.top + camera.bottom ) / 2;\n\n\t\t\t}\n\n\t\t\tvar cameraCSSMatrix = camera.isOrthographicCamera ?\n\t\t\t\t'scale(' + fov + ')' + 'translate(' + epsilon( tx ) + 'px,' + epsilon( ty ) + 'px)' + getCameraCSSMatrix( camera.matrixWorldInverse ) :\n\t\t\t\t'translateZ(' + fov + 'px)' + getCameraCSSMatrix( camera.matrixWorldInverse );\n\n\t\t\tvar style = cameraCSSMatrix +\n\t\t\t\t'translate(' + _widthHalf + 'px,' + _heightHalf + 'px)';\n\n\t\t\tif ( cache.camera.style !== style && ! isIE ) {\n\n\t\t\t\tcameraElement.style.WebkitTransform = style;\n\t\t\t\tcameraElement.style.transform = style;\n\n\t\t\t\tcache.camera.style = style;\n\n\t\t\t}\n\n\t\t\trenderObject( scene, scene, camera, cameraCSSMatrix );\n\n\t\t\tif ( isIE ) {\n\n\t\t\t\t// IE10 and 11 does not support 'preserve-3d'.\n\t\t\t\t// Thus, z-order in 3D will not work.\n\t\t\t\t// We have to calc z-order manually and set CSS z-index for IE.\n\t\t\t\t// FYI: z-index can't handle object intersection\n\t\t\t\tzOrder( scene );\n\n\t\t\t}\n\n\t\t};\n\n\t};\n\t\n\treturn THREE.CSS3DRenderer;\n});\n"]}