{"version":3,"sources":["shaders/FilmShader.js"],"names":["define","threex","FilmShader","uniforms","tDiffuse","value","time","nIntensity","sIntensity","sCount","grayscale","vertexShader","join","fragmentShader","shaders"],"mappings":";;;;;;;AAAAA,QACI,aACF,SAAUC,GACR,aACA,IAAIC,GACAC,UACIC,UAAcC,MAAO,MACrBC,MAAUD,MAAO,GACjBE,YAAgBF,MAAO,IACvBG,YAAgBH,MAAO,KACvBI,QAAYJ,MAAO,MACnBK,WAAeL,MAAO,IAE1BM,cACI,oBACA,gBACA,cACA,8EACA,KACFC,KAAK,MACPC,gBACI,oBACA,sBACA,0BACA,4BACA,4BACA,wBACA,8BACA,oBACA,gBACA,sDACA,mCACA,0FACA,oEACA,2EACA,oGACA,sBACA,+EACA,MACA,uDACA,KACFD,KAAK,OAEX,OAAQX,EAAOa,QAAQZ,WAAaA","file":"../../shaders/FilmShader.js","sourcesContent":["define([\r\n    \"../threex\"\r\n],function (threex) {\r\n    'use strict';\r\n    var FilmShader = {\r\n        uniforms: {\r\n            'tDiffuse': { value: null },\r\n            'time': { value: 0 },\r\n            'nIntensity': { value: 0.5 },\r\n            'sIntensity': { value: 0.05 },\r\n            'sCount': { value: 4096 },\r\n            'grayscale': { value: 1 }\r\n        },\r\n        vertexShader: [\r\n            'varying vec2 vUv;',\r\n            'void main() {',\r\n            '\\tvUv = uv;',\r\n            '\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );',\r\n            '}'\r\n        ].join('\\n'),\r\n        fragmentShader: [\r\n            '#include <common>',\r\n            'uniform float time;',\r\n            'uniform bool grayscale;',\r\n            'uniform float nIntensity;',\r\n            'uniform float sIntensity;',\r\n            'uniform float sCount;',\r\n            'uniform sampler2D tDiffuse;',\r\n            'varying vec2 vUv;',\r\n            'void main() {',\r\n            '\\tvec4 cTextureScreen = texture2D( tDiffuse, vUv );',\r\n            '\\tfloat dx = rand( vUv + time );',\r\n            '\\tvec3 cResult = cTextureScreen.rgb + cTextureScreen.rgb * clamp( 0.1 + dx, 0.0, 1.0 );',\r\n            '\\tvec2 sc = vec2( sin( vUv.y * sCount ), cos( vUv.y * sCount ) );',\r\n            '\\tcResult += cTextureScreen.rgb * vec3( sc.x, sc.y, sc.x ) * sIntensity;',\r\n            '\\tcResult = cTextureScreen.rgb + clamp( nIntensity, 0.0,1.0 ) * ( cResult - cTextureScreen.rgb );',\r\n            '\\tif( grayscale ) {',\r\n            '\\t\\tcResult = vec3( cResult.r * 0.3 + cResult.g * 0.59 + cResult.b * 0.11 );',\r\n            '\\t}',\r\n            '\\tgl_FragColor =  vec4( cResult, cTextureScreen.a );',\r\n            '}'\r\n        ].join('\\n')\r\n    };\r\n    return  threex.shaders.FilmShader = FilmShader;\r\n});"]}