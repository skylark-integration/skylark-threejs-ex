{"version":3,"sources":["shaders/NormalMapShader.js"],"names":["define","THREE","threex","NormalMapShader","uniforms","heightMap","value","resolution","Vector2","scale","height","vertexShader","join","fragmentShader","shaders"],"mappings":";;;;;;;AAAAA,QACI,kBACA,aACD,SACCC,EACAC,GAEA,aACA,IAAIC,GACAC,UACIC,WAAeC,MAAO,MACtBC,YAAgBD,MAAO,IAAIL,EAAMO,QAAQ,IAAK,MAC9CC,OAAWH,MAAO,IAAIL,EAAMO,QAAQ,EAAG,IACvCE,QAAYJ,MAAO,MAEvBK,cACI,oBACA,gBACA,cACA,8EACA,KACFC,KAAK,MACPC,gBACI,wBACA,2BACA,+BACA,oBACA,gBACA,+CACA,kFACA,kFACA,sGACA,KACFD,KAAK,OAEX,OAAQV,EAAOY,QAAQX,gBAAkBA","file":"../../shaders/NormalMapShader.js","sourcesContent":["define([\n    \"skylark-threejs\",\n    \"../threex\"\n], function (\n    THREE,\n    threex\n) {\n    'use strict';\n    var NormalMapShader = {\n        uniforms: {\n            'heightMap': { value: null },\n            'resolution': { value: new THREE.Vector2(512, 512) },\n            'scale': { value: new THREE.Vector2(1, 1) },\n            'height': { value: 0.05 }\n        },\n        vertexShader: [\n            'varying vec2 vUv;',\n            'void main() {',\n            '\\tvUv = uv;',\n            '\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );',\n            '}'\n        ].join('\\n'),\n        fragmentShader: [\n            'uniform float height;',\n            'uniform vec2 resolution;',\n            'uniform sampler2D heightMap;',\n            'varying vec2 vUv;',\n            'void main() {',\n            '\\tfloat val = texture2D( heightMap, vUv ).x;',\n            '\\tfloat valU = texture2D( heightMap, vUv + vec2( 1.0 / resolution.x, 0.0 ) ).x;',\n            '\\tfloat valV = texture2D( heightMap, vUv + vec2( 0.0, 1.0 / resolution.y ) ).x;',\n            '\\tgl_FragColor = vec4( ( 0.5 * normalize( vec3( val - valU, val - valV, height  ) ) + 0.5 ), 1.0 );',\n            '}'\n        ].join('\\n')\n    };\n    return  threex.shaders.NormalMapShader = NormalMapShader;\n});"]}