{"version":3,"sources":["shaders/NormalMapShader.js"],"names":["define","THREE","NormalMapShader","uniforms","heightMap","value","resolution","Vector2","scale","height","vertexShader","join","fragmentShader"],"mappings":";;;;;;;AAAAA,QACC,mBACC,SAASC,GAuDV,OA/CAA,EAAMC,iBAELC,UAECC,WAAeC,MAAO,MACtBC,YAAgBD,MAAO,IAAIJ,EAAMM,QAAS,IAAK,MAC/CC,OAAWH,MAAO,IAAIJ,EAAMM,QAAS,EAAG,IACxCE,QAAYJ,MAAO,MAIpBK,cAEC,oBAEA,gBAEA,cACA,8EAEA,KAECC,KAAM,MAERC,gBAEC,wBACA,2BACA,+BAEA,oBAEA,gBAEA,+CAEA,kFACA,kFAEA,sGAEA,KAECD,KAAM,OAIFV,EAAMC","file":"../../shaders/NormalMapShader.js","sourcesContent":["define([\n\t\"skylark-threejs\"\n],function(THREE){\n\t/**\n\t * @author alteredq / http://alteredqualia.com/\n\t *\n\t * Normal map shader\n\t * - compute normals from heightmap\n\t */\n\n\tTHREE.NormalMapShader = {\n\n\t\tuniforms: {\n\n\t\t\t\"heightMap\": { value: null },\n\t\t\t\"resolution\": { value: new THREE.Vector2( 512, 512 ) },\n\t\t\t\"scale\": { value: new THREE.Vector2( 1, 1 ) },\n\t\t\t\"height\": { value: 0.05 }\n\n\t\t},\n\n\t\tvertexShader: [\n\n\t\t\t\"varying vec2 vUv;\",\n\n\t\t\t\"void main() {\",\n\n\t\t\t\"\tvUv = uv;\",\n\t\t\t\"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\n\n\t\t\t\"}\"\n\n\t\t].join( \"\\n\" ),\n\n\t\tfragmentShader: [\n\n\t\t\t\"uniform float height;\",\n\t\t\t\"uniform vec2 resolution;\",\n\t\t\t\"uniform sampler2D heightMap;\",\n\n\t\t\t\"varying vec2 vUv;\",\n\n\t\t\t\"void main() {\",\n\n\t\t\t\"\tfloat val = texture2D( heightMap, vUv ).x;\",\n\n\t\t\t\"\tfloat valU = texture2D( heightMap, vUv + vec2( 1.0 / resolution.x, 0.0 ) ).x;\",\n\t\t\t\"\tfloat valV = texture2D( heightMap, vUv + vec2( 0.0, 1.0 / resolution.y ) ).x;\",\n\n\t\t\t\"\tgl_FragColor = vec4( ( 0.5 * normalize( vec3( val - valU, val - valV, height  ) ) + 0.5 ), 1.0 );\",\n\n\t\t\t\"}\"\n\n\t\t].join( \"\\n\" )\n\n\t};\n\t\n\treturn THREE.NormalMapShader;\n});\n"]}