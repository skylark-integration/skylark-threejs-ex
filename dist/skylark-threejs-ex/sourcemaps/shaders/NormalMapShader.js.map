{"version":3,"sources":["shaders/NormalMapShader.js"],"names":["define","THREE","threex","NormalMapShader","uniforms","heightMap","value","resolution","Vector2","scale","height","vertexShader","join","fragmentShader","shaders"],"mappings":";;;;;;;AAAAA,QACI,kBACA,aACD,SACCC,EACAC,GAEA,aACA,IAAIC,GACAC,UACIC,WAAeC,MAAO,MACtBC,YAAgBD,MAAO,IAAIL,EAAMO,QAAQ,IAAK,MAC9CC,OAAWH,MAAO,IAAIL,EAAMO,QAAQ,EAAG,IACvCE,QAAYJ,MAAO,MAEvBK,cACI,oBACA,gBACA,cACA,8EACA,KACFC,KAAK,MACPC,gBACI,wBACA,2BACA,+BACA,oBACA,gBACA,+CACA,kFACA,kFACA,sGACA,KACFD,KAAK,OAEX,OAAQV,EAAOY,QAAQX,gBAAkBA","file":"../../shaders/NormalMapShader.js","sourcesContent":["define([\r\n    \"skylark-threejs\",\r\n    \"../threex\"\r\n], function (\r\n    THREE,\r\n    threex\r\n) {\r\n    'use strict';\r\n    var NormalMapShader = {\r\n        uniforms: {\r\n            'heightMap': { value: null },\r\n            'resolution': { value: new THREE.Vector2(512, 512) },\r\n            'scale': { value: new THREE.Vector2(1, 1) },\r\n            'height': { value: 0.05 }\r\n        },\r\n        vertexShader: [\r\n            'varying vec2 vUv;',\r\n            'void main() {',\r\n            '\\tvUv = uv;',\r\n            '\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );',\r\n            '}'\r\n        ].join('\\n'),\r\n        fragmentShader: [\r\n            'uniform float height;',\r\n            'uniform vec2 resolution;',\r\n            'uniform sampler2D heightMap;',\r\n            'varying vec2 vUv;',\r\n            'void main() {',\r\n            '\\tfloat val = texture2D( heightMap, vUv ).x;',\r\n            '\\tfloat valU = texture2D( heightMap, vUv + vec2( 1.0 / resolution.x, 0.0 ) ).x;',\r\n            '\\tfloat valV = texture2D( heightMap, vUv + vec2( 0.0, 1.0 / resolution.y ) ).x;',\r\n            '\\tgl_FragColor = vec4( ( 0.5 * normalize( vec3( val - valU, val - valV, height  ) ) + 0.5 ), 1.0 );',\r\n            '}'\r\n        ].join('\\n')\r\n    };\r\n    return  threex.shaders.NormalMapShader = NormalMapShader;\r\n});"]}