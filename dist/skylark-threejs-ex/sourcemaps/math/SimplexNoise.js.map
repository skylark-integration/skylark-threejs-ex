{"version":3,"sources":["math/SimplexNoise.js"],"names":["define","THREE","threex","SimplexNoise","r","undefined","Math","this","grad3","grad4","p","i","floor","random","perm","simplex","prototype","dot","g","x","y","dot3","z","dot4","w","noise","xin","yin","i1","j1","s","sqrt","j","G2","t","x0","y0","x1","y1","x2","y2","ii","jj","gi0","gi1","gi2","t0","t1","t2","noise3d","zin","k1","i2","j2","k2","k","G3","z0","z1","z2","x3","y3","z3","kk","gi3","t3","noise4d","l1","l2","i3","j3","k3","l3","F4","G4","l","w0","c","w1","w2","w3","x4","y4","z4","w4","ll","gi4","t4","math"],"mappings":";;;;;;;AAAAA,QACI,kBACA,aACD,SACCC,EACAC,GAEA,aACA,IAAIC,EAAe,SAAUC,QAChBC,GAALD,IACAA,EAAIE,MACRC,KAAKC,QAEG,EACA,EACA,KAGC,EACD,EACA,IAGA,GACC,EACD,KAGC,GACA,EACD,IAGA,EACA,EACA,KAGC,EACD,EACA,IAGA,EACA,GACC,KAGA,EACD,GACC,IAGD,EACA,EACA,IAGA,GACC,EACD,IAGA,EACA,GACC,IAGD,GACC,GACA,IAGTD,KAAKE,QAEG,EACA,EACA,EACA,IAGA,EACA,EACA,GACC,IAGD,EACA,GACC,EACD,IAGA,EACA,GACC,GACA,IAGD,GACC,EACD,EACA,IAGA,GACC,EACD,GACC,IAGD,GACC,GACA,EACD,IAGA,GACC,GACA,GACA,IAGD,EACA,EACA,EACA,IAGA,EACA,EACA,GACC,IAGD,EACA,GACC,EACD,IAGA,EACA,GACC,GACA,KAGA,EACD,EACA,EACA,KAGC,EACD,EACA,GACC,KAGA,EACD,GACC,EACD,KAGC,EACD,GACC,GACA,IAGD,EACA,EACA,EACA,IAGA,EACA,EACA,GACC,IAGD,GACC,EACD,EACA,IAGA,GACC,EACD,GACC,KAGA,EACD,EACA,EACA,KAGC,EACD,EACA,GACC,KAGA,GACA,EACD,EACA,KAGC,GACA,EACD,GACC,IAGD,EACA,EACA,EACA,IAGA,EACA,GACC,EACD,IAGA,GACC,EACD,EACA,IAGA,GACC,GACA,EACD,KAGC,EACD,EACA,EACA,KAGC,EACD,GACC,EACD,KAGC,GACA,EACD,EACA,KAGC,GACA,GACA,EACD,IAGRF,KAAKG,KACL,IAAK,IAAIC,EAAI,EAAGA,EAAI,IAAKA,IACrBJ,KAAKG,EAAEC,GAAKL,KAAKM,MAAmB,IAAbR,EAAES,UAE7BN,KAAKO,QACL,IAASH,EAAI,EAAGA,EAAI,IAAKA,IACrBJ,KAAKO,KAAKH,GAAKJ,KAAKG,EAAM,IAAJC,GAE1BJ,KAAKQ,UAEG,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAGA,EACA,EACA,EACA,IAG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","file":"../../math/SimplexNoise.js","sourcesContent":["define([\r\n    \"skylark-threejs\",\r\n    \"../threex\"\r\n], function (\r\n    THREE,\r\n    threex\r\n) {\r\n    'use strict';\r\n    var SimplexNoise = function (r) {\r\n        if (r == undefined)\r\n            r = Math;\r\n        this.grad3 = [\r\n            [\r\n                1,\r\n                1,\r\n                0\r\n            ],\r\n            [\r\n                -1,\r\n                1,\r\n                0\r\n            ],\r\n            [\r\n                1,\r\n                -1,\r\n                0\r\n            ],\r\n            [\r\n                -1,\r\n                -1,\r\n                0\r\n            ],\r\n            [\r\n                1,\r\n                0,\r\n                1\r\n            ],\r\n            [\r\n                -1,\r\n                0,\r\n                1\r\n            ],\r\n            [\r\n                1,\r\n                0,\r\n                -1\r\n            ],\r\n            [\r\n                -1,\r\n                0,\r\n                -1\r\n            ],\r\n            [\r\n                0,\r\n                1,\r\n                1\r\n            ],\r\n            [\r\n                0,\r\n                -1,\r\n                1\r\n            ],\r\n            [\r\n                0,\r\n                1,\r\n                -1\r\n            ],\r\n            [\r\n                0,\r\n                -1,\r\n                -1\r\n            ]\r\n        ];\r\n        this.grad4 = [\r\n            [\r\n                0,\r\n                1,\r\n                1,\r\n                1\r\n            ],\r\n            [\r\n                0,\r\n                1,\r\n                1,\r\n                -1\r\n            ],\r\n            [\r\n                0,\r\n                1,\r\n                -1,\r\n                1\r\n            ],\r\n            [\r\n                0,\r\n                1,\r\n                -1,\r\n                -1\r\n            ],\r\n            [\r\n                0,\r\n                -1,\r\n                1,\r\n                1\r\n            ],\r\n            [\r\n                0,\r\n                -1,\r\n                1,\r\n                -1\r\n            ],\r\n            [\r\n                0,\r\n                -1,\r\n                -1,\r\n                1\r\n            ],\r\n            [\r\n                0,\r\n                -1,\r\n                -1,\r\n                -1\r\n            ],\r\n            [\r\n                1,\r\n                0,\r\n                1,\r\n                1\r\n            ],\r\n            [\r\n                1,\r\n                0,\r\n                1,\r\n                -1\r\n            ],\r\n            [\r\n                1,\r\n                0,\r\n                -1,\r\n                1\r\n            ],\r\n            [\r\n                1,\r\n                0,\r\n                -1,\r\n                -1\r\n            ],\r\n            [\r\n                -1,\r\n                0,\r\n                1,\r\n                1\r\n            ],\r\n            [\r\n                -1,\r\n                0,\r\n                1,\r\n                -1\r\n            ],\r\n            [\r\n                -1,\r\n                0,\r\n                -1,\r\n                1\r\n            ],\r\n            [\r\n                -1,\r\n                0,\r\n                -1,\r\n                -1\r\n            ],\r\n            [\r\n                1,\r\n                1,\r\n                0,\r\n                1\r\n            ],\r\n            [\r\n                1,\r\n                1,\r\n                0,\r\n                -1\r\n            ],\r\n            [\r\n                1,\r\n                -1,\r\n                0,\r\n                1\r\n            ],\r\n            [\r\n                1,\r\n                -1,\r\n                0,\r\n                -1\r\n            ],\r\n            [\r\n                -1,\r\n                1,\r\n                0,\r\n                1\r\n            ],\r\n            [\r\n                -1,\r\n                1,\r\n                0,\r\n                -1\r\n            ],\r\n            [\r\n                -1,\r\n                -1,\r\n                0,\r\n                1\r\n            ],\r\n            [\r\n                -1,\r\n                -1,\r\n                0,\r\n                -1\r\n            ],\r\n            [\r\n                1,\r\n                1,\r\n                1,\r\n                0\r\n            ],\r\n            [\r\n                1,\r\n                1,\r\n                -1,\r\n                0\r\n            ],\r\n            [\r\n                1,\r\n                -1,\r\n                1,\r\n                0\r\n            ],\r\n            [\r\n                1,\r\n                -1,\r\n                -1,\r\n                0\r\n            ],\r\n            [\r\n                -1,\r\n                1,\r\n                1,\r\n                0\r\n            ],\r\n            [\r\n                -1,\r\n                1,\r\n                -1,\r\n                0\r\n            ],\r\n            [\r\n                -1,\r\n                -1,\r\n                1,\r\n                0\r\n            ],\r\n            [\r\n                -1,\r\n                -1,\r\n                -1,\r\n                0\r\n            ]\r\n        ];\r\n        this.p = [];\r\n        for (var i = 0; i < 256; i++) {\r\n            this.p[i] = Math.floor(r.random() * 256);\r\n        }\r\n        this.perm = [];\r\n        for (var i = 0; i < 512; i++) {\r\n            this.perm[i] = this.p[i & 255];\r\n        }\r\n        this.simplex = [\r\n            [\r\n                0,\r\n                1,\r\n                2,\r\n                3\r\n            ],\r\n            [\r\n                0,\r\n                1,\r\n                3,\r\n                2\r\n            ],\r\n            [\r\n                0,\r\n                0,\r\n                0,\r\n                0\r\n            ],\r\n            [\r\n                0,\r\n                2,\r\n                3,\r\n                1\r\n            ],\r\n            [\r\n                0,\r\n                0,\r\n                0,\r\n                0\r\n            ],\r\n            [\r\n                0,\r\n                0,\r\n                0,\r\n                0\r\n            ],\r\n            [\r\n                0,\r\n                0,\r\n                0,\r\n                0\r\n            ],\r\n            [\r\n                1,\r\n                2,\r\n                3,\r\n                0\r\n            ],\r\n            [\r\n                0,\r\n                2,\r\n                1,\r\n                3\r\n            ],\r\n            [\r\n                0,\r\n                0,\r\n                0,\r\n                0\r\n            ],\r\n            [\r\n                0,\r\n                3,\r\n                1,\r\n                2\r\n            ],\r\n            [\r\n                0,\r\n                3,\r\n                2,\r\n                1\r\n            ],\r\n            [\r\n                0,\r\n                0,\r\n                0,\r\n                0\r\n            ],\r\n            [\r\n                0,\r\n                0,\r\n                0,\r\n                0\r\n            ],\r\n            [\r\n                0,\r\n                0,\r\n                0,\r\n                0\r\n            ],\r\n            [\r\n                1,\r\n                3,\r\n                2,\r\n                0\r\n            ],\r\n            [\r\n                0,\r\n                0,\r\n                0,\r\n                0\r\n            ],\r\n            [\r\n                0,\r\n                0,\r\n                0,\r\n                0\r\n            ],\r\n            [\r\n                0,\r\n                0,\r\n                0,\r\n                0\r\n            ],\r\n            [\r\n                0,\r\n                0,\r\n                0,\r\n                0\r\n            ],\r\n            [\r\n                0,\r\n                0,\r\n                0,\r\n                0\r\n            ],\r\n            [\r\n                0,\r\n                0,\r\n                0,\r\n                0\r\n            ],\r\n            [\r\n                0,\r\n                0,\r\n                0,\r\n                0\r\n            ],\r\n            [\r\n                0,\r\n                0,\r\n                0,\r\n                0\r\n            ],\r\n            [\r\n                1,\r\n                2,\r\n                0,\r\n                3\r\n            ],\r\n            [\r\n                0,\r\n                0,\r\n                0,\r\n                0\r\n            ],\r\n            [\r\n                1,\r\n                3,\r\n                0,\r\n                2\r\n            ],\r\n            [\r\n                0,\r\n                0,\r\n                0,\r\n                0\r\n            ],\r\n            [\r\n                0,\r\n                0,\r\n                0,\r\n                0\r\n            ],\r\n            [\r\n                0,\r\n                0,\r\n                0,\r\n                0\r\n            ],\r\n            [\r\n                2,\r\n                3,\r\n                0,\r\n                1\r\n            ],\r\n            [\r\n                2,\r\n                3,\r\n                1,\r\n                0\r\n            ],\r\n            [\r\n                1,\r\n                0,\r\n                2,\r\n                3\r\n            ],\r\n            [\r\n                1,\r\n                0,\r\n                3,\r\n                2\r\n            ],\r\n            [\r\n                0,\r\n                0,\r\n                0,\r\n                0\r\n            ],\r\n            [\r\n                0,\r\n                0,\r\n                0,\r\n                0\r\n            ],\r\n            [\r\n                0,\r\n                0,\r\n                0,\r\n                0\r\n            ],\r\n            [\r\n                2,\r\n                0,\r\n                3,\r\n                1\r\n            ],\r\n            [\r\n                0,\r\n                0,\r\n                0,\r\n                0\r\n            ],\r\n            [\r\n                2,\r\n                1,\r\n                3,\r\n                0\r\n            ],\r\n            [\r\n                0,\r\n                0,\r\n                0,\r\n                0\r\n            ],\r\n            [\r\n                0,\r\n                0,\r\n                0,\r\n                0\r\n            ],\r\n            [\r\n                0,\r\n                0,\r\n                0,\r\n                0\r\n            ],\r\n            [\r\n                0,\r\n                0,\r\n                0,\r\n                0\r\n            ],\r\n            [\r\n                0,\r\n                0,\r\n                0,\r\n                0\r\n            ],\r\n            [\r\n                0,\r\n                0,\r\n                0,\r\n                0\r\n            ],\r\n            [\r\n                0,\r\n                0,\r\n                0,\r\n                0\r\n            ],\r\n            [\r\n                0,\r\n                0,\r\n                0,\r\n                0\r\n            ],\r\n            [\r\n                2,\r\n                0,\r\n                1,\r\n                3\r\n            ],\r\n            [\r\n                0,\r\n                0,\r\n                0,\r\n                0\r\n            ],\r\n            [\r\n                0,\r\n                0,\r\n                0,\r\n                0\r\n            ],\r\n            [\r\n                0,\r\n                0,\r\n                0,\r\n                0\r\n            ],\r\n            [\r\n                3,\r\n                0,\r\n                1,\r\n                2\r\n            ],\r\n            [\r\n                3,\r\n                0,\r\n                2,\r\n                1\r\n            ],\r\n            [\r\n                0,\r\n                0,\r\n                0,\r\n                0\r\n            ],\r\n            [\r\n                3,\r\n                1,\r\n                2,\r\n                0\r\n            ],\r\n            [\r\n                2,\r\n                1,\r\n                0,\r\n                3\r\n            ],\r\n            [\r\n                0,\r\n                0,\r\n                0,\r\n                0\r\n            ],\r\n            [\r\n                0,\r\n                0,\r\n                0,\r\n                0\r\n            ],\r\n            [\r\n                0,\r\n                0,\r\n                0,\r\n                0\r\n            ],\r\n            [\r\n                3,\r\n                1,\r\n                0,\r\n                2\r\n            ],\r\n            [\r\n                0,\r\n                0,\r\n                0,\r\n                0\r\n            ],\r\n            [\r\n                3,\r\n                2,\r\n                0,\r\n                1\r\n            ],\r\n            [\r\n                3,\r\n                2,\r\n                1,\r\n                0\r\n            ]\r\n        ];\r\n    };\r\n    SimplexNoise.prototype.dot = function (g, x, y) {\r\n        return g[0] * x + g[1] * y;\r\n    };\r\n    SimplexNoise.prototype.dot3 = function (g, x, y, z) {\r\n        return g[0] * x + g[1] * y + g[2] * z;\r\n    };\r\n    SimplexNoise.prototype.dot4 = function (g, x, y, z, w) {\r\n        return g[0] * x + g[1] * y + g[2] * z + g[3] * w;\r\n    };\r\n    SimplexNoise.prototype.noise = function (xin, yin) {\r\n        var n0, n1, n2;\r\n        var F2 = 0.5 * (Math.sqrt(3) - 1);\r\n        var s = (xin + yin) * F2;\r\n        var i = Math.floor(xin + s);\r\n        var j = Math.floor(yin + s);\r\n        var G2 = (3 - Math.sqrt(3)) / 6;\r\n        var t = (i + j) * G2;\r\n        var X0 = i - t;\r\n        var Y0 = j - t;\r\n        var x0 = xin - X0;\r\n        var y0 = yin - Y0;\r\n        var i1, j1;\r\n        if (x0 > y0) {\r\n            i1 = 1;\r\n            j1 = 0;\r\n        } else {\r\n            i1 = 0;\r\n            j1 = 1;\r\n        }\r\n        var x1 = x0 - i1 + G2;\r\n        var y1 = y0 - j1 + G2;\r\n        var x2 = x0 - 1 + 2 * G2;\r\n        var y2 = y0 - 1 + 2 * G2;\r\n        var ii = i & 255;\r\n        var jj = j & 255;\r\n        var gi0 = this.perm[ii + this.perm[jj]] % 12;\r\n        var gi1 = this.perm[ii + i1 + this.perm[jj + j1]] % 12;\r\n        var gi2 = this.perm[ii + 1 + this.perm[jj + 1]] % 12;\r\n        var t0 = 0.5 - x0 * x0 - y0 * y0;\r\n        if (t0 < 0)\r\n            n0 = 0;\r\n        else {\r\n            t0 *= t0;\r\n            n0 = t0 * t0 * this.dot(this.grad3[gi0], x0, y0);\r\n        }\r\n        var t1 = 0.5 - x1 * x1 - y1 * y1;\r\n        if (t1 < 0)\r\n            n1 = 0;\r\n        else {\r\n            t1 *= t1;\r\n            n1 = t1 * t1 * this.dot(this.grad3[gi1], x1, y1);\r\n        }\r\n        var t2 = 0.5 - x2 * x2 - y2 * y2;\r\n        if (t2 < 0)\r\n            n2 = 0;\r\n        else {\r\n            t2 *= t2;\r\n            n2 = t2 * t2 * this.dot(this.grad3[gi2], x2, y2);\r\n        }\r\n        return 70 * (n0 + n1 + n2);\r\n    };\r\n    SimplexNoise.prototype.noise3d = function (xin, yin, zin) {\r\n        var n0, n1, n2, n3;\r\n        var F3 = 1 / 3;\r\n        var s = (xin + yin + zin) * F3;\r\n        var i = Math.floor(xin + s);\r\n        var j = Math.floor(yin + s);\r\n        var k = Math.floor(zin + s);\r\n        var G3 = 1 / 6;\r\n        var t = (i + j + k) * G3;\r\n        var X0 = i - t;\r\n        var Y0 = j - t;\r\n        var Z0 = k - t;\r\n        var x0 = xin - X0;\r\n        var y0 = yin - Y0;\r\n        var z0 = zin - Z0;\r\n        var i1, j1, k1;\r\n        var i2, j2, k2;\r\n        if (x0 >= y0) {\r\n            if (y0 >= z0) {\r\n                i1 = 1;\r\n                j1 = 0;\r\n                k1 = 0;\r\n                i2 = 1;\r\n                j2 = 1;\r\n                k2 = 0;\r\n            } else if (x0 >= z0) {\r\n                i1 = 1;\r\n                j1 = 0;\r\n                k1 = 0;\r\n                i2 = 1;\r\n                j2 = 0;\r\n                k2 = 1;\r\n            } else {\r\n                i1 = 0;\r\n                j1 = 0;\r\n                k1 = 1;\r\n                i2 = 1;\r\n                j2 = 0;\r\n                k2 = 1;\r\n            }\r\n        } else {\r\n            if (y0 < z0) {\r\n                i1 = 0;\r\n                j1 = 0;\r\n                k1 = 1;\r\n                i2 = 0;\r\n                j2 = 1;\r\n                k2 = 1;\r\n            } else if (x0 < z0) {\r\n                i1 = 0;\r\n                j1 = 1;\r\n                k1 = 0;\r\n                i2 = 0;\r\n                j2 = 1;\r\n                k2 = 1;\r\n            } else {\r\n                i1 = 0;\r\n                j1 = 1;\r\n                k1 = 0;\r\n                i2 = 1;\r\n                j2 = 1;\r\n                k2 = 0;\r\n            }\r\n        }\r\n        var x1 = x0 - i1 + G3;\r\n        var y1 = y0 - j1 + G3;\r\n        var z1 = z0 - k1 + G3;\r\n        var x2 = x0 - i2 + 2 * G3;\r\n        var y2 = y0 - j2 + 2 * G3;\r\n        var z2 = z0 - k2 + 2 * G3;\r\n        var x3 = x0 - 1 + 3 * G3;\r\n        var y3 = y0 - 1 + 3 * G3;\r\n        var z3 = z0 - 1 + 3 * G3;\r\n        var ii = i & 255;\r\n        var jj = j & 255;\r\n        var kk = k & 255;\r\n        var gi0 = this.perm[ii + this.perm[jj + this.perm[kk]]] % 12;\r\n        var gi1 = this.perm[ii + i1 + this.perm[jj + j1 + this.perm[kk + k1]]] % 12;\r\n        var gi2 = this.perm[ii + i2 + this.perm[jj + j2 + this.perm[kk + k2]]] % 12;\r\n        var gi3 = this.perm[ii + 1 + this.perm[jj + 1 + this.perm[kk + 1]]] % 12;\r\n        var t0 = 0.6 - x0 * x0 - y0 * y0 - z0 * z0;\r\n        if (t0 < 0)\r\n            n0 = 0;\r\n        else {\r\n            t0 *= t0;\r\n            n0 = t0 * t0 * this.dot3(this.grad3[gi0], x0, y0, z0);\r\n        }\r\n        var t1 = 0.6 - x1 * x1 - y1 * y1 - z1 * z1;\r\n        if (t1 < 0)\r\n            n1 = 0;\r\n        else {\r\n            t1 *= t1;\r\n            n1 = t1 * t1 * this.dot3(this.grad3[gi1], x1, y1, z1);\r\n        }\r\n        var t2 = 0.6 - x2 * x2 - y2 * y2 - z2 * z2;\r\n        if (t2 < 0)\r\n            n2 = 0;\r\n        else {\r\n            t2 *= t2;\r\n            n2 = t2 * t2 * this.dot3(this.grad3[gi2], x2, y2, z2);\r\n        }\r\n        var t3 = 0.6 - x3 * x3 - y3 * y3 - z3 * z3;\r\n        if (t3 < 0)\r\n            n3 = 0;\r\n        else {\r\n            t3 *= t3;\r\n            n3 = t3 * t3 * this.dot3(this.grad3[gi3], x3, y3, z3);\r\n        }\r\n        return 32 * (n0 + n1 + n2 + n3);\r\n    };\r\n    SimplexNoise.prototype.noise4d = function (x, y, z, w) {\r\n        var grad4 = this.grad4;\r\n        var simplex = this.simplex;\r\n        var perm = this.perm;\r\n        var F4 = (Math.sqrt(5) - 1) / 4;\r\n        var G4 = (5 - Math.sqrt(5)) / 20;\r\n        var n0, n1, n2, n3, n4;\r\n        var s = (x + y + z + w) * F4;\r\n        var i = Math.floor(x + s);\r\n        var j = Math.floor(y + s);\r\n        var k = Math.floor(z + s);\r\n        var l = Math.floor(w + s);\r\n        var t = (i + j + k + l) * G4;\r\n        var X0 = i - t;\r\n        var Y0 = j - t;\r\n        var Z0 = k - t;\r\n        var W0 = l - t;\r\n        var x0 = x - X0;\r\n        var y0 = y - Y0;\r\n        var z0 = z - Z0;\r\n        var w0 = w - W0;\r\n        var c1 = x0 > y0 ? 32 : 0;\r\n        var c2 = x0 > z0 ? 16 : 0;\r\n        var c3 = y0 > z0 ? 8 : 0;\r\n        var c4 = x0 > w0 ? 4 : 0;\r\n        var c5 = y0 > w0 ? 2 : 0;\r\n        var c6 = z0 > w0 ? 1 : 0;\r\n        var c = c1 + c2 + c3 + c4 + c5 + c6;\r\n        var i1, j1, k1, l1;\r\n        var i2, j2, k2, l2;\r\n        var i3, j3, k3, l3;\r\n        i1 = simplex[c][0] >= 3 ? 1 : 0;\r\n        j1 = simplex[c][1] >= 3 ? 1 : 0;\r\n        k1 = simplex[c][2] >= 3 ? 1 : 0;\r\n        l1 = simplex[c][3] >= 3 ? 1 : 0;\r\n        i2 = simplex[c][0] >= 2 ? 1 : 0;\r\n        j2 = simplex[c][1] >= 2 ? 1 : 0;\r\n        k2 = simplex[c][2] >= 2 ? 1 : 0;\r\n        l2 = simplex[c][3] >= 2 ? 1 : 0;\r\n        i3 = simplex[c][0] >= 1 ? 1 : 0;\r\n        j3 = simplex[c][1] >= 1 ? 1 : 0;\r\n        k3 = simplex[c][2] >= 1 ? 1 : 0;\r\n        l3 = simplex[c][3] >= 1 ? 1 : 0;\r\n        var x1 = x0 - i1 + G4;\r\n        var y1 = y0 - j1 + G4;\r\n        var z1 = z0 - k1 + G4;\r\n        var w1 = w0 - l1 + G4;\r\n        var x2 = x0 - i2 + 2 * G4;\r\n        var y2 = y0 - j2 + 2 * G4;\r\n        var z2 = z0 - k2 + 2 * G4;\r\n        var w2 = w0 - l2 + 2 * G4;\r\n        var x3 = x0 - i3 + 3 * G4;\r\n        var y3 = y0 - j3 + 3 * G4;\r\n        var z3 = z0 - k3 + 3 * G4;\r\n        var w3 = w0 - l3 + 3 * G4;\r\n        var x4 = x0 - 1 + 4 * G4;\r\n        var y4 = y0 - 1 + 4 * G4;\r\n        var z4 = z0 - 1 + 4 * G4;\r\n        var w4 = w0 - 1 + 4 * G4;\r\n        var ii = i & 255;\r\n        var jj = j & 255;\r\n        var kk = k & 255;\r\n        var ll = l & 255;\r\n        var gi0 = perm[ii + perm[jj + perm[kk + perm[ll]]]] % 32;\r\n        var gi1 = perm[ii + i1 + perm[jj + j1 + perm[kk + k1 + perm[ll + l1]]]] % 32;\r\n        var gi2 = perm[ii + i2 + perm[jj + j2 + perm[kk + k2 + perm[ll + l2]]]] % 32;\r\n        var gi3 = perm[ii + i3 + perm[jj + j3 + perm[kk + k3 + perm[ll + l3]]]] % 32;\r\n        var gi4 = perm[ii + 1 + perm[jj + 1 + perm[kk + 1 + perm[ll + 1]]]] % 32;\r\n        var t0 = 0.6 - x0 * x0 - y0 * y0 - z0 * z0 - w0 * w0;\r\n        if (t0 < 0)\r\n            n0 = 0;\r\n        else {\r\n            t0 *= t0;\r\n            n0 = t0 * t0 * this.dot4(grad4[gi0], x0, y0, z0, w0);\r\n        }\r\n        var t1 = 0.6 - x1 * x1 - y1 * y1 - z1 * z1 - w1 * w1;\r\n        if (t1 < 0)\r\n            n1 = 0;\r\n        else {\r\n            t1 *= t1;\r\n            n1 = t1 * t1 * this.dot4(grad4[gi1], x1, y1, z1, w1);\r\n        }\r\n        var t2 = 0.6 - x2 * x2 - y2 * y2 - z2 * z2 - w2 * w2;\r\n        if (t2 < 0)\r\n            n2 = 0;\r\n        else {\r\n            t2 *= t2;\r\n            n2 = t2 * t2 * this.dot4(grad4[gi2], x2, y2, z2, w2);\r\n        }\r\n        var t3 = 0.6 - x3 * x3 - y3 * y3 - z3 * z3 - w3 * w3;\r\n        if (t3 < 0)\r\n            n3 = 0;\r\n        else {\r\n            t3 *= t3;\r\n            n3 = t3 * t3 * this.dot4(grad4[gi3], x3, y3, z3, w3);\r\n        }\r\n        var t4 = 0.6 - x4 * x4 - y4 * y4 - z4 * z4 - w4 * w4;\r\n        if (t4 < 0)\r\n            n4 = 0;\r\n        else {\r\n            t4 *= t4;\r\n            n4 = t4 * t4 * this.dot4(grad4[gi4], x4, y4, z4, w4);\r\n        }\r\n        return 27 * (n0 + n1 + n2 + n3 + n4);\r\n    };\r\n\r\n    return threex.math.SimplexNoise = SimplexNoise;\r\n});"]}