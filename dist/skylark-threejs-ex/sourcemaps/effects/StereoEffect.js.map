{"version":3,"sources":["effects/StereoEffect.js"],"names":["define","THREE","threex","effects","StereoEffect","renderer","_stereo","StereoCamera","aspect","size","Vector2","this","setEyeSeparation","eyeSep","setSize","width","height","render","scene","camera","updateMatrixWorld","parent","update","getSize","autoClear","clear","setScissorTest","setScissor","setViewport","cameraL","cameraR"],"mappings":";;;;;;;AAAAA,QACI,kBACA,aACD,SACCC,EACAC,GAEA,aA8BA,OAAOA,EAAOC,QAAQC,aA7BH,SAAUC,GACzB,IAAIC,EAAU,IAAIL,EAAMM,aACxBD,EAAQE,OAAS,GACjB,IAAIC,EAAO,IAAIR,EAAMS,QACrBC,KAAKC,iBAAmB,SAAUC,GAC9BP,EAAQO,OAASA,GAErBF,KAAKG,QAAU,SAAUC,EAAOC,GAC5BX,EAASS,QAAQC,EAAOC,IAE5BL,KAAKM,OAAS,SAAUC,EAAOC,GAC3BD,EAAME,oBACgB,OAAlBD,EAAOE,QACPF,EAAOC,oBACXd,EAAQgB,OAAOH,GACfd,EAASkB,QAAQd,GACbJ,EAASmB,WACTnB,EAASoB,QACbpB,EAASqB,gBAAe,GACxBrB,EAASsB,WAAW,EAAG,EAAGlB,EAAKM,MAAQ,EAAGN,EAAKO,QAC/CX,EAASuB,YAAY,EAAG,EAAGnB,EAAKM,MAAQ,EAAGN,EAAKO,QAChDX,EAASY,OAAOC,EAAOZ,EAAQuB,SAC/BxB,EAASsB,WAAWlB,EAAKM,MAAQ,EAAG,EAAGN,EAAKM,MAAQ,EAAGN,EAAKO,QAC5DX,EAASuB,YAAYnB,EAAKM,MAAQ,EAAG,EAAGN,EAAKM,MAAQ,EAAGN,EAAKO,QAC7DX,EAASY,OAAOC,EAAOZ,EAAQwB,SAC/BzB,EAASqB,gBAAe","file":"../../effects/StereoEffect.js","sourcesContent":["define([\r\n    \"skylark-threejs\",\r\n    \"../threex\"\r\n], function (\r\n    THREE,\r\n    threex\r\n) {\r\n    'use strict';\r\n    var StereoEffect = function (renderer) {\r\n        var _stereo = new THREE.StereoCamera();\r\n        _stereo.aspect = 0.5;\r\n        var size = new THREE.Vector2();\r\n        this.setEyeSeparation = function (eyeSep) {\r\n            _stereo.eyeSep = eyeSep;\r\n        };\r\n        this.setSize = function (width, height) {\r\n            renderer.setSize(width, height);\r\n        };\r\n        this.render = function (scene, camera) {\r\n            scene.updateMatrixWorld();\r\n            if (camera.parent === null)\r\n                camera.updateMatrixWorld();\r\n            _stereo.update(camera);\r\n            renderer.getSize(size);\r\n            if (renderer.autoClear)\r\n                renderer.clear();\r\n            renderer.setScissorTest(true);\r\n            renderer.setScissor(0, 0, size.width / 2, size.height);\r\n            renderer.setViewport(0, 0, size.width / 2, size.height);\r\n            renderer.render(scene, _stereo.cameraL);\r\n            renderer.setScissor(size.width / 2, 0, size.width / 2, size.height);\r\n            renderer.setViewport(size.width / 2, 0, size.width / 2, size.height);\r\n            renderer.render(scene, _stereo.cameraR);\r\n            renderer.setScissorTest(false);\r\n        };\r\n    };\r\n\r\n    return threex.effects.StereoEffect = StereoEffect;\r\n});"]}