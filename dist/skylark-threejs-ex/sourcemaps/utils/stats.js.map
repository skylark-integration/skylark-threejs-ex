{"version":3,"sources":["utils/stats.js"],"names":["define","threex","Stats","mode","container","document","createElement","addPanel","panel","appendChild","dom","showPanel","id","i","children","length","style","display","cssText","addEventListener","event","preventDefault","beginTime","performance","Date","now","prevTime","frames","fpsPanel","Panel","msPanel","self","memory","memPanel","REVISION","begin","end","time","update","usedJSHeapSize","jsHeapSizeLimit","this","domElement","setMode","name","fg","bg","min","Infinity","max","round","Math","PR","window","devicePixelRatio","WIDTH","HEIGHT","TEXT_X","TEXT_Y","GRAPH_X","GRAPH_Y","GRAPH_WIDTH","GRAPH_HEIGHT","canvas","width","height","context","getContext","font","textBaseline","fillStyle","fillRect","fillText","globalAlpha","value","maxValue","drawImage","utils"],"mappings":"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","file":"../../utils/stats.js","sourcesContent":["define([\r\n    \"../threex\"\r\n],function (threex) {\r\n\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\r\n\tvar Stats = function () {\r\n\r\n\t\tvar mode = 0;\r\n\r\n\t\tvar container = document.createElement( 'div' );\r\n\t\tcontainer.style.cssText = 'position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000';\r\n\t\tcontainer.addEventListener( 'click', function ( event ) {\r\n\r\n\t\t\tevent.preventDefault();\r\n\t\t\tshowPanel( ++ mode % container.children.length );\r\n\r\n\t\t}, false );\r\n\r\n\t\t//\r\n\r\n\t\tfunction addPanel( panel ) {\r\n\r\n\t\t\tcontainer.appendChild( panel.dom );\r\n\t\t\treturn panel;\r\n\r\n\t\t}\r\n\r\n\t\tfunction showPanel( id ) {\r\n\r\n\t\t\tfor ( var i = 0; i < container.children.length; i ++ ) {\r\n\r\n\t\t\t\tcontainer.children[ i ].style.display = i === id ? 'block' : 'none';\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmode = id;\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tvar beginTime = ( performance || Date ).now(), prevTime = beginTime, frames = 0;\r\n\r\n\t\tvar fpsPanel = addPanel( new Stats.Panel( 'FPS', '#0ff', '#002' ) );\r\n\t\tvar msPanel = addPanel( new Stats.Panel( 'MS', '#0f0', '#020' ) );\r\n\r\n\t\tif ( self.performance && self.performance.memory ) {\r\n\r\n\t\t\tvar memPanel = addPanel( new Stats.Panel( 'MB', '#f08', '#201' ) );\r\n\r\n\t\t}\r\n\r\n\t\tshowPanel( 0 );\r\n\r\n\t\treturn {\r\n\r\n\t\t\tREVISION: 16,\r\n\r\n\t\t\tdom: container,\r\n\r\n\t\t\taddPanel: addPanel,\r\n\t\t\tshowPanel: showPanel,\r\n\r\n\t\t\tbegin: function () {\r\n\r\n\t\t\t\tbeginTime = ( performance || Date ).now();\r\n\r\n\t\t\t},\r\n\r\n\t\t\tend: function () {\r\n\r\n\t\t\t\tframes ++;\r\n\r\n\t\t\t\tvar time = ( performance || Date ).now();\r\n\r\n\t\t\t\tmsPanel.update( time - beginTime, 200 );\r\n\r\n\t\t\t\tif ( time >= prevTime + 1000 ) {\r\n\r\n\t\t\t\t\tfpsPanel.update( ( frames * 1000 ) / ( time - prevTime ), 100 );\r\n\r\n\t\t\t\t\tprevTime = time;\r\n\t\t\t\t\tframes = 0;\r\n\r\n\t\t\t\t\tif ( memPanel ) {\r\n\r\n\t\t\t\t\t\tvar memory = performance.memory;\r\n\t\t\t\t\t\tmemPanel.update( memory.usedJSHeapSize / 1048576, memory.jsHeapSizeLimit / 1048576 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn time;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tupdate: function () {\r\n\r\n\t\t\t\tbeginTime = this.end();\r\n\r\n\t\t\t},\r\n\r\n\t\t\t// Backwards Compatibility\r\n\r\n\t\t\tdomElement: container,\r\n\t\t\tsetMode: showPanel\r\n\r\n\t\t};\r\n\r\n\t};\r\n\r\n\tStats.Panel = function ( name, fg, bg ) {\r\n\r\n\t\tvar min = Infinity, max = 0, round = Math.round;\r\n\t\tvar PR = round( window.devicePixelRatio || 1 );\r\n\r\n\t\tvar WIDTH = 80 * PR, HEIGHT = 48 * PR,\r\n\t\t\t\tTEXT_X = 3 * PR, TEXT_Y = 2 * PR,\r\n\t\t\t\tGRAPH_X = 3 * PR, GRAPH_Y = 15 * PR,\r\n\t\t\t\tGRAPH_WIDTH = 74 * PR, GRAPH_HEIGHT = 30 * PR;\r\n\r\n\t\tvar canvas = document.createElement( 'canvas' );\r\n\t\tcanvas.width = WIDTH;\r\n\t\tcanvas.height = HEIGHT;\r\n\t\tcanvas.style.cssText = 'width:80px;height:48px';\r\n\r\n\t\tvar context = canvas.getContext( '2d' );\r\n\t\tcontext.font = 'bold ' + ( 9 * PR ) + 'px Helvetica,Arial,sans-serif';\r\n\t\tcontext.textBaseline = 'top';\r\n\r\n\t\tcontext.fillStyle = bg;\r\n\t\tcontext.fillRect( 0, 0, WIDTH, HEIGHT );\r\n\r\n\t\tcontext.fillStyle = fg;\r\n\t\tcontext.fillText( name, TEXT_X, TEXT_Y );\r\n\t\tcontext.fillRect( GRAPH_X, GRAPH_Y, GRAPH_WIDTH, GRAPH_HEIGHT );\r\n\r\n\t\tcontext.fillStyle = bg;\r\n\t\tcontext.globalAlpha = 0.9;\r\n\t\tcontext.fillRect( GRAPH_X, GRAPH_Y, GRAPH_WIDTH, GRAPH_HEIGHT );\r\n\r\n\t\treturn {\r\n\r\n\t\t\tdom: canvas,\r\n\r\n\t\t\tupdate: function ( value, maxValue ) {\r\n\r\n\t\t\t\tmin = Math.min( min, value );\r\n\t\t\t\tmax = Math.max( max, value );\r\n\r\n\t\t\t\tcontext.fillStyle = bg;\r\n\t\t\t\tcontext.globalAlpha = 1;\r\n\t\t\t\tcontext.fillRect( 0, 0, WIDTH, GRAPH_Y );\r\n\t\t\t\tcontext.fillStyle = fg;\r\n\t\t\t\tcontext.fillText( round( value ) + ' ' + name + ' (' + round( min ) + '-' + round( max ) + ')', TEXT_X, TEXT_Y );\r\n\r\n\t\t\t\tcontext.drawImage( canvas, GRAPH_X + PR, GRAPH_Y, GRAPH_WIDTH - PR, GRAPH_HEIGHT, GRAPH_X, GRAPH_Y, GRAPH_WIDTH - PR, GRAPH_HEIGHT );\r\n\r\n\t\t\t\tcontext.fillRect( GRAPH_X + GRAPH_WIDTH - PR, GRAPH_Y, PR, GRAPH_HEIGHT );\r\n\r\n\t\t\t\tcontext.fillStyle = bg;\r\n\t\t\t\tcontext.globalAlpha = 0.9;\r\n\t\t\t\tcontext.fillRect( GRAPH_X + GRAPH_WIDTH - PR, GRAPH_Y, PR, round( ( 1 - ( value / maxValue ) ) * GRAPH_HEIGHT ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t};\r\n\r\n\treturn  threex.utils.Stats = Stats;\r\n\r\n});\r\n"]}