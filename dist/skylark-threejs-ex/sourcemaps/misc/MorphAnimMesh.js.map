{"version":3,"sources":["misc/MorphAnimMesh.js"],"names":["define","THREE","threex","MorphAnimMesh","geometry","material","Mesh","call","this","type","mixer","AnimationMixer","activeAction","prototype","Object","create","constructor","setDirectionForward","timeScale","setDirectionBackward","playAnimation","label","fps","stop","clip","AnimationClip","findByName","Error","action","clipAction","tracks","length","duration","play","updateAnimation","delta","update","copy","source","misc"],"mappings":";;;;;;;AAAAA,QACI,kBACA,aACD,SACCC,EACAC,GAEA,aACA,IAAIC,EAAgB,SAAUC,EAAUC,GACpCJ,EAAMK,KAAKC,KAAKC,KAAMJ,EAAUC,GAChCG,KAAKC,KAAO,gBACZD,KAAKE,MAAQ,IAAIT,EAAMU,eAAeH,MACtCA,KAAKI,aAAe,MAgCxB,OA9BAT,EAAcU,UAAYC,OAAOC,OAAOd,EAAMK,KAAKO,YAC3BG,YAAcb,EACtCA,EAAcU,UAAUI,oBAAsB,WAC1CT,KAAKE,MAAMQ,UAAY,GAE3Bf,EAAcU,UAAUM,qBAAuB,WAC3CX,KAAKE,MAAMQ,WAAa,GAE5Bf,EAAcU,UAAUO,cAAgB,SAAUC,EAAOC,GACjDd,KAAKI,eACLJ,KAAKI,aAAaW,OAClBf,KAAKI,aAAe,MAExB,IAAIY,EAAOvB,EAAMwB,cAAcC,WAAWlB,KAAMa,GAChD,IAAIG,EAKA,MAAM,IAAIG,MAAM,mCAAqCN,EAAQ,mCAJ7D,IAAIO,EAASpB,KAAKE,MAAMmB,WAAWL,GACnCI,EAAOV,UAAYM,EAAKM,OAAOC,OAAST,EAAME,EAAKQ,SACnDxB,KAAKI,aAAegB,EAAOK,QAKnC9B,EAAcU,UAAUqB,gBAAkB,SAAUC,GAChD3B,KAAKE,MAAM0B,OAAOD,IAEtBhC,EAAcU,UAAUwB,KAAO,SAAUC,GAGrC,OAFArC,EAAMK,KAAKO,UAAUwB,KAAK9B,KAAKC,KAAM8B,GACrC9B,KAAKE,MAAQ,IAAIT,EAAMU,eAAeH,MAC/BA,MAEJN,EAAOqC,KAAKpC,cAAgBA","file":"../../misc/MorphAnimMesh.js","sourcesContent":["define([\n    \"skylark-threejs\",\n    \"../threex\"\n], function (\n    THREE,\n    threex\n) {\n    'use strict';\n    var MorphAnimMesh = function (geometry, material) {\n        THREE.Mesh.call(this, geometry, material);\n        this.type = 'MorphAnimMesh';\n        this.mixer = new THREE.AnimationMixer(this);\n        this.activeAction = null;\n    };\n    MorphAnimMesh.prototype = Object.create(THREE.Mesh.prototype);\n    MorphAnimMesh.prototype.constructor = MorphAnimMesh;\n    MorphAnimMesh.prototype.setDirectionForward = function () {\n        this.mixer.timeScale = 1;\n    };\n    MorphAnimMesh.prototype.setDirectionBackward = function () {\n        this.mixer.timeScale = -1;\n    };\n    MorphAnimMesh.prototype.playAnimation = function (label, fps) {\n        if (this.activeAction) {\n            this.activeAction.stop();\n            this.activeAction = null;\n        }\n        var clip = THREE.AnimationClip.findByName(this, label);\n        if (clip) {\n            var action = this.mixer.clipAction(clip);\n            action.timeScale = clip.tracks.length * fps / clip.duration;\n            this.activeAction = action.play();\n        } else {\n            throw new Error('THREE.MorphAnimMesh: animations[' + label + '] undefined in .playAnimation()');\n        }\n    };\n    MorphAnimMesh.prototype.updateAnimation = function (delta) {\n        this.mixer.update(delta);\n    };\n    MorphAnimMesh.prototype.copy = function (source) {\n        THREE.Mesh.prototype.copy.call(this, source);\n        this.mixer = new THREE.AnimationMixer(this);\n        return this;\n    };\n    return threex.misc.MorphAnimMesh = MorphAnimMesh;\n});"]}