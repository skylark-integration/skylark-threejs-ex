{"version":3,"sources":["controls/OrbitControls.js"],"names":["define","THREE","OrbitControls","object","domElement","offset","quat","quatInverse","lastPosition","lastQuaternion","undefined","console","warn","document","error","this","enabled","target","Vector3","minDistance","maxDistance","Infinity","minZoom","maxZoom","minPolarAngle","maxPolarAngle","Math","PI","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","panSpeed","screenSpacePanning","keyPanSpeed","autoRotate","autoRotateSpeed","enableKeys","keys","LEFT","UP","RIGHT","BOTTOM","mouseButtons","MOUSE","ROTATE","MIDDLE","DOLLY","PAN","touches","ONE","TOUCH","TWO","DOLLY_PAN","target0","clone","position0","position","zoom0","zoom","getPolarAngle","spherical","phi","getAzimuthalAngle","theta","saveState","scope","copy","reset","updateProjectionMatrix","dispatchEvent","changeEvent","update","state","STATE","NONE","Quaternion","setFromUnitVectors","up","inverse","sub","applyQuaternion","setFromVector3","rotateLeft","sphericalDelta","max","min","makeSafe","radius","scale","addScaledVector","panOffset","add","setFromSpherical","lookAt","multiplyScalar","set","zoomChanged","distanceToSquared","EPS","dot","quaternion","dispose","removeEventListener","onContextMenu","onMouseDown","onMouseWheel","onTouchStart","onTouchEnd","onTouchMove","onMouseMove","onMouseUp","onKeyDown","type","startEvent","endEvent","TOUCH_ROTATE","TOUCH_PAN","TOUCH_DOLLY_PAN","TOUCH_DOLLY_ROTATE","Spherical","rotateStart","Vector2","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","getZoomScale","pow","angle","rotateUp","v","panLeft","distance","objectMatrix","setFromMatrixColumn","panUp","crossVectors","pan","deltaX","deltaY","element","isPerspectiveCamera","targetDistance","length","tan","fov","clientHeight","matrix","isOrthographicCamera","right","left","clientWidth","top","bottom","dollyOut","dollyScale","dollyIn","handleMouseDownRotate","event","clientX","clientY","handleMouseDownPan","handleTouchStartRotate","pageX","pageY","x","y","handleTouchStartPan","handleTouchStartDolly","dx","dy","sqrt","handleTouchMoveRotate","subVectors","handleTouchMovePan","handleTouchMoveDolly","mouseAction","preventDefault","focus","window","button","handleMouseDownDolly","ctrlKey","metaKey","shiftKey","addEventListener","handleMouseMoveRotate","handleMouseMoveDolly","handleMouseMovePan","stopPropagation","handleMouseWheel","needsUpdate","keyCode","handleKeyDown","handleTouchStartDollyPan","DOLLY_ROTATE","handleTouchStartDollyRotate","handleTouchMoveDollyPan","handleTouchMoveDollyRotate","tabIndex","prototype","Object","create","EventDispatcher","constructor"],"mappings":"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","file":"../../controls/OrbitControls.js","sourcesContent":["define([\n    \"skylark-threejs\"\n], function (THREE) {\n    'use strict';\n    var OrbitControls = function (object, domElement) {\n        if (domElement === undefined)\n            console.warn('THREE.OrbitControls: The second parameter \"domElement\" is now mandatory.');\n        if (domElement === document)\n            console.error('THREE.OrbitControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.');\n        this.object = object;\n        this.domElement = domElement;\n        this.enabled = true;\n        this.target = new THREE.Vector3();\n        this.minDistance = 0;\n        this.maxDistance = Infinity;\n        this.minZoom = 0;\n        this.maxZoom = Infinity;\n        this.minPolarAngle = 0;\n        this.maxPolarAngle = Math.PI;\n        this.minAzimuthAngle = -Infinity;\n        this.maxAzimuthAngle = Infinity;\n        this.enableDamping = false;\n        this.dampingFactor = 0.05;\n        this.enableZoom = true;\n        this.zoomSpeed = 1;\n        this.enableRotate = true;\n        this.rotateSpeed = 1;\n        this.enablePan = true;\n        this.panSpeed = 1;\n        this.screenSpacePanning = false;\n        this.keyPanSpeed = 7;\n        this.autoRotate = false;\n        this.autoRotateSpeed = 2;\n        this.enableKeys = true;\n        this.keys = {\n            LEFT: 37,\n            UP: 38,\n            RIGHT: 39,\n            BOTTOM: 40\n        };\n        this.mouseButtons = {\n            LEFT: THREE.MOUSE.ROTATE,\n            MIDDLE: THREE.MOUSE.DOLLY,\n            RIGHT: THREE.MOUSE.PAN\n        };\n        this.touches = {\n            ONE: THREE.TOUCH.ROTATE,\n            TWO: THREE.TOUCH.DOLLY_PAN\n        };\n        this.target0 = this.target.clone();\n        this.position0 = this.object.position.clone();\n        this.zoom0 = this.object.zoom;\n        this.getPolarAngle = function () {\n            return spherical.phi;\n        };\n        this.getAzimuthalAngle = function () {\n            return spherical.theta;\n        };\n        this.saveState = function () {\n            scope.target0.copy(scope.target);\n            scope.position0.copy(scope.object.position);\n            scope.zoom0 = scope.object.zoom;\n        };\n        this.reset = function () {\n            scope.target.copy(scope.target0);\n            scope.object.position.copy(scope.position0);\n            scope.object.zoom = scope.zoom0;\n            scope.object.updateProjectionMatrix();\n            scope.dispatchEvent(changeEvent);\n            scope.update();\n            state = STATE.NONE;\n        };\n        this.update = function () {\n            var offset = new THREE.Vector3();\n            var quat = new THREE.Quaternion().setFromUnitVectors(object.up, new THREE.Vector3(0, 1, 0));\n            var quatInverse = quat.clone().inverse();\n            var lastPosition = new THREE.Vector3();\n            var lastQuaternion = new THREE.Quaternion();\n            return function update() {\n                var position = scope.object.position;\n                offset.copy(position).sub(scope.target);\n                offset.applyQuaternion(quat);\n                spherical.setFromVector3(offset);\n                if (scope.autoRotate && state === STATE.NONE) {\n                    rotateLeft(getAutoRotationAngle());\n                }\n                if (scope.enableDamping) {\n                    spherical.theta += sphericalDelta.theta * scope.dampingFactor;\n                    spherical.phi += sphericalDelta.phi * scope.dampingFactor;\n                } else {\n                    spherical.theta += sphericalDelta.theta;\n                    spherical.phi += sphericalDelta.phi;\n                }\n                spherical.theta = Math.max(scope.minAzimuthAngle, Math.min(scope.maxAzimuthAngle, spherical.theta));\n                spherical.phi = Math.max(scope.minPolarAngle, Math.min(scope.maxPolarAngle, spherical.phi));\n                spherical.makeSafe();\n                spherical.radius *= scale;\n                spherical.radius = Math.max(scope.minDistance, Math.min(scope.maxDistance, spherical.radius));\n                if (scope.enableDamping === true) {\n                    scope.target.addScaledVector(panOffset, scope.dampingFactor);\n                } else {\n                    scope.target.add(panOffset);\n                }\n                offset.setFromSpherical(spherical);\n                offset.applyQuaternion(quatInverse);\n                position.copy(scope.target).add(offset);\n                scope.object.lookAt(scope.target);\n                if (scope.enableDamping === true) {\n                    sphericalDelta.theta *= 1 - scope.dampingFactor;\n                    sphericalDelta.phi *= 1 - scope.dampingFactor;\n                    panOffset.multiplyScalar(1 - scope.dampingFactor);\n                } else {\n                    sphericalDelta.set(0, 0, 0);\n                    panOffset.set(0, 0, 0);\n                }\n                scale = 1;\n                if (zoomChanged || lastPosition.distanceToSquared(scope.object.position) > EPS || 8 * (1 - lastQuaternion.dot(scope.object.quaternion)) > EPS) {\n                    scope.dispatchEvent(changeEvent);\n                    lastPosition.copy(scope.object.position);\n                    lastQuaternion.copy(scope.object.quaternion);\n                    zoomChanged = false;\n                    return true;\n                }\n                return false;\n            };\n        }();\n        this.dispose = function () {\n            scope.domElement.removeEventListener('contextmenu', onContextMenu, false);\n            scope.domElement.removeEventListener('mousedown', onMouseDown, false);\n            scope.domElement.removeEventListener('wheel', onMouseWheel, false);\n            scope.domElement.removeEventListener('touchstart', onTouchStart, false);\n            scope.domElement.removeEventListener('touchend', onTouchEnd, false);\n            scope.domElement.removeEventListener('touchmove', onTouchMove, false);\n            document.removeEventListener('mousemove', onMouseMove, false);\n            document.removeEventListener('mouseup', onMouseUp, false);\n            scope.domElement.removeEventListener('keydown', onKeyDown, false);\n        };\n        var scope = this;\n        var changeEvent = { type: 'change' };\n        var startEvent = { type: 'start' };\n        var endEvent = { type: 'end' };\n        var STATE = {\n            NONE: -1,\n            ROTATE: 0,\n            DOLLY: 1,\n            PAN: 2,\n            TOUCH_ROTATE: 3,\n            TOUCH_PAN: 4,\n            TOUCH_DOLLY_PAN: 5,\n            TOUCH_DOLLY_ROTATE: 6\n        };\n        var state = STATE.NONE;\n        var EPS = 0.000001;\n        var spherical = new THREE.Spherical();\n        var sphericalDelta = new THREE.Spherical();\n        var scale = 1;\n        var panOffset = new THREE.Vector3();\n        var zoomChanged = false;\n        var rotateStart = new THREE.Vector2();\n        var rotateEnd = new THREE.Vector2();\n        var rotateDelta = new THREE.Vector2();\n        var panStart = new THREE.Vector2();\n        var panEnd = new THREE.Vector2();\n        var panDelta = new THREE.Vector2();\n        var dollyStart = new THREE.Vector2();\n        var dollyEnd = new THREE.Vector2();\n        var dollyDelta = new THREE.Vector2();\n        function getAutoRotationAngle() {\n            return 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n        }\n        function getZoomScale() {\n            return Math.pow(0.95, scope.zoomSpeed);\n        }\n        function rotateLeft(angle) {\n            sphericalDelta.theta -= angle;\n        }\n        function rotateUp(angle) {\n            sphericalDelta.phi -= angle;\n        }\n        var panLeft = function () {\n            var v = new THREE.Vector3();\n            return function panLeft(distance, objectMatrix) {\n                v.setFromMatrixColumn(objectMatrix, 0);\n                v.multiplyScalar(-distance);\n                panOffset.add(v);\n            };\n        }();\n        var panUp = function () {\n            var v = new THREE.Vector3();\n            return function panUp(distance, objectMatrix) {\n                if (scope.screenSpacePanning === true) {\n                    v.setFromMatrixColumn(objectMatrix, 1);\n                } else {\n                    v.setFromMatrixColumn(objectMatrix, 0);\n                    v.crossVectors(scope.object.up, v);\n                }\n                v.multiplyScalar(distance);\n                panOffset.add(v);\n            };\n        }();\n        var pan = function () {\n            var offset = new THREE.Vector3();\n            return function pan(deltaX, deltaY) {\n                var element = scope.domElement;\n                if (scope.object.isPerspectiveCamera) {\n                    var position = scope.object.position;\n                    offset.copy(position).sub(scope.target);\n                    var targetDistance = offset.length();\n                    targetDistance *= Math.tan(scope.object.fov / 2 * Math.PI / 180);\n                    panLeft(2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix);\n                    panUp(2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix);\n                } else if (scope.object.isOrthographicCamera) {\n                    panLeft(deltaX * (scope.object.right - scope.object.left) / scope.object.zoom / element.clientWidth, scope.object.matrix);\n                    panUp(deltaY * (scope.object.top - scope.object.bottom) / scope.object.zoom / element.clientHeight, scope.object.matrix);\n                } else {\n                    console.warn('WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.');\n                    scope.enablePan = false;\n                }\n            };\n        }();\n        function dollyOut(dollyScale) {\n            if (scope.object.isPerspectiveCamera) {\n                scale /= dollyScale;\n            } else if (scope.object.isOrthographicCamera) {\n                scope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom * dollyScale));\n                scope.object.updateProjectionMatrix();\n                zoomChanged = true;\n            } else {\n                console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\n                scope.enableZoom = false;\n            }\n        }\n        function dollyIn(dollyScale) {\n            if (scope.object.isPerspectiveCamera) {\n                scale *= dollyScale;\n            } else if (scope.object.isOrthographicCamera) {\n                scope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom / dollyScale));\n                scope.object.updateProjectionMatrix();\n                zoomChanged = true;\n            } else {\n                console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\n                scope.enableZoom = false;\n            }\n        }\n        function handleMouseDownRotate(event) {\n            rotateStart.set(event.clientX, event.clientY);\n        }\n        function handleMouseDownDolly(event) {\n            dollyStart.set(event.clientX, event.clientY);\n        }\n        function handleMouseDownPan(event) {\n            panStart.set(event.clientX, event.clientY);\n        }\n        function handleMouseMoveRotate(event) {\n            rotateEnd.set(event.clientX, event.clientY);\n            rotateDelta.subVectors(rotateEnd, rotateStart).multiplyScalar(scope.rotateSpeed);\n            var element = scope.domElement;\n            rotateLeft(2 * Math.PI * rotateDelta.x / element.clientHeight);\n            rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight);\n            rotateStart.copy(rotateEnd);\n            scope.update();\n        }\n        function handleMouseMoveDolly(event) {\n            dollyEnd.set(event.clientX, event.clientY);\n            dollyDelta.subVectors(dollyEnd, dollyStart);\n            if (dollyDelta.y > 0) {\n                dollyOut(getZoomScale());\n            } else if (dollyDelta.y < 0) {\n                dollyIn(getZoomScale());\n            }\n            dollyStart.copy(dollyEnd);\n            scope.update();\n        }\n        function handleMouseMovePan(event) {\n            panEnd.set(event.clientX, event.clientY);\n            panDelta.subVectors(panEnd, panStart).multiplyScalar(scope.panSpeed);\n            pan(panDelta.x, panDelta.y);\n            panStart.copy(panEnd);\n            scope.update();\n        }\n        function handleMouseUp() {\n        }\n        function handleMouseWheel(event) {\n            if (event.deltaY < 0) {\n                dollyIn(getZoomScale());\n            } else if (event.deltaY > 0) {\n                dollyOut(getZoomScale());\n            }\n            scope.update();\n        }\n        function handleKeyDown(event) {\n            var needsUpdate = false;\n            switch (event.keyCode) {\n            case scope.keys.UP:\n                pan(0, scope.keyPanSpeed);\n                needsUpdate = true;\n                break;\n            case scope.keys.BOTTOM:\n                pan(0, -scope.keyPanSpeed);\n                needsUpdate = true;\n                break;\n            case scope.keys.LEFT:\n                pan(scope.keyPanSpeed, 0);\n                needsUpdate = true;\n                break;\n            case scope.keys.RIGHT:\n                pan(-scope.keyPanSpeed, 0);\n                needsUpdate = true;\n                break;\n            }\n            if (needsUpdate) {\n                event.preventDefault();\n                scope.update();\n            }\n        }\n        function handleTouchStartRotate(event) {\n            if (event.touches.length == 1) {\n                rotateStart.set(event.touches[0].pageX, event.touches[0].pageY);\n            } else {\n                var x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\n                var y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\n                rotateStart.set(x, y);\n            }\n        }\n        function handleTouchStartPan(event) {\n            if (event.touches.length == 1) {\n                panStart.set(event.touches[0].pageX, event.touches[0].pageY);\n            } else {\n                var x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\n                var y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\n                panStart.set(x, y);\n            }\n        }\n        function handleTouchStartDolly(event) {\n            var dx = event.touches[0].pageX - event.touches[1].pageX;\n            var dy = event.touches[0].pageY - event.touches[1].pageY;\n            var distance = Math.sqrt(dx * dx + dy * dy);\n            dollyStart.set(0, distance);\n        }\n        function handleTouchStartDollyPan(event) {\n            if (scope.enableZoom)\n                handleTouchStartDolly(event);\n            if (scope.enablePan)\n                handleTouchStartPan(event);\n        }\n        function handleTouchStartDollyRotate(event) {\n            if (scope.enableZoom)\n                handleTouchStartDolly(event);\n            if (scope.enableRotate)\n                handleTouchStartRotate(event);\n        }\n        function handleTouchMoveRotate(event) {\n            if (event.touches.length == 1) {\n                rotateEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n            } else {\n                var x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\n                var y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\n                rotateEnd.set(x, y);\n            }\n            rotateDelta.subVectors(rotateEnd, rotateStart).multiplyScalar(scope.rotateSpeed);\n            var element = scope.domElement;\n            rotateLeft(2 * Math.PI * rotateDelta.x / element.clientHeight);\n            rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight);\n            rotateStart.copy(rotateEnd);\n        }\n        function handleTouchMovePan(event) {\n            if (event.touches.length == 1) {\n                panEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n            } else {\n                var x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\n                var y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\n                panEnd.set(x, y);\n            }\n            panDelta.subVectors(panEnd, panStart).multiplyScalar(scope.panSpeed);\n            pan(panDelta.x, panDelta.y);\n            panStart.copy(panEnd);\n        }\n        function handleTouchMoveDolly(event) {\n            var dx = event.touches[0].pageX - event.touches[1].pageX;\n            var dy = event.touches[0].pageY - event.touches[1].pageY;\n            var distance = Math.sqrt(dx * dx + dy * dy);\n            dollyEnd.set(0, distance);\n            dollyDelta.set(0, Math.pow(dollyEnd.y / dollyStart.y, scope.zoomSpeed));\n            dollyOut(dollyDelta.y);\n            dollyStart.copy(dollyEnd);\n        }\n        function handleTouchMoveDollyPan(event) {\n            if (scope.enableZoom)\n                handleTouchMoveDolly(event);\n            if (scope.enablePan)\n                handleTouchMovePan(event);\n        }\n        function handleTouchMoveDollyRotate(event) {\n            if (scope.enableZoom)\n                handleTouchMoveDolly(event);\n            if (scope.enableRotate)\n                handleTouchMoveRotate(event);\n        }\n        function handleTouchEnd() {\n        }\n        function onMouseDown(event) {\n            if (scope.enabled === false)\n                return;\n            event.preventDefault();\n            scope.domElement.focus ? scope.domElement.focus() : window.focus();\n            var mouseAction;\n            switch (event.button) {\n            case 0:\n                mouseAction = scope.mouseButtons.LEFT;\n                break;\n            case 1:\n                mouseAction = scope.mouseButtons.MIDDLE;\n                break;\n            case 2:\n                mouseAction = scope.mouseButtons.RIGHT;\n                break;\n            default:\n                mouseAction = -1;\n            }\n            switch (mouseAction) {\n            case THREE.MOUSE.DOLLY:\n                if (scope.enableZoom === false)\n                    return;\n                handleMouseDownDolly(event);\n                state = STATE.DOLLY;\n                break;\n            case THREE.MOUSE.ROTATE:\n                if (event.ctrlKey || event.metaKey || event.shiftKey) {\n                    if (scope.enablePan === false)\n                        return;\n                    handleMouseDownPan(event);\n                    state = STATE.PAN;\n                } else {\n                    if (scope.enableRotate === false)\n                        return;\n                    handleMouseDownRotate(event);\n                    state = STATE.ROTATE;\n                }\n                break;\n            case THREE.MOUSE.PAN:\n                if (event.ctrlKey || event.metaKey || event.shiftKey) {\n                    if (scope.enableRotate === false)\n                        return;\n                    handleMouseDownRotate(event);\n                    state = STATE.ROTATE;\n                } else {\n                    if (scope.enablePan === false)\n                        return;\n                    handleMouseDownPan(event);\n                    state = STATE.PAN;\n                }\n                break;\n            default:\n                state = STATE.NONE;\n            }\n            if (state !== STATE.NONE) {\n                document.addEventListener('mousemove', onMouseMove, false);\n                document.addEventListener('mouseup', onMouseUp, false);\n                scope.dispatchEvent(startEvent);\n            }\n        }\n        function onMouseMove(event) {\n            if (scope.enabled === false)\n                return;\n            event.preventDefault();\n            switch (state) {\n            case STATE.ROTATE:\n                if (scope.enableRotate === false)\n                    return;\n                handleMouseMoveRotate(event);\n                break;\n            case STATE.DOLLY:\n                if (scope.enableZoom === false)\n                    return;\n                handleMouseMoveDolly(event);\n                break;\n            case STATE.PAN:\n                if (scope.enablePan === false)\n                    return;\n                handleMouseMovePan(event);\n                break;\n            }\n        }\n        function onMouseUp(event) {\n            if (scope.enabled === false)\n                return;\n            handleMouseUp(event);\n            document.removeEventListener('mousemove', onMouseMove, false);\n            document.removeEventListener('mouseup', onMouseUp, false);\n            scope.dispatchEvent(endEvent);\n            state = STATE.NONE;\n        }\n        function onMouseWheel(event) {\n            if (scope.enabled === false || scope.enableZoom === false || state !== STATE.NONE && state !== STATE.ROTATE)\n                return;\n            event.preventDefault();\n            event.stopPropagation();\n            scope.dispatchEvent(startEvent);\n            handleMouseWheel(event);\n            scope.dispatchEvent(endEvent);\n        }\n        function onKeyDown(event) {\n            if (scope.enabled === false || scope.enableKeys === false || scope.enablePan === false)\n                return;\n            handleKeyDown(event);\n        }\n        function onTouchStart(event) {\n            if (scope.enabled === false)\n                return;\n            event.preventDefault();\n            switch (event.touches.length) {\n            case 1:\n                switch (scope.touches.ONE) {\n                case THREE.TOUCH.ROTATE:\n                    if (scope.enableRotate === false)\n                        return;\n                    handleTouchStartRotate(event);\n                    state = STATE.TOUCH_ROTATE;\n                    break;\n                case THREE.TOUCH.PAN:\n                    if (scope.enablePan === false)\n                        return;\n                    handleTouchStartPan(event);\n                    state = STATE.TOUCH_PAN;\n                    break;\n                default:\n                    state = STATE.NONE;\n                }\n                break;\n            case 2:\n                switch (scope.touches.TWO) {\n                case THREE.TOUCH.DOLLY_PAN:\n                    if (scope.enableZoom === false && scope.enablePan === false)\n                        return;\n                    handleTouchStartDollyPan(event);\n                    state = STATE.TOUCH_DOLLY_PAN;\n                    break;\n                case THREE.TOUCH.DOLLY_ROTATE:\n                    if (scope.enableZoom === false && scope.enableRotate === false)\n                        return;\n                    handleTouchStartDollyRotate(event);\n                    state = STATE.TOUCH_DOLLY_ROTATE;\n                    break;\n                default:\n                    state = STATE.NONE;\n                }\n                break;\n            default:\n                state = STATE.NONE;\n            }\n            if (state !== STATE.NONE) {\n                scope.dispatchEvent(startEvent);\n            }\n        }\n        function onTouchMove(event) {\n            if (scope.enabled === false)\n                return;\n            event.preventDefault();\n            event.stopPropagation();\n            switch (state) {\n            case STATE.TOUCH_ROTATE:\n                if (scope.enableRotate === false)\n                    return;\n                handleTouchMoveRotate(event);\n                scope.update();\n                break;\n            case STATE.TOUCH_PAN:\n                if (scope.enablePan === false)\n                    return;\n                handleTouchMovePan(event);\n                scope.update();\n                break;\n            case STATE.TOUCH_DOLLY_PAN:\n                if (scope.enableZoom === false && scope.enablePan === false)\n                    return;\n                handleTouchMoveDollyPan(event);\n                scope.update();\n                break;\n            case STATE.TOUCH_DOLLY_ROTATE:\n                if (scope.enableZoom === false && scope.enableRotate === false)\n                    return;\n                handleTouchMoveDollyRotate(event);\n                scope.update();\n                break;\n            default:\n                state = STATE.NONE;\n            }\n        }\n        function onTouchEnd(event) {\n            if (scope.enabled === false)\n                return;\n            handleTouchEnd(event);\n            scope.dispatchEvent(endEvent);\n            state = STATE.NONE;\n        }\n        function onContextMenu(event) {\n            if (scope.enabled === false)\n                return;\n            event.preventDefault();\n        }\n        scope.domElement.addEventListener('contextmenu', onContextMenu, false);\n        scope.domElement.addEventListener('mousedown', onMouseDown, false);\n        scope.domElement.addEventListener('wheel', onMouseWheel, false);\n        scope.domElement.addEventListener('touchstart', onTouchStart, false);\n        scope.domElement.addEventListener('touchend', onTouchEnd, false);\n        scope.domElement.addEventListener('touchmove', onTouchMove, false);\n        scope.domElement.addEventListener('keydown', onKeyDown, false);\n        if (scope.domElement.tabIndex === -1) {\n            scope.domElement.tabIndex = 0;\n        }\n        this.update();\n    };\n    OrbitControls.prototype = Object.create(THREE.EventDispatcher.prototype);\n    OrbitControls.prototype.constructor = OrbitControls;\n\n    \n    return     OrbitControls;\n});"]}