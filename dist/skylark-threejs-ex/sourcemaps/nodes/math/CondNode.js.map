{"version":3,"sources":["nodes/math/CondNode.js"],"names":["define","TempNode","CondNode","a","b","op","ifNode","elseNode","call","this","EQUAL","NOT_EQUAL","GREATER","GREATER_EQUAL","LESS","LESS_EQUAL","prototype","Object","create","constructor","nodeType","getType","builder","ifType","elseType","getTypeLength","getCondType","generate","output","code","type","condType","build","ifCode","elseCode","join","format","copy","source","toJSON","meta","data","getJSONNode","createJSONNode","uuid"],"mappings":";;;;;;;AAAAA,QACI,oBACD,SACCC,GAEA,aACA,SAASC,EAASC,EAAGC,EAAGC,EAAIC,EAAQC,GAChCN,EAASO,KAAKC,MACdA,KAAKN,EAAIA,EACTM,KAAKL,EAAIA,EACTK,KAAKJ,GAAKA,EACVI,KAAKH,OAASA,EACdG,KAAKF,SAAWA,EAqEpB,OAnEAL,EAASQ,MAAQ,KACjBR,EAASS,UAAY,KACrBT,EAASU,QAAU,IACnBV,EAASW,cAAgB,KACzBX,EAASY,KAAO,IAChBZ,EAASa,WAAa,KACtBb,EAASc,UAAYC,OAAOC,OAAOjB,EAASe,WAC5Cd,EAASc,UAAUG,YAAcjB,EACjCA,EAASc,UAAUI,SAAW,OAC9BlB,EAASc,UAAUK,QAAU,SAAUC,GACnC,GAAIb,KAAKH,OAAQ,CACb,IAAIiB,EAASd,KAAKH,OAAOe,QAAQC,GAC7BE,EAAWf,KAAKF,SAASc,QAAQC,GACrC,OAAIA,EAAQG,cAAcD,GAAYF,EAAQG,cAAcF,GACjDC,EAEJD,EAEX,MAAO,KAEXrB,EAASc,UAAUU,YAAc,SAAUJ,GACvC,OAAIA,EAAQG,cAAchB,KAAKL,EAAEiB,QAAQC,IAAYA,EAAQG,cAAchB,KAAKN,EAAEkB,QAAQC,IAC/Eb,KAAKL,EAAEiB,QAAQC,GAEnBb,KAAKN,EAAEkB,QAAQC,IAE1BpB,EAASc,UAAUW,SAAW,SAAUL,EAASM,GAC7C,IAAkJC,EAA9IC,EAAOrB,KAAKY,QAAQC,GAAUS,EAAWtB,KAAKiB,YAAYJ,GAAUnB,EAAIM,KAAKN,EAAE6B,MAAMV,EAASS,GAAW3B,EAAIK,KAAKL,EAAE4B,MAAMV,EAASS,GACvI,GAAItB,KAAKH,OAAQ,CACb,IAAI2B,EAASxB,KAAKH,OAAO0B,MAAMV,EAASQ,GAAOI,EAAWzB,KAAKF,SAASyB,MAAMV,EAASQ,GACvFD,EAAO,MACH1B,EACAM,KAAKJ,GACLD,EACA,IACA6B,EACA,IACAC,GACFC,KAAK,KAAO,UAEdN,EAAO,KAAO1B,EAAI,IAAMM,KAAKJ,GAAK,IAAMD,EAAI,KAEhD,OAAOkB,EAAQc,OAAOP,EAAMpB,KAAKY,QAAQC,GAAUM,IAEvD1B,EAASc,UAAUqB,KAAO,SAAUC,GAOhC,OANArC,EAASe,UAAUqB,KAAK7B,KAAKC,KAAM6B,GACnC7B,KAAKN,EAAImC,EAAOnC,EAChBM,KAAKL,EAAIkC,EAAOlC,EAChBK,KAAKJ,GAAKiC,EAAOjC,GACjBI,KAAKH,OAASgC,EAAOhC,OACrBG,KAAKF,SAAW+B,EAAO/B,SAChBE,MAEXP,EAASc,UAAUuB,OAAS,SAAUC,GAClC,IAAIC,EAAOhC,KAAKiC,YAAYF,GAW5B,OAVKC,KACDA,EAAOhC,KAAKkC,eAAeH,IACtBrC,EAAIM,KAAKN,EAAEoC,OAAOC,GAAMI,KAC7BH,EAAKrC,EAAIK,KAAKL,EAAEmC,OAAOC,GAAMI,KAC7BH,EAAKpC,GAAKI,KAAKJ,GACXoC,EAAKnC,SACLmC,EAAKnC,OAASG,KAAKH,OAAOiC,OAAOC,GAAMI,MACvCH,EAAKlC,WACLkC,EAAKlC,SAAWE,KAAKF,SAASgC,OAAOC,GAAMI,OAE5CH,GAEJvC","file":"../../../nodes/math/CondNode.js","sourcesContent":["define([\r\n    '../core/TempNode'\r\n], function (\r\n    TempNode\r\n) {\r\n    'use strict';\r\n    function CondNode(a, b, op, ifNode, elseNode) {\r\n        TempNode.call(this);\r\n        this.a = a;\r\n        this.b = b;\r\n        this.op = op;\r\n        this.ifNode = ifNode;\r\n        this.elseNode = elseNode;\r\n    }\r\n    CondNode.EQUAL = '==';\r\n    CondNode.NOT_EQUAL = '!=';\r\n    CondNode.GREATER = '>';\r\n    CondNode.GREATER_EQUAL = '>=';\r\n    CondNode.LESS = '<';\r\n    CondNode.LESS_EQUAL = '<=';\r\n    CondNode.prototype = Object.create(TempNode.prototype);\r\n    CondNode.prototype.constructor = CondNode;\r\n    CondNode.prototype.nodeType = 'Cond';\r\n    CondNode.prototype.getType = function (builder) {\r\n        if (this.ifNode) {\r\n            var ifType = this.ifNode.getType(builder);\r\n            var elseType = this.elseNode.getType(builder);\r\n            if (builder.getTypeLength(elseType) > builder.getTypeLength(ifType)) {\r\n                return elseType;\r\n            }\r\n            return ifType;\r\n        }\r\n        return 'b';\r\n    };\r\n    CondNode.prototype.getCondType = function (builder) {\r\n        if (builder.getTypeLength(this.b.getType(builder)) > builder.getTypeLength(this.a.getType(builder))) {\r\n            return this.b.getType(builder);\r\n        }\r\n        return this.a.getType(builder);\r\n    };\r\n    CondNode.prototype.generate = function (builder, output) {\r\n        var type = this.getType(builder), condType = this.getCondType(builder), a = this.a.build(builder, condType), b = this.b.build(builder, condType), code;\r\n        if (this.ifNode) {\r\n            var ifCode = this.ifNode.build(builder, type), elseCode = this.elseNode.build(builder, type);\r\n            code = '( ' + [\r\n                a,\r\n                this.op,\r\n                b,\r\n                '?',\r\n                ifCode,\r\n                ':',\r\n                elseCode\r\n            ].join(' ') + ' )';\r\n        } else {\r\n            code = '( ' + a + ' ' + this.op + ' ' + b + ' )';\r\n        }\r\n        return builder.format(code, this.getType(builder), output);\r\n    };\r\n    CondNode.prototype.copy = function (source) {\r\n        TempNode.prototype.copy.call(this, source);\r\n        this.a = source.a;\r\n        this.b = source.b;\r\n        this.op = source.op;\r\n        this.ifNode = source.ifNode;\r\n        this.elseNode = source.elseNode;\r\n        return this;\r\n    };\r\n    CondNode.prototype.toJSON = function (meta) {\r\n        var data = this.getJSONNode(meta);\r\n        if (!data) {\r\n            data = this.createJSONNode(meta);\r\n            data.a = this.a.toJSON(meta).uuid;\r\n            data.b = this.b.toJSON(meta).uuid;\r\n            data.op = this.op;\r\n            if (data.ifNode)\r\n                data.ifNode = this.ifNode.toJSON(meta).uuid;\r\n            if (data.elseNode)\r\n                data.elseNode = this.elseNode.toJSON(meta).uuid;\r\n        }\r\n        return data;\r\n    };\r\n    return CondNode;\r\n});"]}