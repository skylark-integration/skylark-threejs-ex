{"version":3,"sources":["nodes/utils/SwitchNode.js"],"names":["define","Node","SwitchNode","node","components","call","this","prototype","Object","create","constructor","nodeType","getType","builder","getTypeFromLength","length","generate","output","type","build","inputLength","getTypeLength","i","outputLength","colorToVectorProperties","len","Math","max","getIndexByElement","charAt","idx","getElementByIndex","format","copy","source","toJSON","meta","data","getJSONNode","createJSONNode","uuid"],"mappings":";;;;;;;AAAAA,QACI,gBACD,SACCC,GAEA,aACA,SAASC,EAAWC,EAAMC,GACtBH,EAAKI,KAAKC,MACVA,KAAKH,KAAOA,EACZG,KAAKF,WAAaA,GAAc,IA6CpC,OA3CAF,EAAWK,UAAYC,OAAOC,OAAOR,EAAKM,WAC1CL,EAAWK,UAAUG,YAAcR,EACnCA,EAAWK,UAAUI,SAAW,SAChCT,EAAWK,UAAUK,QAAU,SAAUC,GACrC,OAAOA,EAAQC,kBAAkBR,KAAKF,WAAWW,SAErDb,EAAWK,UAAUS,SAAW,SAAUH,EAASI,GAC/C,IAAIC,EAAOZ,KAAKH,KAAKS,QAAQC,GAAUV,EAAOG,KAAKH,KAAKgB,MAAMN,EAASK,GAAOE,EAAcP,EAAQQ,cAAcH,GAAQ,EAC1H,GAAIE,EAAc,EAAG,CACjB,IACIE,EADAC,EAAe,EAAGnB,EAAaS,EAAQW,wBAAwBlB,KAAKF,YACjEqB,EAAMrB,EAAWW,OACxB,IAAKO,EAAI,EAAGA,EAAIG,EAAKH,IACjBC,EAAeG,KAAKC,IAAIJ,EAAcV,EAAQe,kBAAkBxB,EAAWyB,OAAOP,KAKtF,IAHIC,EAAeH,IACfG,EAAeH,GACnBjB,GAAQ,IACHmB,EAAI,EAAGA,EAAIG,EAAKH,IAAK,CACtB,IAAIQ,EAAMjB,EAAQe,kBAAkBxB,EAAWyB,OAAOP,IAClDQ,EAAMP,IACNO,EAAMP,GACVpB,GAAQU,EAAQkB,kBAAkBD,GAEtC,OAAOjB,EAAQmB,OAAO7B,EAAMG,KAAKM,QAAQC,GAAUI,GAEnD,OAAOJ,EAAQmB,OAAO7B,EAAMe,EAAMD,IAG1Cf,EAAWK,UAAU0B,KAAO,SAAUC,GAIlC,OAHAjC,EAAKM,UAAU0B,KAAK5B,KAAKC,KAAM4B,GAC/B5B,KAAKH,KAAO+B,EAAO/B,KACnBG,KAAKF,WAAa8B,EAAO9B,WAClBE,MAEXJ,EAAWK,UAAU4B,OAAS,SAAUC,GACpC,IAAIC,EAAO/B,KAAKgC,YAAYF,GAM5B,OALKC,KACDA,EAAO/B,KAAKiC,eAAeH,IACtBjC,KAAOG,KAAKH,KAAKgC,OAAOC,GAAMI,KACnCH,EAAKjC,WAAaE,KAAKF,YAEpBiC,GAEJnC","file":"../../../nodes/utils/SwitchNode.js","sourcesContent":["define([\r\n    '../core/Node'\r\n], function (\r\n    Node\r\n) {\r\n    'use strict';\r\n    function SwitchNode(node, components) {\r\n        Node.call(this);\r\n        this.node = node;\r\n        this.components = components || 'x';\r\n    }\r\n    SwitchNode.prototype = Object.create(Node.prototype);\r\n    SwitchNode.prototype.constructor = SwitchNode;\r\n    SwitchNode.prototype.nodeType = 'Switch';\r\n    SwitchNode.prototype.getType = function (builder) {\r\n        return builder.getTypeFromLength(this.components.length);\r\n    };\r\n    SwitchNode.prototype.generate = function (builder, output) {\r\n        var type = this.node.getType(builder), node = this.node.build(builder, type), inputLength = builder.getTypeLength(type) - 1;\r\n        if (inputLength > 0) {\r\n            var outputLength = 0, components = builder.colorToVectorProperties(this.components);\r\n            var i, len = components.length;\r\n            for (i = 0; i < len; i++) {\r\n                outputLength = Math.max(outputLength, builder.getIndexByElement(components.charAt(i)));\r\n            }\r\n            if (outputLength > inputLength)\r\n                outputLength = inputLength;\r\n            node += '.';\r\n            for (i = 0; i < len; i++) {\r\n                var idx = builder.getIndexByElement(components.charAt(i));\r\n                if (idx > outputLength)\r\n                    idx = outputLength;\r\n                node += builder.getElementByIndex(idx);\r\n            }\r\n            return builder.format(node, this.getType(builder), output);\r\n        } else {\r\n            return builder.format(node, type, output);\r\n        }\r\n    };\r\n    SwitchNode.prototype.copy = function (source) {\r\n        Node.prototype.copy.call(this, source);\r\n        this.node = source.node;\r\n        this.components = source.components;\r\n        return this;\r\n    };\r\n    SwitchNode.prototype.toJSON = function (meta) {\r\n        var data = this.getJSONNode(meta);\r\n        if (!data) {\r\n            data = this.createJSONNode(meta);\r\n            data.node = this.node.toJSON(meta).uuid;\r\n            data.components = this.components;\r\n        }\r\n        return data;\r\n    };\r\n    return SwitchNode;\r\n});"]}