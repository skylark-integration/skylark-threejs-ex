{"version":3,"sources":["nodes/utils/TimerNode.js"],"names":["define","FloatNode","NodeLib","TimerNode","scale","scope","timeScale","call","this","undefined","GLOBAL","LOCAL","DELTA","prototype","Object","create","constructor","nodeType","getReadonly","getUnique","updateFrame","frame","value","delta","time","copy","source","toJSON","meta","data","getJSONNode","createJSONNode","addKeyword"],"mappings":";;;;;;;AAAAA,QACI,sBACA,mBACD,SACCC,EACAC,GAEA,aACA,SAASC,EAAUC,EAAOC,EAAOC,GAC7BL,EAAUM,KAAKC,MACfA,KAAKJ,WAAkBK,IAAVL,EAAsBA,EAAQ,EAC3CI,KAAKH,MAAQA,GAASF,EAAUO,OAChCF,KAAKF,eAA0BG,IAAdH,EAA0BA,OAAsBG,IAAVL,EA+C3D,OA7CAD,EAAUO,OAAS,SACnBP,EAAUQ,MAAQ,QAClBR,EAAUS,MAAQ,QAClBT,EAAUU,UAAYC,OAAOC,OAAOd,EAAUY,WAC9CV,EAAUU,UAAUG,YAAcb,EAClCA,EAAUU,UAAUI,SAAW,QAC/Bd,EAAUU,UAAUK,YAAc,WAC9B,OAAO,GAEXf,EAAUU,UAAUM,UAAY,WAC5B,OAAOX,KAAKF,YAAcE,KAAKH,QAAUF,EAAUO,QAAUF,KAAKH,QAAUF,EAAUS,QAE1FT,EAAUU,UAAUO,YAAc,SAAUC,GACxC,IAAIjB,EAAQI,KAAKF,UAAYE,KAAKJ,MAAQ,EAC1C,OAAQI,KAAKH,OACb,KAAKF,EAAUQ,MACXH,KAAKc,OAASD,EAAME,MAAQnB,EAC5B,MACJ,KAAKD,EAAUS,MACXJ,KAAKc,MAAQD,EAAME,MAAQnB,EAC3B,MACJ,QACII,KAAKc,MAAQD,EAAMG,KAAOpB,IAGlCD,EAAUU,UAAUY,KAAO,SAAUC,GAKjC,OAJAzB,EAAUY,UAAUY,KAAKlB,KAAKC,KAAMkB,GACpClB,KAAKH,MAAQqB,EAAOrB,MACpBG,KAAKJ,MAAQsB,EAAOtB,MACpBI,KAAKF,UAAYoB,EAAOpB,UACjBE,MAEXL,EAAUU,UAAUc,OAAS,SAAUC,GACnC,IAAIC,EAAOrB,KAAKsB,YAAYF,GAO5B,OANKC,KACDA,EAAOrB,KAAKuB,eAAeH,IACtBvB,MAAQG,KAAKH,MAClBwB,EAAKzB,MAAQI,KAAKJ,MAClByB,EAAKvB,UAAYE,KAAKF,WAEnBuB,GAEX3B,EAAQ8B,WAAW,OAAQ,WACvB,OAAO,IAAI7B,IAERA","file":"../../../nodes/utils/TimerNode.js","sourcesContent":["define([\r\n    '../inputs/FloatNode',\r\n    '../core/NodeLib'\r\n], function (\r\n    FloatNode, \r\n    NodeLib\r\n) {\r\n    'use strict';\r\n    function TimerNode(scale, scope, timeScale) {\r\n        FloatNode.call(this);\r\n        this.scale = scale !== undefined ? scale : 1;\r\n        this.scope = scope || TimerNode.GLOBAL;\r\n        this.timeScale = timeScale !== undefined ? timeScale : scale !== undefined;\r\n    }\r\n    TimerNode.GLOBAL = 'global';\r\n    TimerNode.LOCAL = 'local';\r\n    TimerNode.DELTA = 'delta';\r\n    TimerNode.prototype = Object.create(FloatNode.prototype);\r\n    TimerNode.prototype.constructor = TimerNode;\r\n    TimerNode.prototype.nodeType = 'Timer';\r\n    TimerNode.prototype.getReadonly = function () {\r\n        return false;\r\n    };\r\n    TimerNode.prototype.getUnique = function () {\r\n        return this.timeScale && (this.scope === TimerNode.GLOBAL || this.scope === TimerNode.DELTA);\r\n    };\r\n    TimerNode.prototype.updateFrame = function (frame) {\r\n        var scale = this.timeScale ? this.scale : 1;\r\n        switch (this.scope) {\r\n        case TimerNode.LOCAL:\r\n            this.value += frame.delta * scale;\r\n            break;\r\n        case TimerNode.DELTA:\r\n            this.value = frame.delta * scale;\r\n            break;\r\n        default:\r\n            this.value = frame.time * scale;\r\n        }\r\n    };\r\n    TimerNode.prototype.copy = function (source) {\r\n        FloatNode.prototype.copy.call(this, source);\r\n        this.scope = source.scope;\r\n        this.scale = source.scale;\r\n        this.timeScale = source.timeScale;\r\n        return this;\r\n    };\r\n    TimerNode.prototype.toJSON = function (meta) {\r\n        var data = this.getJSONNode(meta);\r\n        if (!data) {\r\n            data = this.createJSONNode(meta);\r\n            data.scope = this.scope;\r\n            data.scale = this.scale;\r\n            data.timeScale = this.timeScale;\r\n        }\r\n        return data;\r\n    };\r\n    NodeLib.addKeyword('time', function () {\r\n        return new TimerNode();\r\n    });\r\n    return TimerNode;\r\n});"]}