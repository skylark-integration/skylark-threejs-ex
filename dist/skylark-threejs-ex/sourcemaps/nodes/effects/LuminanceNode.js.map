{"version":3,"sources":["nodes/effects/LuminanceNode.js"],"names":["define","TempNode","ConstNode","FunctionNode","LuminanceNode","rgb","call","this","LUMA","Nodes","luminance","join","prototype","Object","create","constructor","nodeType","generate","builder","output","include","format","build","getType","copy","source","toJSON","meta","data","getJSONNode","createJSONNode","uuid"],"mappings":";;;;;;;AAAAA,QACI,mBACA,oBACA,wBACD,SACCC,EACAC,EACAC,GAEA,aACA,SAASC,EAAcC,GACnBJ,EAASK,KAAKC,KAAM,KACpBA,KAAKF,IAAMA,EAEO,IACdG,EA+BR,OAhCAJ,EAAcK,OAQND,KAPAA,EAAO,IAAIN,EAAU,4CAQrBQ,UAPY,IAAIP,GAChB,gCACA,6BACA,KACFQ,KAAK,OAAQH,KAMnBJ,EAAcQ,UAAYC,OAAOC,OAAOb,EAASW,WACjDR,EAAcQ,UAAUG,YAAcX,EACtCA,EAAcQ,UAAUI,SAAW,YACnCZ,EAAcQ,UAAUK,SAAW,SAAUC,EAASC,GAClD,IAAIT,EAAYQ,EAAQE,QAAQhB,EAAcK,MAAMC,WACpD,OAAOQ,EAAQG,OAAOX,EAAY,KAAOH,KAAKF,IAAIiB,MAAMJ,EAAS,MAAQ,KAAMX,KAAKgB,QAAQL,GAAUC,IAE1Gf,EAAcQ,UAAUY,KAAO,SAAUC,GAGrC,OAFAxB,EAASW,UAAUY,KAAKlB,KAAKC,KAAMkB,GACnClB,KAAKF,IAAMoB,EAAOpB,IACXE,MAEXH,EAAcQ,UAAUc,OAAS,SAAUC,GACvC,IAAIC,EAAOrB,KAAKsB,YAAYF,GAK5B,OAJKC,KACDA,EAAOrB,KAAKuB,eAAeH,IACtBtB,IAAME,KAAKF,IAAIqB,OAAOC,GAAMI,MAE9BH,GAEJxB","file":"../../../nodes/effects/LuminanceNode.js","sourcesContent":["define([\r\n    '../core/TempNode',\r\n    '../core/ConstNode',\r\n    '../core/FunctionNode'\r\n], function (\r\n    TempNode, \r\n    ConstNode, \r\n    FunctionNode\r\n) {\r\n    'use strict';\r\n    function LuminanceNode(rgb) {\r\n        TempNode.call(this, 'f');\r\n        this.rgb = rgb;\r\n    }\r\n    LuminanceNode.Nodes = function () {\r\n        var LUMA = new ConstNode('vec3 LUMA vec3( 0.2125, 0.7154, 0.0721 )');\r\n        var luminance = new FunctionNode([\r\n            'float luminance( vec3 rgb ) {',\r\n            '\\treturn dot( rgb, LUMA );',\r\n            '}'\r\n        ].join('\\n'), [LUMA]);\r\n        return {\r\n            LUMA: LUMA,\r\n            luminance: luminance\r\n        };\r\n    }();\r\n    LuminanceNode.prototype = Object.create(TempNode.prototype);\r\n    LuminanceNode.prototype.constructor = LuminanceNode;\r\n    LuminanceNode.prototype.nodeType = 'Luminance';\r\n    LuminanceNode.prototype.generate = function (builder, output) {\r\n        var luminance = builder.include(LuminanceNode.Nodes.luminance);\r\n        return builder.format(luminance + '( ' + this.rgb.build(builder, 'v3') + ' )', this.getType(builder), output);\r\n    };\r\n    LuminanceNode.prototype.copy = function (source) {\r\n        TempNode.prototype.copy.call(this, source);\r\n        this.rgb = source.rgb;\r\n        return this;\r\n    };\r\n    LuminanceNode.prototype.toJSON = function (meta) {\r\n        var data = this.getJSONNode(meta);\r\n        if (!data) {\r\n            data = this.createJSONNode(meta);\r\n            data.rgb = this.rgb.toJSON(meta).uuid;\r\n        }\r\n        return data;\r\n    };\r\n    return LuminanceNode;\r\n});"]}