{"version":3,"sources":["nodes/core/StructNode.js"],"names":["define","TempNode","declarationRegexp","propertiesRegexp","StructNode","src","call","this","parse","prototype","Object","create","constructor","nodeType","getType","builder","getTypeByFormat","name","getInputByName","i","inputs","length","generate","output","format","declaration","exec","match","properties","push","type","toJSON","meta","data","getJSONNode","createJSONNode"],"mappings":";;;;;;;AAAAA,QACI,cACD,SAAUC,GACT,aACA,IAAIC,EAAoB,8CAA+CC,EAAmB,+BAC1F,SAASC,EAAWC,GAChBJ,EAASK,KAAKC,MACdA,KAAKC,MAAMH,GAiDf,OA/CAD,EAAWK,UAAYC,OAAOC,OAAOV,EAASQ,WAC9CL,EAAWK,UAAUG,YAAcR,EACnCA,EAAWK,UAAUI,SAAW,SAChCT,EAAWK,UAAUK,QAAU,SAAUC,GACrC,OAAOA,EAAQC,gBAAgBT,KAAKU,OAExCb,EAAWK,UAAUS,eAAiB,SAAUD,GAE5C,IADA,IAAIE,EAAIZ,KAAKa,OAAOC,OACbF,KACH,GAAIZ,KAAKa,OAAOD,GAAGF,OAASA,EACxB,OAAOV,KAAKa,OAAOD,IAI/Bf,EAAWK,UAAUa,SAAW,SAAUP,EAASQ,GAC/C,MAAe,WAAXA,EACOhB,KAAKF,IAAM,IAEXU,EAAQS,OAAO,KAAOjB,KAAKF,IAAM,KAAME,KAAKO,QAAQC,GAAUQ,IAG7EnB,EAAWK,UAAUD,MAAQ,SAAUH,GACnCE,KAAKF,IAAMA,GAAO,GAClBE,KAAKa,UACL,IAAIK,EAAcvB,EAAkBwB,KAAKnB,KAAKF,KAC9C,GAAIoB,EAAa,CAEb,IADA,IAAiCE,EAA7BC,EAAaH,EAAY,GACtBE,EAAQxB,EAAiBuB,KAAKE,IACjCrB,KAAKa,OAAOS,MACRC,KAAMH,EAAM,GACZV,KAAMU,EAAM,KAGpBpB,KAAKU,KAAOQ,EAAY,QAExBlB,KAAKU,KAAO,GAEhBV,KAAKuB,KAAOvB,KAAKU,MAErBb,EAAWK,UAAUsB,OAAS,SAAUC,GACpC,IAAIC,EAAO1B,KAAK2B,YAAYF,GAK5B,OAJKC,KACDA,EAAO1B,KAAK4B,eAAeH,IACtB3B,IAAME,KAAKF,KAEb4B,GAEJ7B","file":"../../../nodes/core/StructNode.js","sourcesContent":["define([\n    './TempNode'\n], function (TempNode) {\n    'use strict';\n    var declarationRegexp = /^struct\\s*([a-z_0-9]+)\\s*{\\s*((.|\\n)*?)}/img, propertiesRegexp = /\\s*(\\w*?)\\s*(\\w*?)(\\=|\\;)/img;\n    function StructNode(src) {\n        TempNode.call(this);\n        this.parse(src);\n    }\n    StructNode.prototype = Object.create(TempNode.prototype);\n    StructNode.prototype.constructor = StructNode;\n    StructNode.prototype.nodeType = 'Struct';\n    StructNode.prototype.getType = function (builder) {\n        return builder.getTypeByFormat(this.name);\n    };\n    StructNode.prototype.getInputByName = function (name) {\n        var i = this.inputs.length;\n        while (i--) {\n            if (this.inputs[i].name === name) {\n                return this.inputs[i];\n            }\n        }\n    };\n    StructNode.prototype.generate = function (builder, output) {\n        if (output === 'source') {\n            return this.src + ';';\n        } else {\n            return builder.format('( ' + this.src + ' )', this.getType(builder), output);\n        }\n    };\n    StructNode.prototype.parse = function (src) {\n        this.src = src || '';\n        this.inputs = [];\n        var declaration = declarationRegexp.exec(this.src);\n        if (declaration) {\n            var properties = declaration[2], match;\n            while (match = propertiesRegexp.exec(properties)) {\n                this.inputs.push({\n                    type: match[1],\n                    name: match[2]\n                });\n            }\n            this.name = declaration[1];\n        } else {\n            this.name = '';\n        }\n        this.type = this.name;\n    };\n    StructNode.prototype.toJSON = function (meta) {\n        var data = this.getJSONNode(meta);\n        if (!data) {\n            data = this.createJSONNode(meta);\n            data.src = this.src;\n        }\n        return data;\n    };\n    return StructNode;\n});"]}