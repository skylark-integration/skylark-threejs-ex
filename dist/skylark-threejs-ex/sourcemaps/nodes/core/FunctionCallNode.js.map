{"version":3,"sources":["nodes/core/FunctionCallNode.js"],"names":["define","TempNode","FunctionCallNode","func","inputs","call","this","setFunction","prototype","Object","create","constructor","nodeType","value","getFunction","getType","builder","generate","output","type","code","build","params","i","length","inpt","param","name","push","getTypeByFormat","join","format","copy","source","prop","toJSON","meta","data","getJSONNode","createJSONNode","uuid","node"],"mappings":";;;;;;;AAAAA,QACI,cACD,SAAUC,GACT,aACA,SAASC,EAAiBC,EAAMC,GAC5BH,EAASI,KAAKC,MACdA,KAAKC,YAAYJ,EAAMC,GAiD3B,OA/CAF,EAAiBM,UAAYC,OAAOC,OAAOT,EAASO,WACpDN,EAAiBM,UAAUG,YAAcT,EACzCA,EAAiBM,UAAUI,SAAW,eACtCV,EAAiBM,UAAUD,YAAc,SAAUJ,EAAMC,GACrDE,KAAKO,MAAQV,EACbG,KAAKF,OAASA,OAElBF,EAAiBM,UAAUM,YAAc,WACrC,OAAOR,KAAKO,OAEhBX,EAAiBM,UAAUO,QAAU,SAAUC,GAC3C,OAAOV,KAAKO,MAAME,QAAQC,IAE9Bd,EAAiBM,UAAUS,SAAW,SAAUD,EAASE,GAGrD,IAFA,IAAIC,EAAOb,KAAKS,QAAQC,GAAUb,EAAOG,KAAKO,MAC1CO,EAAOjB,EAAKkB,MAAML,EAASE,GAAU,KAAMI,KACtCC,EAAI,EAAGA,EAAIpB,EAAKC,OAAOoB,OAAQD,IAAK,CACzC,IAAIE,EAAOtB,EAAKC,OAAOmB,GAAIG,EAAQpB,KAAKF,OAAOmB,IAAMjB,KAAKF,OAAOqB,EAAKE,MACtEL,EAAOM,KAAKF,EAAML,MAAML,EAASA,EAAQa,gBAAgBJ,EAAKN,QAGlE,OADAC,GAAQE,EAAOQ,KAAK,MAAQ,KACrBd,EAAQe,OAAOX,EAAMD,EAAMD,IAEtChB,EAAiBM,UAAUwB,KAAO,SAAUC,GAExC,IAAK,IAAIC,KADTjC,EAASO,UAAUwB,KAAK3B,KAAKC,KAAM2B,GAClBA,EAAO7B,OACpBE,KAAKF,OAAO8B,GAAQD,EAAO7B,OAAO8B,GAGtC,OADA5B,KAAKO,MAAQoB,EAAOpB,MACbP,MAEXJ,EAAiBM,UAAU2B,OAAS,SAAUC,GAC1C,IAAIC,EAAO/B,KAAKgC,YAAYF,GAC5B,IAAKC,EAAM,CACP,IAAIlC,EAAOG,KAAKO,MAGhB,IAFAwB,EAAO/B,KAAKiC,eAAeH,IACtBvB,MAAQP,KAAKO,MAAMsB,OAAOC,GAAMI,KACjCrC,EAAKC,OAAOoB,OAAQ,CACpBa,EAAKjC,UACL,IAAK,IAAImB,EAAI,EAAGA,EAAIpB,EAAKC,OAAOoB,OAAQD,IAAK,CACzC,IAAIE,EAAOtB,EAAKC,OAAOmB,GAAIkB,EAAOnC,KAAKF,OAAOmB,IAAMjB,KAAKF,OAAOqB,EAAKE,MACrEU,EAAKjC,OAAOqB,EAAKE,MAAQc,EAAKN,OAAOC,GAAMI,OAIvD,OAAOH,GAEJnC","file":"../../../nodes/core/FunctionCallNode.js","sourcesContent":["define([\r\n    './TempNode'\r\n], function (TempNode) {\r\n    'use strict';\r\n    function FunctionCallNode(func, inputs) {\r\n        TempNode.call(this);\r\n        this.setFunction(func, inputs);\r\n    }\r\n    FunctionCallNode.prototype = Object.create(TempNode.prototype);\r\n    FunctionCallNode.prototype.constructor = FunctionCallNode;\r\n    FunctionCallNode.prototype.nodeType = 'FunctionCall';\r\n    FunctionCallNode.prototype.setFunction = function (func, inputs) {\r\n        this.value = func;\r\n        this.inputs = inputs || [];\r\n    };\r\n    FunctionCallNode.prototype.getFunction = function () {\r\n        return this.value;\r\n    };\r\n    FunctionCallNode.prototype.getType = function (builder) {\r\n        return this.value.getType(builder);\r\n    };\r\n    FunctionCallNode.prototype.generate = function (builder, output) {\r\n        var type = this.getType(builder), func = this.value;\r\n        var code = func.build(builder, output) + '( ', params = [];\r\n        for (var i = 0; i < func.inputs.length; i++) {\r\n            var inpt = func.inputs[i], param = this.inputs[i] || this.inputs[inpt.name];\r\n            params.push(param.build(builder, builder.getTypeByFormat(inpt.type)));\r\n        }\r\n        code += params.join(', ') + ' )';\r\n        return builder.format(code, type, output);\r\n    };\r\n    FunctionCallNode.prototype.copy = function (source) {\r\n        TempNode.prototype.copy.call(this, source);\r\n        for (var prop in source.inputs) {\r\n            this.inputs[prop] = source.inputs[prop];\r\n        }\r\n        this.value = source.value;\r\n        return this;\r\n    };\r\n    FunctionCallNode.prototype.toJSON = function (meta) {\r\n        var data = this.getJSONNode(meta);\r\n        if (!data) {\r\n            var func = this.value;\r\n            data = this.createJSONNode(meta);\r\n            data.value = this.value.toJSON(meta).uuid;\r\n            if (func.inputs.length) {\r\n                data.inputs = {};\r\n                for (var i = 0; i < func.inputs.length; i++) {\r\n                    var inpt = func.inputs[i], node = this.inputs[i] || this.inputs[inpt.name];\r\n                    data.inputs[inpt.name] = node.toJSON(meta).uuid;\r\n                }\r\n            }\r\n        }\r\n        return data;\r\n    };\r\n    return FunctionCallNode;\r\n});"]}