{"version":3,"sources":["lines/Wireframe.js"],"names":["define","THREE","LineSegmentsGeometry","LineMaterial","start","end","Wireframe","geometry","material","Mesh","call","this","type","undefined","color","Math","random","prototype","Object","assign","create","constructor","isWireframe","computeLineDistances","Vector3","instanceStart","attributes","instanceEnd","lineDistances","Float32Array","data","count","i","j","l","fromBufferAttribute","distanceTo","instanceDistanceBuffer","InstancedInterleavedBuffer","setAttribute","InterleavedBufferAttribute"],"mappings":";;;;;;;AAAAA,QACI,kBACA,yBACA,kBACD,SAAUC,EAAOC,EAAsBC,GACtC,aACA,IAUYC,EACAC,EAXRC,EAAY,SAAUC,EAAUC,GAChCP,EAAMQ,KAAKC,KAAKC,MAChBA,KAAKC,KAAO,YACZD,KAAKJ,cAAwBM,IAAbN,EAAyBA,EAAW,IAAIL,EACxDS,KAAKH,cAAwBK,IAAbL,EAAyBA,EAAW,IAAIL,GAAeW,MAAuB,SAAhBC,KAAKC,YA0BvF,OAxBAV,EAAUW,UAAYC,OAAOC,OAAOD,OAAOE,OAAOnB,EAAMQ,KAAKQ,YACzDI,YAAaf,EACbgB,aAAa,EACbC,sBACQnB,EAAQ,IAAIH,EAAMuB,QAClBnB,EAAM,IAAIJ,EAAMuB,QACb,WAKH,IAJA,IAAIjB,EAAWI,KAAKJ,SAChBkB,EAAgBlB,EAASmB,WAAWD,cACpCE,EAAcpB,EAASmB,WAAWC,YAClCC,EAAgB,IAAIC,aAAa,EAAIJ,EAAcK,KAAKC,OACnDC,EAAI,EAAGC,EAAI,EAAGC,EAAIT,EAAcK,KAAKC,MAAOC,EAAIE,EAAGF,IAAKC,GAAK,EAClE7B,EAAM+B,oBAAoBV,EAAeO,GACzC3B,EAAI8B,oBAAoBR,EAAaK,GACrCJ,EAAcK,GAAW,IAANA,EAAU,EAAIL,EAAcK,EAAI,GACnDL,EAAcK,EAAI,GAAKL,EAAcK,GAAK7B,EAAMgC,WAAW/B,GAE/D,IAAIgC,EAAyB,IAAIpC,EAAMqC,2BAA2BV,EAAe,EAAG,GAGpF,OAFArB,EAASgC,aAAa,wBAAyB,IAAItC,EAAMuC,2BAA2BH,EAAwB,EAAG,IAC/G9B,EAASgC,aAAa,sBAAuB,IAAItC,EAAMuC,2BAA2BH,EAAwB,EAAG,IACtG1B,SAIZL","file":"../../lines/Wireframe.js","sourcesContent":["define([\n    \"skylark-threejs\",\n    './LineSegmentsGeometry',\n    './LineMaterial'\n], function (THREE, LineSegmentsGeometry, LineMaterial) {\n    'use strict';\n    var Wireframe = function (geometry, material) {\n        THREE.Mesh.call(this);\n        this.type = 'Wireframe';\n        this.geometry = geometry !== undefined ? geometry : new LineSegmentsGeometry();\n        this.material = material !== undefined ? material : new LineMaterial({ color: Math.random() * 16777215 });\n    };\n    Wireframe.prototype = Object.assign(Object.create(THREE.Mesh.prototype), {\n        constructor: Wireframe,\n        isWireframe: true,\n        computeLineDistances: function () {\n            var start = new THREE.Vector3();\n            var end = new THREE.Vector3();\n            return function computeLineDistances() {\n                var geometry = this.geometry;\n                var instanceStart = geometry.attributes.instanceStart;\n                var instanceEnd = geometry.attributes.instanceEnd;\n                var lineDistances = new Float32Array(2 * instanceStart.data.count);\n                for (var i = 0, j = 0, l = instanceStart.data.count; i < l; i++, j += 2) {\n                    start.fromBufferAttribute(instanceStart, i);\n                    end.fromBufferAttribute(instanceEnd, i);\n                    lineDistances[j] = j === 0 ? 0 : lineDistances[j - 1];\n                    lineDistances[j + 1] = lineDistances[j] + start.distanceTo(end);\n                }\n                var instanceDistanceBuffer = new THREE.InstancedInterleavedBuffer(lineDistances, 2, 1);\n                geometry.setAttribute('instanceDistanceStart', new THREE.InterleavedBufferAttribute(instanceDistanceBuffer, 1, 0));\n                geometry.setAttribute('instanceDistanceEnd', new THREE.InterleavedBufferAttribute(instanceDistanceBuffer, 1, 1));\n                return this;\n            };\n        }()\n    });\n    return Wireframe ;\n});"]}