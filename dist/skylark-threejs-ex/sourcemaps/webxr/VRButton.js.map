{"version":3,"sources":["webxr/VRButton.js"],"names":["define","threex","VRButton","createButton","renderer","options","showWebXRNotFound","button","style","display","cursor","left","width","onmouseenter","onmouseleave","onclick","textContent","stylizeElement","element","position","bottom","padding","border","borderRadius","background","color","font","textAlign","opacity","outline","zIndex","referenceSpaceType","xr","setReferenceSpaceType","navigator","document","createElement","isSessionSupported","then","supported","currentSession","onSessionStarted","session","addEventListener","onSessionEnded","setSession","removeEventListener","requestSession","optionalFeatures","end","showEnterVR","message","window","isSecureContext","href","location","replace","innerHTML","textDecoration","webxr"],"mappings":";;;;;;;AAAAA,QACE,aACC,SAAUC,GACT,aACA,IAAIC,GACAC,aAAc,SAAUC,EAAUC,GAmD9B,SAASC,IARLC,EAAOC,MAAMC,QAAU,GACvBF,EAAOC,MAAME,OAAS,OACtBH,EAAOC,MAAMG,KAAO,mBACpBJ,EAAOC,MAAMI,MAAQ,QACrBL,EAAOM,aAAe,KACtBN,EAAOO,aAAe,KACtBP,EAAOQ,QAAU,KAIjBR,EAAOS,YAAc,mBAEzB,SAASC,EAAeC,GACpBA,EAAQV,MAAMW,SAAW,WACzBD,EAAQV,MAAMY,OAAS,OACvBF,EAAQV,MAAMa,QAAU,WACxBH,EAAQV,MAAMc,OAAS,iBACvBJ,EAAQV,MAAMe,aAAe,MAC7BL,EAAQV,MAAMgB,WAAa,kBAC3BN,EAAQV,MAAMiB,MAAQ,OACtBP,EAAQV,MAAMkB,KAAO,yBACrBR,EAAQV,MAAMmB,UAAY,SAC1BT,EAAQV,MAAMoB,QAAU,MACxBV,EAAQV,MAAMqB,QAAU,OACxBX,EAAQV,MAAMsB,OAAS,MAE3B,GApEIzB,GAAWA,EAAQ0B,oBACnB3B,EAAS4B,GAAGC,sBAAsB5B,EAAQ0B,oBAmE1C,OAAQG,UAAW,CACnB,IAAI3B,EAAS4B,SAASC,cAAc,UAMpC,OALA7B,EAAOC,MAAMC,QAAU,OACvBQ,EAAeV,GACf2B,UAAUF,GAAGK,mBAAmB,gBAAgBC,KAAK,SAAUC,GAC3DA,EAtER,WACI,IAAIC,EAAiB,KACrB,SAASC,EAAiBC,GACtBA,EAAQC,iBAAiB,MAAOC,GAChCxC,EAAS4B,GAAGa,WAAWH,GACvBnC,EAAOS,YAAc,UACrBwB,EAAiBE,EAErB,SAASE,IACLJ,EAAeM,oBAAoB,MAAOF,GAC1CrC,EAAOS,YAAc,WACrBwB,EAAiB,KAErBjC,EAAOC,MAAMC,QAAU,GACvBF,EAAOC,MAAME,OAAS,UACtBH,EAAOC,MAAMG,KAAO,mBACpBJ,EAAOC,MAAMI,MAAQ,QACrBL,EAAOS,YAAc,WACrBT,EAAOM,aAAe,WAClBN,EAAOC,MAAMoB,QAAU,OAE3BrB,EAAOO,aAAe,WAClBP,EAAOC,MAAMoB,QAAU,OAE3BrB,EAAOQ,QAAU,WACU,OAAnByB,EAOAN,UAAUF,GAAGe,eAAe,gBALxBC,kBACI,cACA,mBAGiDV,KAAKG,GAE9DD,EAAeS,OAoCPC,GAAgB5C,MAEzBC,EAEP,IAAI4C,EAAUhB,SAASC,cAAc,KAYrC,OAX+B,IAA3BgB,OAAOC,iBACPF,EAAQG,KAAOnB,SAASoB,SAASD,KAAKE,QAAQ,SAAU,UACxDL,EAAQM,UAAY,sBAEpBN,EAAQG,KAAO,4BACfH,EAAQM,UAAY,uBAExBN,EAAQ3C,MAAMG,KAAO,mBACrBwC,EAAQ3C,MAAMI,MAAQ,QACtBuC,EAAQ3C,MAAMkD,eAAiB,OAC/BzC,EAAekC,GACRA,IAInB,OAAOlD,EAAO0D,MAAMzD,SAAWA","file":"../../webxr/VRButton.js","sourcesContent":["define([\n  \"../threex\"\n], function (threex) {\n    'use strict';\n    var VRButton = {\n        createButton: function (renderer, options) {\n            if (options && options.referenceSpaceType) {\n                renderer.xr.setReferenceSpaceType(options.referenceSpaceType);\n            }\n            function showEnterVR() {\n                var currentSession = null;\n                function onSessionStarted(session) {\n                    session.addEventListener('end', onSessionEnded);\n                    renderer.xr.setSession(session);\n                    button.textContent = 'EXIT VR';\n                    currentSession = session;\n                }\n                function onSessionEnded() {\n                    currentSession.removeEventListener('end', onSessionEnded);\n                    button.textContent = 'ENTER VR';\n                    currentSession = null;\n                }\n                button.style.display = '';\n                button.style.cursor = 'pointer';\n                button.style.left = 'calc(50% - 50px)';\n                button.style.width = '100px';\n                button.textContent = 'ENTER VR';\n                button.onmouseenter = function () {\n                    button.style.opacity = '1.0';\n                };\n                button.onmouseleave = function () {\n                    button.style.opacity = '0.5';\n                };\n                button.onclick = function () {\n                    if (currentSession === null) {\n                        var sessionInit = {\n                            optionalFeatures: [\n                                'local-floor',\n                                'bounded-floor'\n                            ]\n                        };\n                        navigator.xr.requestSession('immersive-vr', sessionInit).then(onSessionStarted);\n                    } else {\n                        currentSession.end();\n                    }\n                };\n            }\n            function disableButton() {\n                button.style.display = '';\n                button.style.cursor = 'auto';\n                button.style.left = 'calc(50% - 75px)';\n                button.style.width = '150px';\n                button.onmouseenter = null;\n                button.onmouseleave = null;\n                button.onclick = null;\n            }\n            function showWebXRNotFound() {\n                disableButton();\n                button.textContent = 'VR NOT SUPPORTED';\n            }\n            function stylizeElement(element) {\n                element.style.position = 'absolute';\n                element.style.bottom = '20px';\n                element.style.padding = '12px 6px';\n                element.style.border = '1px solid #fff';\n                element.style.borderRadius = '4px';\n                element.style.background = 'rgba(0,0,0,0.1)';\n                element.style.color = '#fff';\n                element.style.font = 'normal 13px sans-serif';\n                element.style.textAlign = 'center';\n                element.style.opacity = '0.5';\n                element.style.outline = 'none';\n                element.style.zIndex = '999';\n            }\n            if ('xr' in navigator) {\n                var button = document.createElement('button');\n                button.style.display = 'none';\n                stylizeElement(button);\n                navigator.xr.isSessionSupported('immersive-vr').then(function (supported) {\n                    supported ? showEnterVR() : showWebXRNotFound();\n                });\n                return button;\n            } else {\n                var message = document.createElement('a');\n                if (window.isSecureContext === false) {\n                    message.href = document.location.href.replace(/^http:/, 'https:');\n                    message.innerHTML = 'WEBXR NEEDS HTTPS';\n                } else {\n                    message.href = 'https://immersiveweb.dev/';\n                    message.innerHTML = 'WEBXR NOT AVAILABLE';\n                }\n                message.style.left = 'calc(50% - 90px)';\n                message.style.width = '180px';\n                message.style.textDecoration = 'none';\n                stylizeElement(message);\n                return message;\n            }\n        }\n    };\n    return threex.webxr.VRButton = VRButton;\n});"]}