{"version":3,"sources":["webxr/ARButton.js"],"names":["define","createButton","renderer","sessionInit","showARNotSupported","button","style","display","cursor","left","width","onmouseenter","onmouseleave","onclick","textContent","stylizeElement","element","position","bottom","padding","border","borderRadius","background","color","font","textAlign","opacity","outline","zIndex","navigator","document","createElement","xr","isSessionSupported","then","supported","currentSession","onSessionStarted","session","addEventListener","onSessionEnded","setReferenceSpaceType","setSession","removeEventListener","requestSession","end","showStartAR","catch","message","window","isSecureContext","href","location","replace","innerHTML","textDecoration"],"mappings":";;;;;;;AAAAA,OAAO,WACH,aAwFA,OAtFIC,aAAc,SAAUC,EAAUC,MA2C9B,SAASC,IARLC,EAAOC,MAAMC,QAAU,GACvBF,EAAOC,MAAME,OAAS,OACtBH,EAAOC,MAAMG,KAAO,mBACpBJ,EAAOC,MAAMI,MAAQ,QACrBL,EAAOM,aAAe,KACtBN,EAAOO,aAAe,KACtBP,EAAOQ,QAAU,KAIjBR,EAAOS,YAAc,mBAEzB,SAASC,EAAeC,GACpBA,EAAQV,MAAMW,SAAW,WACzBD,EAAQV,MAAMY,OAAS,OACvBF,EAAQV,MAAMa,QAAU,WACxBH,EAAQV,MAAMc,OAAS,iBACvBJ,EAAQV,MAAMe,aAAe,MAC7BL,EAAQV,MAAMgB,WAAa,kBAC3BN,EAAQV,MAAMiB,MAAQ,OACtBP,EAAQV,MAAMkB,KAAO,yBACrBR,EAAQV,MAAMmB,UAAY,SAC1BT,EAAQV,MAAMoB,QAAU,MACxBV,EAAQV,MAAMqB,QAAU,OACxBX,EAAQV,MAAMsB,OAAS,MAE3B,GAAI,OAAQC,UAAW,CACnB,IAAIxB,EAASyB,SAASC,cAAc,UAMpC,OALA1B,EAAOC,MAAMC,QAAU,OACvBQ,EAAeV,GACfwB,UAAUG,GAAGC,mBAAmB,gBAAgBC,KAAK,SAAUC,GAC3DA,EAjER,WACI,IAAIC,EAAiB,KACrB,SAASC,EAAiBC,GACtBA,EAAQC,iBAAiB,MAAOC,GAChCtC,EAAS8B,GAAGS,sBAAsB,SAClCvC,EAAS8B,GAAGU,WAAWJ,GACvBjC,EAAOS,YAAc,UACrBsB,EAAiBE,EAErB,SAASE,IACLJ,EAAeO,oBAAoB,MAAOH,GAC1CnC,EAAOS,YAAc,WACrBsB,EAAiB,KAErB/B,EAAOC,MAAMC,QAAU,GACvBF,EAAOC,MAAME,OAAS,UACtBH,EAAOC,MAAMG,KAAO,mBACpBJ,EAAOC,MAAMI,MAAQ,QACrBL,EAAOS,YAAc,WACrBT,EAAOM,aAAe,WAClBN,EAAOC,MAAMoB,QAAU,OAE3BrB,EAAOO,aAAe,WAClBP,EAAOC,MAAMoB,QAAU,OAE3BrB,EAAOQ,QAAU,WACU,OAAnBuB,EACAP,UAAUG,GAAGY,eAAe,eAAgBzC,GAAa+B,KAAKG,GAE9DD,EAAeS,OAoCPC,GAAgB1C,MAC7B2C,MAAM3C,GACFC,EAEP,IAAI2C,EAAUlB,SAASC,cAAc,KAYrC,OAX+B,IAA3BkB,OAAOC,iBACPF,EAAQG,KAAOrB,SAASsB,SAASD,KAAKE,QAAQ,SAAU,UACxDL,EAAQM,UAAY,sBAEpBN,EAAQG,KAAO,4BACfH,EAAQM,UAAY,uBAExBN,EAAQ1C,MAAMG,KAAO,mBACrBuC,EAAQ1C,MAAMI,MAAQ,QACtBsC,EAAQ1C,MAAMiD,eAAiB,OAC/BxC,EAAeiC,GACRA","file":"../../webxr/ARButton.js","sourcesContent":["define(function () {\n    'use strict';\n    var ARButton = {\n        createButton: function (renderer, sessionInit = {}) {\n            function showStartAR() {\n                var currentSession = null;\n                function onSessionStarted(session) {\n                    session.addEventListener('end', onSessionEnded);\n                    renderer.xr.setReferenceSpaceType('local');\n                    renderer.xr.setSession(session);\n                    button.textContent = 'STOP AR';\n                    currentSession = session;\n                }\n                function onSessionEnded() {\n                    currentSession.removeEventListener('end', onSessionEnded);\n                    button.textContent = 'START AR';\n                    currentSession = null;\n                }\n                button.style.display = '';\n                button.style.cursor = 'pointer';\n                button.style.left = 'calc(50% - 50px)';\n                button.style.width = '100px';\n                button.textContent = 'START AR';\n                button.onmouseenter = function () {\n                    button.style.opacity = '1.0';\n                };\n                button.onmouseleave = function () {\n                    button.style.opacity = '0.5';\n                };\n                button.onclick = function () {\n                    if (currentSession === null) {\n                        navigator.xr.requestSession('immersive-ar', sessionInit).then(onSessionStarted);\n                    } else {\n                        currentSession.end();\n                    }\n                };\n            }\n            function disableButton() {\n                button.style.display = '';\n                button.style.cursor = 'auto';\n                button.style.left = 'calc(50% - 75px)';\n                button.style.width = '150px';\n                button.onmouseenter = null;\n                button.onmouseleave = null;\n                button.onclick = null;\n            }\n            function showARNotSupported() {\n                disableButton();\n                button.textContent = 'AR NOT SUPPORTED';\n            }\n            function stylizeElement(element) {\n                element.style.position = 'absolute';\n                element.style.bottom = '20px';\n                element.style.padding = '12px 6px';\n                element.style.border = '1px solid #fff';\n                element.style.borderRadius = '4px';\n                element.style.background = 'rgba(0,0,0,0.1)';\n                element.style.color = '#fff';\n                element.style.font = 'normal 13px sans-serif';\n                element.style.textAlign = 'center';\n                element.style.opacity = '0.5';\n                element.style.outline = 'none';\n                element.style.zIndex = '999';\n            }\n            if ('xr' in navigator) {\n                var button = document.createElement('button');\n                button.style.display = 'none';\n                stylizeElement(button);\n                navigator.xr.isSessionSupported('immersive-ar').then(function (supported) {\n                    supported ? showStartAR() : showARNotSupported();\n                }).catch(showARNotSupported);\n                return button;\n            } else {\n                var message = document.createElement('a');\n                if (window.isSecureContext === false) {\n                    message.href = document.location.href.replace(/^http:/, 'https:');\n                    message.innerHTML = 'WEBXR NEEDS HTTPS';\n                } else {\n                    message.href = 'https://immersiveweb.dev/';\n                    message.innerHTML = 'WEBXR NOT AVAILABLE';\n                }\n                message.style.left = 'calc(50% - 90px)';\n                message.style.width = '180px';\n                message.style.textDecoration = 'none';\n                stylizeElement(message);\n                return message;\n            }\n        }\n    };\n    return ARButton;\n});"]}