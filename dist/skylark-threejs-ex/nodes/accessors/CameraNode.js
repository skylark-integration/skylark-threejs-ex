/**
 * skylark-threejs-ex - A version of threejs extentions library that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-threejs-ex/
 * @license MIT
 */
define(["../core/TempNode","../core/FunctionNode","../inputs/FloatNode","../accessors/PositionNode"],function(e,t,o,r){"use strict";function a(t,o){e.call(this,"v3"),this.setScope(t||a.POSITION),this.setCamera(o)}return a.Nodes={depthColor:new t(["float depthColor( float mNear, float mFar ) {","\t#ifdef USE_LOGDEPTHBUF_EXT","\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;","\t#else","\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;","\t#endif","\treturn 1.0 - smoothstep( mNear, mFar, depth );","}"].join("\n"))},a.POSITION="position",a.DEPTH="depth",a.TO_VERTEX="toVertex",a.prototype=Object.create(e.prototype),a.prototype.constructor=a,a.prototype.nodeType="Camera",a.prototype.setCamera=function(e){this.camera=e,this.updateFrame=void 0!==e?this.onUpdateFrame:void 0},a.prototype.setScope=function(e){switch(this.scope){case a.DEPTH:delete this.near,delete this.far}switch(this.scope=e,e){case a.DEPTH:var t=this.camera;this.near=new o(t?t.near:1),this.far=new o(t?t.far:1200)}},a.prototype.getType=function(){switch(this.scope){case a.DEPTH:return"f"}return this.type},a.prototype.getUnique=function(){switch(this.scope){case a.DEPTH:case a.TO_VERTEX:return!0}return!1},a.prototype.getShared=function(){switch(this.scope){case a.POSITION:return!1}return!0},a.prototype.generate=function(e,t){var o;switch(this.scope){case a.POSITION:o="cameraPosition";break;case a.DEPTH:o=e.include(a.Nodes.depthColor)+"( "+this.near.build(e,"f")+", "+this.far.build(e,"f")+" )";break;case a.TO_VERTEX:o="normalize( "+new r(r.WORLD).build(e,"v3")+" - cameraPosition )"}return e.format(o,this.getType(e),t)},a.prototype.onUpdateFrame=function(){switch(this.scope){case a.DEPTH:var e=this.camera;this.near.value=e.near,this.far.value=e.far}},a.prototype.copy=function(t){switch(e.prototype.copy.call(this,t),this.setScope(t.scope),t.camera&&this.setCamera(t.camera),t.scope){case a.DEPTH:this.near.number=t.near,this.far.number=t.far}return this},a.prototype.toJSON=function(e){var t=this.getJSONNode(e);if(!t)switch((t=this.createJSONNode(e)).scope=this.scope,this.camera&&(t.camera=this.camera.uuid),this.scope){case a.DEPTH:t.near=this.near.value,t.far=this.far.value}return t},a});
//# sourceMappingURL=../../sourcemaps/nodes/accessors/CameraNode.js.map
